(self.webpackChunkblockly_mooc=self.webpackChunkblockly_mooc||[]).push([[194],{887:(e,t,i)=>{var o=i(20);e.exports={dialog:{maxWidth:1e3,marginLeft:0,transform:"translate(-50%, 0)"},title:{color:o.purple,textAlign:"center",margin:0,fontSize:"140%",lineHeight:"140%"}}},3007:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.skinsModule=s.default,e.blocksModule=a.default,(0,o.default)(n.default,r.default,e)};var o=l(i(1377)),n=l(i(2859)),a=l(i(2104)),r=l(i(3522)),s=l(i(2544));function l(e){return e&&e.__esModule?e:{default:e}}window.Studio=n.default,void 0!==i.g&&(i.g.Studio=window.Studio),e.exports=t.default},3713:(e,t,i)=>{"use strict";var o=n(i(3007));function n(e){return e&&e.__esModule?e:{default:e}}(0,n(i(1220)).default)().then(o.default)},2657:(e,t,i)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=m(i(2658)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var i=p(t);if(i&&i.has(e))return i.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=a?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i(1211)),r=m(i(53)),s=i(3517),l=m(i(2859)),u=m(i(2587)),d=m(i(2588)),c=i(33);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(p=function(e){return e?i:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var S=a.Direction,f=a.NextTurn,g=function(e){var t,i;function o(t){var i;return(i=e.call(this,t)||this).height=t.height||50,i.width=t.width||50,i.className=t.className,void 0===l.default.trackedBehavior.createdItems[i.className]&&(l.default.trackedBehavior.createdItems[i.className]=0),l.default.trackedBehavior.createdItems[i.className]++,i.renderOffset=t.renderOffset||{x:0,y:0},i.speed=t.speed||a.DEFAULT_ITEM_SPEED,i.normalSpeed=t.normalSpeed||a.DEFAULT_ITEM_SPEED,i.normalFrameDuration=t.animationFrameDuration||a.DEFAULT_ITEM_ANIMATION_FRAME_DURATION,i.displayDir=S.SOUTH,i.startFadeTime=null,i.fadeTime=a.ITEM_FADE_TIME,i.targetSpriteIndex=0,i.animation_=new u.default(Object.assign({},t,{spriteSheet:new d.default({assetPath:t.image,defaultFramesPerAnimation:t.frames,frameWidth:i.width,frameHeight:i.height,animations:[{type:"direction",count:8},{type:"idle",count:1}]}),animationFrameDuration:i.getAnimationFrameDuration()})),i}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,h(t,i);var n=o.prototype;return n.getElement=function(){return this.animation_.getElement()},n.getDirectionFrame=function(){return this.dir!==this.displayDir&&void 0!==this.displayDir&&l.default.tickCount&&0==l.default.tickCount%2&&(this.displayDir=f[this.displayDir][this.dir]),(this.spritesCounterclockwise?a.frameDirTableWalkingWithIdleCounterclockwise:a.frameDirTableWalkingWithIdleClockwise)[this.displayDir]},n.createElement=function(e){this.animation_.createElement(e)},n.update=function(){void 0===this.gridX&&(this.gridX=Math.floor(this.x/l.default.SQUARE_SIZE),this.gridY=Math.floor(this.y/l.default.SQUARE_SIZE));var e=!1;if(l.default.drawDebugRect("itemCenter",this.x,this.y,3,3),this.activity!==a.BEHAVIOR_WATCH_ACTOR&&this.activity!==a.BEHAVIOR_GRID_ALIGNED){if(this.activity===a.BEHAVIOR_STOP)return this.setDirection(S.NONE),this.destGridX=void 0,void(this.destGridY=void 0);if(this.visible){void 0!==this.destGridX&&l.default.drawDebugRect("roamGridDest",this.destGridX*l.default.SQUARE_SIZE+l.default.HALF_SQUARE,this.destGridY*l.default.SQUARE_SIZE+l.default.HALF_SQUARE,l.default.SQUARE_SIZE,l.default.SQUARE_SIZE);var t=this.getCenterPos();if(void 0!==this.destGridX){var i=(0,c.valueOr)(this.speed,0),o=S.getUnitVector(this.dir),n={x:this.destGridX*l.default.SQUARE_SIZE+l.default.HALF_SQUARE-t.x,y:this.destGridY*l.default.SQUARE_SIZE+l.default.HALF_SQUARE-t.y};o.x*n.x+o.y*n.y<=i&&(this.gridX=this.destGridX,this.gridY=this.destGridY,e=!0)}if(void 0===this.destGridX||e){for(var s=l.default.sprite[this.targetSpriteIndex],u=s.x+s.width/2,d=s.y+s.height/2,p=[],m=60,h=[{row:-1,col:0},{row:1,col:0},{row:0,col:-1},{row:0,col:1}],f=0;f<h.length;f++){var g=this.gridX+h[f].col,_=this.gridY+h[f].row;(b={gridX:g,gridY:_}).score=0,this.activity===a.BEHAVIOR_WANDER?b.score++:this.activity===a.BEHAVIOR_CHASE?(_===this.gridY-1&&d<t.y-m||_===this.gridY+1&&d>t.y+m?b.score+=2:b.score+=1,(g===this.gridX-1&&u<t.x-m||g===this.gridX+1&&u>t.x+m)&&b.score++):this.activity===a.BEHAVIOR_FLEE&&(b.score=1,(_===this.gridY-1&&d>t.y-m||_===this.gridY+1&&d<t.y+m)&&b.score++,(g===this.gridX-1&&u>t.x-m||g===this.gridX+1&&u<t.x+m)&&b.score++),b.score>0&&l.default.drawDebugRect("roamGridPossibleDest",g*l.default.SQUARE_SIZE+l.default.HALF_SQUARE,_*l.default.SQUARE_SIZE+l.default.HALF_SQUARE,l.default.SQUARE_SIZE,l.default.SQUARE_SIZE),p.push(b)}for(var y=p.length-1;y>=0;y--){var b=p[y];(0===b.score||this.atEdge(b)||this.hasWall(b))&&p.splice(y,1)}var v=S.NONE;p.length>0&&((p=r.default.shuffle(p)).sort((function(e,t){return t.score-e.score})),this.destGridX=p[0].gridX,this.destGridY=p[0].gridY,this.destGridX>this.gridX&&this.destGridY>this.gridY?v=S.SOUTHEAST:this.destGridX>this.gridX&&this.destGridY<this.gridY?v=S.NORTHEAST:this.destGridX<this.gridX&&this.destGridY>this.gridY?v=S.SOUTHWEST:this.destGridX<this.gridX&&this.destGridY<this.gridY?v=S.NORTHWEST:this.destGridX>this.gridX?v=S.EAST:this.destGridX<this.gridX?v=S.WEST:this.destGridY>this.gridY?v=S.SOUTH:this.destGridY<this.gridY&&(v=S.NORTH)),this.setDirection(v)}}}},n.atEdge=function(e){return e.gridX<0||e.gridX>=l.default.COLS||e.gridY<0||e.gridY>=l.default.ROWS},n.hasWall=function(e){return l.default.getWallValue(e.gridY,e.gridX)},n.turnToFaceActor=function(e){var t=l.default.sprite[e];if(t){var i=t.displayX+l.default.HALF_SQUARE,o=t.displayY+l.default.HALF_SQUARE,n=i-this.x,r=o-this.y;n*n+r*r>25&&(l.default.drawDebugLine("watchActor",this.x,this.y,i,o,"#ffff00"),this.setDirection(a.getClosestDirection(n,r)))}},n.setActivity=function(e,t){this.activity=e,void 0!==t&&(this.targetSpriteIndex=t)},n.beginRemoveElement=function(){this.startFadeTime=(new Date).getTime()},n.removeElement=function(){this.animation_.removeElement(),l.default.trackedBehavior.removedItemCount++,void 0===l.default.trackedBehavior.removedItems[this.className]&&(l.default.trackedBehavior.removedItems[this.className]=0),l.default.trackedBehavior.removedItems[this.className]++},n.getAnimationFrameDuration=function(){return this.dir===S.NONE?this.normalFrameDuration:this.normalFrameDuration*this.normalSpeed/this.speed},n.isFading=function(){return!!this.startFadeTime},n.hasCompletedFade=function(){var e=(new Date).getTime();return this.startFadeTime&&e>this.startFadeTime+this.fadeTime},n.shouldFaceSouthOnIdle=function(){return this.activity!==a.BEHAVIOR_GRID_ALIGNED},n.display=function(){var e=(new Date).getTime(),t=1;this.startFadeTime&&(t=1-(e-this.startFadeTime)/this.fadeTime,t=Math.max(t,0),this.animation_.setOpacity(t)),this.activity===a.BEHAVIOR_WATCH_ACTOR&&this.turnToFaceActor(l.default.protagonistSpriteIndex||0),this.animation_.setCurrentAnimation("direction",this.getDirectionFrame()),this.animation_.redrawCenteredAt({x:this.x+this.renderOffset.x,y:this.y+this.renderOffset.y},l.default.tickCount)},n.getCenterPos=function(){return{x:this.x,y:this.y}},n.shouldMove=function(){return![a.BEHAVIOR_STOP,a.BEHAVIOR_WATCH_ACTOR,a.BEHAVIOR_GRID_ALIGNED].includes(this.activity)},n.getNextPosition=function(){var e=S.getUnitVector(this.dir),t=this.shouldMove()?this.speed:0;return{x:this.x+t*e.x,y:this.y+t*e.y}},n.moveToNextPosition=function(){var e=this.getNextPosition();this.x=e.x,this.y=e.y},n.updateAnimationFrameDuration_=function(){this.animation_.setAnimationFrameDuration(this.getAnimationFrameDuration())},n.setSpeed=function(e){this.speed=e,this.updateAnimationFrameDuration_()},n.setDirection=function(e){this.dir=e,this.updateAnimationFrameDuration_()},n.startCollision=function(t){var i=e.prototype.startCollision.call(this,t);if(i&&this.isHazard&&t===(l.default.protagonistSpriteIndex||0)){l.default.trackedBehavior.touchedHazardCount++;var o=l.default.sprite[t];o&&o.addAction(new s.ShakeActor(a.TOUCH_HAZARD_EFFECT_TIME))}return i},n.setOpacity=function(e){this.animation_.setOpacity(e)},o}(n.default);t.default=g,e.exports=t.default},3011:(e,t,i)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=a?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i(1211)),a=u(i(2657)),r=u(i(2587)),s=u(i(2588)),l=i(33);function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var p=n.Direction,m=n.Emotions,h=function(e){var t,i;function o(t){var i;return(i=e.call(this,t)||this).renderOffset=t.renderOffset||{x:0,y:0},i.speed=t.speed||n.DEFAULT_SPRITE_SPEED,i.setNormalFrameDuration(t.animationFrameDuration),i.displayDir=t.displayDir||p.NONE,i.startFadeTime=null,i.fadeTime=0,i.image=null,i.legacyImage=null,i.animation_=null,i.legacyAnimation_=null,i.useLegacyIdleEmotionAnimations=!1,i.lastDrawPosition={x:0,y:0},i}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,c(t,i);var a=o.prototype;return a.setImage=function(e,t){if(e!==this.image){this.image=e;var i={renderScale:this.renderScale,opacity:this.opacity,loop:this.loop,animationFrameDuration:this.animationFrameDuration,frameWidth:this.drawWidth,frameHeight:this.drawHeight,assetPath:this.image,animations:[{type:"direction",count:t.turns||0,frames:t.walkFrames||t.walk},{type:"idle",count:(t.idleNormal||0)+(t.idleEmotions||0),frames:t.idleFrames||t.walk},{type:"walkingEmotions",count:t.walkingEmotions||0,frames:t.walkFrames||t.walk}],packedSheetFrameCount:t.packedSheetFrameCount,defaultFramesPerAnimation:t.walk,skewAnimations:!0};this.animation_&&this.animation_.removeElement(),this.image?this.animation_=new r.default(Object.assign({},i,{spriteSheet:new s.default(i),animationFrameDuration:this.getAnimationFrameDuration()})):this.animation_=null}},a.setLegacyImage=function(e,t){if(e!==this.legacyImage){this.legacyImage=e;var i=1+(0,l.valueOr)(t.extraEmotions,0),o=t.normal+t.turns+t.emotions,n={renderScale:this.renderScale,opacity:this.opacity,loop:this.loop,animationFrameDuration:this.animationFrameDuration,frameWidth:this.drawWidth,frameHeight:this.drawHeight,assetPath:this.legacyImage,animations:[{type:"legacyEmotionRow",count:i,frames:o}],defaultFramesPerAnimation:o,horizontalAnimation:!0,skewAnimations:!0};if(this.legacyAnimation_&&this.legacyAnimation_.removeElement(),this.legacyImage){this.legacyAnimation_=new r.default(Object.assign({},n,{spriteSheet:new s.default(n),animationFrameDuration:this.getAnimationFrameDuration()}));for(var a,u,d=(0,l.valueOr)(t.turns,0),c=(0,l.valueOr)(t.holdIdleFrame0Count,1),p=0;p<i;p++){for(u=[],a=0;a<c;a++)u.push({type:"legacyEmotionRow",index:p,frame:0});for(a=1;a<t.normal;a++)u.push({type:"legacyEmotionRow",index:p,frame:a});if(this.legacyAnimation_.createSpecialAnimation("idle",p,u),d>=7){var m=0,h=0;for(7===d&&(this.legacyAnimation_.createSpecialAnimation("direction",m,[{type:"legacyEmotionRow",index:p,frame:0}]),m++);m<8;m++,h++)this.legacyAnimation_.createSpecialAnimation("direction",m,[{type:"legacyEmotionRow",index:p,frame:this.frameCounts.normal+h}])}}if(1===i)for(a=0;a<t.emotions;a++){u=[];for(var S=0;S<c;S++)u.push({type:"legacyEmotionRow",index:0,frame:t.normal+t.turns+a});for(var f=1;f<t.normal;f++)u.push({type:"legacyEmotionRow",index:0,frame:f});this.legacyAnimation_.createSpecialAnimation("idle",a+1,u),this.useLegacyIdleEmotionAnimations=!0}}else this.legacyAnimation_=null}},a.getElement=function(){return this.animation_?this.animation_.getElement():null},a.getLegacyElement=function(){return this.legacyAnimation_?this.legacyAnimation_.getElement():null},a.getDirectionFrame=function(){return(this.frameCounts.counterClockwise?n.frameDirTableWalkingWithIdleCounterclockwise:n.frameDirTableWalkingWithIdleClockwise)[this.displayDir]},a.createElement=function(e){this.animation_&&(this.animation_.getElement()||this.animation_.createElement(e),this.visible||this.animation_.hide()),this.legacyAnimation_&&(this.legacyAnimation_.getElement()||this.legacyAnimation_.createElement(e),this.visible||this.legacyAnimation_.hide())},a.update=function(){e.prototype.update.call(this),Studio.drawDebugRect("spriteCenter",this.x,this.y,3,3)},a.startFade=function(e){this.startFadeTime=(new Date).getTime(),this.fadeTime=(0,l.valueOr)(e,n.DEFAULT_ACTOR_FADE_TIME)},a.removeElement=function(){this.animation_&&this.animation_.removeElement(),this.legacyAnimation_&&this.legacyAnimation_.removeElement()},a.getAnimationFrameDuration=function(){return this.dir===p.NONE?this.normalFrameDuration:this.normalFrameDuration*n.DEFAULT_SPRITE_SPEED/this.speed},a.display=function(){var e=(new Date).getTime(),t=1;this.startFadeTime&&(t=1-(e-this.startFadeTime)/this.fadeTime,t=Math.max(t,0),this.setOpacity(t),this.hasCompletedFade()&&(this.startFadeTime=null));var i,o,n=!1,a=this.displayDir===p.NONE,r=this.displayDir===p.SOUTH&&this.emotion!==m.NORMAL;a||!this.animation_&&r?(o=this.emotion,i="idle",a&&this.frameCounts.normal?n=!0:this.animation_&&!this.frameCounts.idleNormal&&(o-=1)):r&&this.animation_&&this.animation_.hasType("walkingEmotions")?(o=this.emotion-1,i="walkingEmotions"):(o=this.getDirectionFrame(),i="direction"),this.animation_||(n=!0);var s=this.getCurrentDrawPosition();n?(this.animation_&&this.animation_.hide(),this.legacyAnimation_&&(this.legacyAnimation_.setCurrentAnimation(i,o),this.legacyAnimation_.redrawCenteredAt(s,Studio.tickCount),this.visible?this.legacyAnimation_.show():this.legacyAnimation_.hide())):(this.animation_.setCurrentAnimation(i,o),this.animation_.redrawCenteredAt(s,Studio.tickCount),this.visible?this.animation_.show():this.animation_.hide(),this.legacyAnimation_&&this.legacyAnimation_.hide()),this.lastDrawPosition=s},a.getCenterPos=function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},a.getCurrentDrawPosition=function(){return{x:this.displayX+this.drawWidth/2+this.renderOffset.x,y:this.displayY+this.drawHeight/2+this.renderOffset.y}},a.updateAnimationFrameDuration_=function(){this.animation_&&this.animation_.setAnimationFrameDuration(this.getAnimationFrameDuration()),this.legacyAnimation_&&this.legacyAnimation_.setAnimationFrameDuration(this.getAnimationFrameDuration())},a.setNormalFrameDuration=function(e){this.normalFrameDuration=e||n.DEFAULT_SPRITE_ANIMATION_FRAME_DURATION,this.updateAnimationFrameDuration_()},a.setOpacity=function(e){this.animation_&&this.animation_.setOpacity(e),this.legacyAnimation_&&this.legacyAnimation_.setOpacity(e)},a.atEdge=function(e){return e.gridX<0||e.gridX*Studio.SQUARE_SIZE+this.width>Studio.MAZE_WIDTH||e.gridY<0||e.gridY*Studio.SQUARE_SIZE+this.height>Studio.MAZE_HEIGHT},a.hasWall=function(e){return Studio.willSpriteTouchWall(this,e.gridX*Studio.SQUARE_SIZE,e.gridY*Studio.SQUARE_SIZE)},o}(a.default);t.default=h,e.exports=t.default},2587:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(33),n=i(137),a=0,r=function(){function e(e){this.spriteSheet_=e.spriteSheet,this.renderScale_=(0,o.valueOr)(e.renderScale,1),this.opacity_=(0,o.valueOr)(e.opacity,1),this.currentAnimationType_=0,this.specialAnimations_={},this.currentAnimationIndex_=0,this.loop_=(0,o.valueOr)(e.loop,!1),this.skewAnimations_=(0,o.valueOr)(e.skewAnimations,!1),this.element_=null,this.clipPath_=null,this.animationFrameDuration_=e.animationFrameDuration||1}e.__resetIds=function(){a=0};var t=e.prototype;return t.getElement=function(){return this.element_},t.createElement=function(e){this.animId=a++,this.clipPath_=document.createElementNS(n.SVG_NS,"clipPath");var t="studioanimation_clippath_"+this.animId;this.clipPath_.setAttribute("id",t);var i=document.createElementNS(n.SVG_NS,"rect");i.setAttribute("width",this.spriteSheet_.frameWidth*this.renderScale_),i.setAttribute("height",this.spriteSheet_.frameHeight*this.renderScale_),this.clipPath_.appendChild(i),e.appendChild(this.clipPath_);var o="studioanimation_"+this.animId;this.element_=document.createElementNS(n.SVG_NS,"image"),this.element_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.spriteSheet_.assetPath),this.element_.setAttribute("id",o),this.element_.setAttribute("height",this.spriteSheet_.assetHeight()*this.renderScale_),this.element_.setAttribute("width",this.spriteSheet_.assetWidth()*this.renderScale_),e.appendChild(this.element_),this.element_.setAttribute("clip-path","url(#"+t+")")},t.removeElement=function(){this.element_&&(this.element_.parentNode.removeChild(this.element_),this.element_=null),this.clipPath_&&(this.clipPath_.parentNode.removeChild(this.clipPath_),this.clipPath_=null)},t.hasType=function(e){return!!this.specialAnimations_[e]||!!this.spriteSheet_.animationFrameCounts[e]},t.getAnimationFrameCount=function(){var e=this.specialAnimations_[this.currentAnimationType_];return e?e[this.currentAnimationIndex_].length:this.spriteSheet_.getAnimationFrameCount(this.currentAnimationType_)},t.getFrame=function(e){var t=this.specialAnimations_[this.currentAnimationType_];return t?t[this.currentAnimationIndex_][e]:this.spriteSheet_.getFrame(this.currentAnimationType_,this.currentAnimationIndex_,e)},t.redrawCenteredAt=function(e,t){var i=t;this.skewAnimations_&&(i=t+this.animId*(this.animationFrameDuration_+1));var o=Math.floor(i/this.animationFrameDuration_),n=this.getAnimationFrameCount();this.loop_?o%=n:o=Math.min(o,n-1);var a=this.getFrame(o),r=this.renderScale_,s={x:e.x-a.width/2*r,y:e.y-a.height/2*(2*r-1)};this.element_.setAttribute("x",s.x-a.left*r),this.element_.setAttribute("y",s.y-a.top*r),this.element_.setAttribute("opacity",this.opacity_);var l=this.clipPath_.childNodes[0];l.setAttribute("x",s.x),l.setAttribute("y",s.y)},t.setCurrentAnimation=function(e,t){this.currentAnimationType_=e,this.currentAnimationIndex_=t},t.createSpecialAnimation=function(e,t,i){this.specialAnimations_[e]||(this.specialAnimations_[e]=[]);for(var o=[],n=0;n<i.length;n++)o.push(this.spriteSheet_.getFrame(i[n].type,i[n].index,i[n].frame));this.specialAnimations_[e][t]=o},t.setAnimationFrameDuration=function(e){this.animationFrameDuration_=e},t.setOpacity=function(e){this.opacity_=e},t.hide=function(){this.element_.setAttribute("visibility","hidden")},t.show=function(){this.element_.setAttribute("visibility","visible")},e}();t.default=r,e.exports=t.default},2588:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(33),n=function(){function e(e){this.animations=e.animations||[],this.frameWidth=e.frameWidth,this.frameHeight=e.frameHeight,this.assetPath=e.assetPath,this.defaultFramesPerAnimation=e.defaultFramesPerAnimation||1,this.packedSheetFrameCount=e.packedSheetFrameCount,this.animationOffsets={},this.animationFrameCounts={};for(var t=0,i=0,n=0;n<this.animations.length;n++){this.animationOffsets[this.animations[n].type]=this.packedSheetFrameCount?t:i,i+=this.animations[n].count;var a=(0,o.valueOr)(this.animations[n].frames,this.defaultFramesPerAnimation);this.animationFrameCounts[this.animations[n].type]=a,t+=a*this.animations[n].count}if(this.totalAnimations=(0,o.valueOr)(e.totalAnimations,i),this.totalFrames=t||this.totalAnimations*this.defaultFramesPerAnimation,this.horizontalAnimation=(0,o.valueOr)(e.horizontalAnimation,!1),this.packedSheetFrameCount){var r=Math.ceil(this.totalFrames/this.packedSheetFrameCount),s=Math.ceil(this.totalFrames/r);this.columnCount=this.horizontalAnimation?s:r,this.rowCount=this.horizontalAnimation?r:s}else this.rowCount=this.horizontalAnimation?this.totalAnimations:this.defaultFramesPerAnimation,this.columnCount=this.horizontalAnimation?this.defaultFramesPerAnimation:this.totalAnimations}var t=e.prototype;return t.assetWidth=function(){return this.frameWidth*this.columnCount},t.assetHeight=function(){return this.frameHeight*this.rowCount},t.getAnimationFrameCount=function(e){return(0,o.valueOr)(this.animationFrameCounts[e],this.defaultFramesPerAnimation)},t.getFrame=function(e,t,i){var o,n;if(this.packedSheetFrameCount){var a=this.animationOffsets[e]+this.animationFrameCounts[e]*t;a+=i,this.horizontalAnimation?(o=this.frameWidth*(a%this.columnCount),n=this.frameHeight*Math.floor(a/this.columnCount)):(o=this.frameWidth*Math.floor(a/this.rowCount),n=this.frameHeight*(a%this.rowCount))}else e&&(t+=this.animationOffsets[e]),o=this.frameWidth*(this.horizontalAnimation?i:t),n=this.frameHeight*(this.horizontalAnimation?t:i);return{x:o,y:n,width:this.frameWidth,height:this.frameHeight,top:n,left:o,right:o+this.frameWidth,bottom:n+this.frameHeight}},e}();t.default=n,e.exports=t.default},3520:(e,t,i)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var n=m(i(2)),a=m(i(1)),r=m(i(1635)),s=m(i(1168)),l=m(i(1814)),u=m(i(2177)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var i=p(t);if(i&&i.has(e))return i.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=a?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i(2178)),c=m(i(2096));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(p=function(e){return e?i:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}var h=i(13),S=i(1365).default,f=i(1213),g=function(e){return a.default.createElement("span",null,a.default.createElement(s.default,null,a.default.createElement(c.default,null),a.default.createElement("svg",{version:"1.1",id:"svgStudio"}),a.default.createElement(l.default,{width:400,height:400},a.default.createElement(u.default,null),a.default.createElement(d.default,{providers:[(0,d.coordinatesProvider)(!1,!!e.isRtl)]}))),a.default.createElement(S,null,a.default.createElement(r.default,null),e.finishButton&&a.default.createElement("div",{id:"share-cell",className:"share-cell-none"},a.default.createElement("button",{type:"button",id:"finishButton",className:"share"},a.default.createElement("img",{src:"/blockly/media/1x1.gif"}),h.finish()))),a.default.createElement(f,null))};g.propTypes={finishButton:n.default.bool.isRequired,isRtl:n.default.bool},e.exports=g},3521:(e,t,i)=>{var o=i(33);function n(e){false}var a="none",r="begin",s="loop",l="end",u=function(e,t){t=o.valueOr(t,{}),this.state_=a,this.audioPlayer_=e,this.beginClipName_=t.begin,this.loopClipName_=t.loop,this.endClipName_=t.end,this.volume_=o.valueOr(t.volume,1)};e.exports=u,u.prototype.on=function(){this.state_!==a&&this.state_!==l||(n(),this.enterState_(r))},u.prototype.off=function(){n(),this.state_!==r&&this.state_!==s||this.enterState_(l)},u.prototype.enterState_=function(e){this.exitState_(this.state_),n(this.state_),this.state_=e;var t=this.whenSoundStopped_.bind(this,e);e===r?this.beginClipName_?this.audioPlayer_.play(this.beginClipName_,{volume:this.volume_,onEnded:t}):this.enterState_(s):e===s?this.loopClipName_?this.audioPlayer_.play(this.loopClipName_,{volume:this.volume_,loop:!0,onEnded:t}):this.enterState_(l):e===l&&(this.endClipName_?this.audioPlayer_.play(this.endClipName_,{volume:this.volume_,onEnded:t}):this.enterState_(a))},u.prototype.exitState_=function(e){e===r&&this.beginClipName_?this.audioPlayer_.stopLoopingAudio(this.beginClipName_):e===s&&this.loopClipName_?this.audioPlayer_.stopLoopingAudio(this.loopClipName_):e===l&&this.endClipName_&&this.audioPlayer_.stopLoopingAudio(this.endClipName_)},u.prototype.whenSoundStopped_=function(e){n(),e===r&&this.state_===r?this.enterState_(s):e===l&&this.state_===l&&this.enterState_(a)}},3514:(e,t,i)=>{"use strict";var o=i(1211),n=i(33);t.SpriteSpeed=o.SpriteSpeed,t.SpriteSize=o.SpriteSize;t.random=function(e){return(0,n.randomValue)(e)},t.endGame=function(e,t){Studio.queueCmd(e,"endGame",{value:t})},t.setBackground=function(e,t){Studio.queueCmd(e,"setBackground",{value:t})},t.setMap=function(e,t){Studio.queueCmd(e,"setMap",{value:t})},t.setMapAndColor=function(e,t,i){Studio.queueCmd(e,"setMapAndColor",{value:i,color:t})},t.setAllowSpritesOutsidePlayspace=function(e,t){Studio.queueCmd(e,"setAllowSpritesOutsidePlayspace",{value:t})},t.setSprite=function(e,t,i){Studio.queueCmd(e,"setSprite",{spriteIndex:t,value:i})},t.getSpriteVisibility=function(e,t,i){Studio.queueCmd(e,"getSpriteVisibility",{spriteIndex:t,callback:i})},t.getSpriteValue=function(e,t,i){Studio.queueCmd(e,"getSpriteValue",{spriteIndex:t,callback:i})},t.saySprite=function(e,t,i,o){void 0===o&&(o=3),Studio.queueCmd(e,"saySprite",{spriteIndex:t,text:i,seconds:o})},t.showTitleScreen=function(e,t,i){Studio.queueCmd(e,"showTitleScreen",{title:t,text:i})},t.setSpriteEmotion=function(e,t,i){Studio.queueCmd(e,"setSpriteEmotion",{spriteIndex:t,value:i})},t.getSpriteEmotion=function(e,t,i){Studio.queueCmd(e,"getSpriteEmotion",{spriteIndex:t,callback:i})},t.setSpriteSpeed=function(e,t,i){Studio.queueCmd(e,"setSpriteSpeed",{spriteIndex:t,value:i})},t.setDroid=function(e,t){Studio.queueCmd(e,"setSprite",{spriteIndex:0,value:t})},t.setDroidSpeed=function(e,t){Studio.queueCmd(e,"setDroidSpeed",{value:t})},t.setSpriteSize=function(e,t,i){Studio.queueCmd(e,"setSpriteSize",{spriteIndex:t,value:i})},t.setSpritePosition=function(e,t,i){Studio.queueCmd(e,"setSpritePosition",{spriteIndex:t,value:Number(i)})},t.setSpriteXY=function(e,t,i,o){Studio.queueCmd(e,"setSpriteXY",{spriteIndex:t,x:Number(i),y:Number(o)})},t.getSpriteXY=function(e,t,i){Studio.queueCmd(e,"getSpriteXY",{spriteIndex:t,callback:i})},t.setSpriteBehavior=function(e,t,i,o){Studio.queueCmd(e,"setSpriteBehavior",{spriteIndex:t,targetSpriteIndex:i,behavior:o})},t.setSpritesWander=function(e,t){Studio.queueCmd(e,"setSpritesWander",{spriteName:t})},t.setSpritesStop=function(e,t){Studio.queueCmd(e,"setSpritesStop",{spriteName:t})},t.setSpritesChase=function(e,t,i){Studio.queueCmd(e,"setSpritesChase",{spriteName:i,targetSpriteIndex:t})},t.setSpritesFlee=function(e,t,i){Studio.queueCmd(e,"setSpritesFlee",{spriteName:i,targetSpriteIndex:t})},t.setSpritesSpeed=function(e,t,i){Studio.queueCmd(e,"setSpritesSpeed",{spriteName:i,speed:t})},t.addGoal=function(e,t){Studio.queueCmd(e,"addGoal",{value:Number(t)})},t.addGoalXY=function(e,t,i){Studio.queueCmd(e,"addGoal",{x:Number(t),y:Number(i)})},t.playSound=function(e,t){Studio.queueCmd(e,"playSound",{soundName:t})},t.stop=function(e,t){Studio.queueCmd(e,"stop",{spriteIndex:t})},t.throwProjectile=function(e,t,i,o){Studio.queueCmd(e,"throwProjectile",{spriteIndex:t,dir:Number(i),className:String(o)})},t.makeProjectile=function(e,t,i){Studio.queueCmd(e,"makeProjectile",{className:t,action:i})},t.move=function(e,t,i){Studio.queueCmd(e,"move",{spriteIndex:t,dir:Number(i)})},t.moveDistance=function(e,t,i,o){Studio.queueCmd(e,"moveDistance",{spriteIndex:t,dir:i,distance:o})},t.moveForward=function(e){Studio.queueCmd(e,"moveForward")},t.moveBackward=function(e){Studio.queueCmd(e,"moveBackward")},t.turnRight=function(e){Studio.queueCmd(e,"turnRight")},t.turnLeft=function(e){Studio.queueCmd(e,"turnLeft")},t.addPoints=function(e,t){Studio.changeScore({value:t}),Studio.queueCmd(e,"displayScore",{})},t.removePoints=function(e,t){Studio.reduceScore({value:t}),Studio.queueCmd(e,"displayScore",{})},t.changeScore=function(e,t){Studio.changeScore({value:t}),Studio.queueCmd(e,"displayScore",{})},t.getScore=function(){return Studio.playerScore},t.setScore=function(e){Studio.setScore(e)},t.addCharacter=function(e,t){Studio.queueCmd(e,"addItem",{className:t})},t.setItemActivity=function(e,t,i){Studio.queueCmd(e,"setItemActivity",{className:t,type:i})},t.setItemSpeed=function(e,t,i){Studio.queueCmd(e,"setItemSpeed",{className:t,speed:i})},t.moveFast=function(e,t){Studio.queueCmd(e,"setItemSpeed",{className:t,speed:o.SpriteSpeed.FAST})},t.moveNormal=function(e,t){Studio.queueCmd(e,"setItemSpeed",{className:t,speed:o.SpriteSpeed.SLOW})},t.moveSlow=function(e,t){Studio.queueCmd(e,"setItemSpeed",{className:t,speed:o.SpriteSpeed.VERY_SLOW})},t.showDebugInfo=function(e){Studio.queueCmd(null,"showDebugInfo",{value:e})},t.setScoreText=function(e,t){Studio.queueCmd(e,"setScoreText",{text:t})},t.showCoordinates=function(e){Studio.queueCmd(e,"showCoordinates",{})},t.wait=function(e,t){Studio.queueCmd(e,"wait",{value:t})},t.vanish=function(e,t){Studio.queueCmd(e,"vanish",{spriteIndex:t})},t.onEvent=function(e,t,i){Studio.queueCmd(e,"onEvent",{eventName:String(t),func:i})},t.askForInput=function(e,t,i){Studio.queueCmd(e,"askForInput",{question:t,callback:i})},t.isKeyDown=function(e){return"keydown"===Studio.keyState[e]}},3715:(e,t)=>{t.endGame=function(e){Studio.queueCmd(null,"endGame",{value:e})},t.setBackground=function(e){Studio.queueCmd(null,"setBackground",{value:e})},t.setMap=function(e){Studio.queueCmd(null,"setMap",{value:e})},t.setMapAndColor=function(e,t){Studio.queueCmd(null,"setMapAndColor",{value:t,color:e})},t.setAllowSpritesOutsidePlayspace=function(e){Studio.queueCmd(null,"setAllowSpritesOutsidePlayspace",{value:e})},t.setSprite=function(e,t){Studio.queueCmd(null,"setSprite",{spriteIndex:e,value:t})},t.setSpriteEmotion=function(e,t){Studio.queueCmd(null,"setSpriteEmotion",{spriteIndex:e,value:t})},t.setSpriteSpeed=function(e,t){Studio.queueCmd(null,"setSpriteSpeed",{spriteIndex:e,value:t})},t.setDroid=function(e){Studio.queueCmd(null,"setSprite",{spriteIndex:0,value:e})},t.setDroidSpeed=function(e){Studio.queueCmd(null,"setDroidSpeed",{value:e})},t.setSpriteSize=function(e,t){Studio.queueCmd(null,"setSpriteSize",{spriteIndex:e,value:t})},t.setSpritePosition=function(e,t){Studio.queueCmd(null,"setSpritePosition",{spriteIndex:e,value:t})},t.setSpriteBehavior=function(e,t,i,o){Studio.queueCmd(e,"setSpriteBehavior",{spriteIndex:t,targetSpriteIndex:i,behavior:o})},t.setSpritesWander=function(e,t){Studio.queueCmd(e,"setSpritesWander",{spriteName:t})},t.setSpritesStop=function(e,t){Studio.queueCmd(e,"setSpritesStop",{spriteName:t})},t.setSpritesChase=function(e,t,i){Studio.queueCmd(e,"setSpritesChase",{spriteName:i,targetSpriteIndex:t})},t.setSpritesFlee=function(e,t,i){Studio.queueCmd(e,"setSpritesFlee",{spriteName:i,targetSpriteIndex:t})},t.setSpritesSpeed=function(e,t,i){Studio.queueCmd(e,"setSpritesSpeed",{spriteName:i,speed:t})},t.playSound=function(e){Studio.queueCmd(null,"playSound",{soundName:e})},t.throwProjectile=function(e,t,i){Studio.queueCmd(null,"throwProjectile",{spriteIndex:e,dir:t,className:i})},t.move=function(e,t){Studio.queueCmd(null,"move",{spriteIndex:e,dir:t})},t.moveRight=function(){Studio.queueCmd(null,"moveRight")},t.moveLeft=function(){Studio.queueCmd(null,"moveLeft")},t.moveUp=function(){Studio.queueCmd(null,"moveUp")},t.moveDown=function(){Studio.queueCmd(null,"moveDown")},t.goRight=function(){Studio.queueCmd(null,"moveRight")},t.goLeft=function(){Studio.queueCmd(null,"moveLeft")},t.goUp=function(){Studio.queueCmd(null,"moveUp")},t.goDown=function(){Studio.queueCmd(null,"moveDown")},t.addPoints=function(e){Studio.changeScore({value:e}),Studio.queueCmd(null,"displayScore",{})},t.removePoints=function(e){Studio.reduceScore({value:e}),Studio.queueCmd(null,"displayScore",{})},t.changeScore=function(e){Studio.changeScore({value:e}),Studio.queueCmd(null,"displayScore",{})},t.getScore=function(){return Studio.playerScore},t.setScore=function(e){Studio.setScore(e)},t.addCharacter=function(e){Studio.queueCmd(null,"addItem",{className:e})},t.setToChase=function(e){Studio.queueCmd(null,"setItemActivity",{className:e,type:"chase"})},t.setToFlee=function(e){Studio.queueCmd(null,"setItemActivity",{className:e,type:"flee"})},t.setToRoam=function(e){Studio.queueCmd(null,"setItemActivity",{className:e,type:"roam"})},t.setToStop=function(e){Studio.queueCmd(null,"setItemActivity",{className:e,type:"none"})},t.moveFast=function(e,t){Studio.queueCmd(null,"setItemSpeed",{className:e,speed:"fast"})},t.moveNormal=function(e,t){Studio.queueCmd(null,"setItemSpeed",{className:e,speed:"normal"})},t.moveSlow=function(e,t){Studio.queueCmd(null,"setItemSpeed",{className:e,speed:"slow"})},t.showDebugInfo=function(e){Studio.queueCmd(null,"showDebugInfo",{value:e})},t.vanish=function(e){Studio.queueCmd(null,"vanish",{spriteIndex:e})},t.onEvent=function(e,t){Studio.queueCmd(null,"onEvent",{eventName:e,func:t})}},2104:(e,t,i)=>{"use strict";var o=c(i(53)),n=c(i(13)),a=c(i(1490)),r=c(i(1677)),s=c(i(1625)),l=i(678),u=i(33),d=i(1211);function c(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){f(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var g=a.default,_=[[n.default.random(),d.RANDOM_VALUE],[n.default.topLeft(),d.Position.TOPLEFT.toString()],[n.default.topCenter(),d.Position.TOPCENTER.toString()],[n.default.topRight(),d.Position.TOPRIGHT.toString()],[n.default.middleLeft(),d.Position.MIDDLELEFT.toString()],[n.default.middleCenter(),d.Position.MIDDLECENTER.toString()],[n.default.middleRight(),d.Position.MIDDLERIGHT.toString()],[n.default.bottomLeft(),d.Position.BOTTOMLEFT.toString()],[n.default.bottomCenter(),d.Position.BOTTOMCENTER.toString()],[n.default.bottomRight(),d.Position.BOTTOMRIGHT.toString()]],y=function(e){var t=e.value||e.ctx.getFieldValue("VALUE");t===d.RANDOM_VALUE&&(t="Studio.random(["+(0,o.default)(e.ctx.VALUES).map((function(e){return e[1]})).without(d.RANDOM_VALUE,d.HIDDEN_VALUE,d.CLICK_VALUE)+"])");return e.returnValue?t:"Studio."+e.name+"('block_id_"+e.ctx.id+"', "+(e.extraParams?e.extraParams+", ":"")+t+");\n"},b=6,v=!1,k=[],T=null;function E(e){var t=o.default.range(0,b);return o.default.map(t,(function(t){return[e({spriteIndex:t+1}),t.toString()]}))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SPRITE",i=Blockly.JavaScript.valueToCode(e,t,Blockly.JavaScript.ORDER_NONE)||"1";return i+"-1"}t.setSpriteCount=function(e,t){b=t},t.enableProjectileCollisions=function(e){v=!0},t.setStartAvatars=function(e){k=e.slice(0)},t.registerCustomGameLogic=function(e){T=e},t.install=function(e,t){var i=t.skin,a=t.isK1,c=e.getGenerator();function m(t){return new e.FieldDropdown(E(t))}function h(){var t=o.default.range(0,b),n=o.default.map(t,(function(e){var t=k[e];return[i[t].dropdownThumbnail,e.toString()]}));return new e.FieldImageDropdown(n,i.dropdownThumbnailWidth,i.dropdownThumbnailHeight)}function f(i){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o?b>1?t.isK1?i.appendDummyInput().appendField(h(),"SPRITE"):i.appendDummyInput().appendField(m(g.ifSpriteN),"SPRITE"):i.appendDummyInput().appendField(g.ifSprite()):i.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.ifSpriteN({spriteIndex:""}))}function w(e,t,i){var o="studio_".concat(e),n="studio_".concat(e,"Params");Blockly.Blocks[o]={init:function(){t.call(this,!0)}},Blockly.Blocks[n]={init:function(){t.call(this,!1)}},c[o]=function(){return i.call(this,!0)},c[n]=function(){return i.call(this,!1)}}e.JavaScript=c,g=S(S({},g),i.msgOverrides),i.activityChoices=(0,u.valueOr)(i.activityChoices,[]),i.avatarList=(0,u.valueOr)(i.avatarList,[]),i.backgroundChoices=(0,u.valueOr)(i.backgroundChoices,[]),i.itemChoices=(0,u.valueOr)(i.itemChoices,[]),i.mapChoices=(0,u.valueOr)(i.mapChoices,[]),i.projectileChoices=(0,u.valueOr)(i.projectileChoices,[]),i.sounds=(0,u.valueOr)(i.sounds,[]),i.soundChoices=(0,u.valueOr)(i.soundChoices,[]),i.soundChoicesK1=(0,u.valueOr)(i.soundChoicesK1,[]),i.spriteChoices=(0,u.valueOr)(i.spriteChoices,[]),k=i.avatarList.slice(0),c.studio_eventHandlerPrologue=function(){return"\n"},function(e,t,i,o,n){e.Blocks.studio_vanish={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),n.isK1?this.appendDummyInput().appendField(g.vanish()).appendField(new e.FieldImage(n.skin.explosionThumbnail)).appendField(o(),"SPRITE"):this.appendDummyInput().appendField(i(g.vanishActorN),"SPRITE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.vanishTooltip())}},t.studio_vanish=function(){var e=this.getFieldValue("SPRITE");return"Studio.vanish('block_id_"+this.id+"', "+e+");\n"}}(e,c,m,h,t),function(e,t,i,o,a,r,s){function l(e,t,i){s(e,(function(e){t.call(this,e,!1)}),(function(e){return i.call(this,e,!1)})),s(e+"Else",(function(e){t.call(this,e,!0)}),(function(e){return i.call(this,e,!0)}))}var u=[[g.getActorHasEmotionNormal(),d.Emotions.NORMAL.toString()],[g.getActorHasEmotionHappy(),d.Emotions.HAPPY.toString()],[g.getActorHasEmotionAngry(),d.Emotions.ANGRY.toString()],[g.getActorHasEmotionSad(),d.Emotions.SAD.toString()]],c=[[a.skin.emotionNormal,d.Emotions.NORMAL.toString()],[a.skin.emotionHappy,d.Emotions.HAPPY.toString()],[a.skin.emotionAngry,d.Emotions.ANGRY.toString()],[a.skin.emotionSad,d.Emotions.SAD.toString()]];l("ifActorHasEmotion",(function(t,i){if(Blockly.cdoUtils.setHSV(this,196,1,.79),this.appendDummyInput().appendField(n.default.ifCode()),r(this,t),a.isK1){var o=new e.FieldImageDropdown(c,34,34);o.setValue(c[0][1]),this.appendDummyInput().appendField(g.emotion()).appendField(o,"EMOTION")}else{var s=new e.FieldDropdown(u);s.setValue(u[1][1]),this.appendDummyInput().appendField(s,"EMOTION")}this.appendStatementInput("DO"),i&&this.appendStatementInput("ELSE").appendField(g.elseCode()),this.setTooltip(Blockly.Msg.CONTROLS_IF_IF_TOOLTIP),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!0)}),(function(e,i){var o=e?this.getFieldValue("SPRITE")||0:A(this),n=this.getFieldValue("EMOTION"),a=t.statementToCode(this,"DO"),r="function (emotion) {\n  if (emotion === ".concat(n,") {\n  ").concat(a,"  }\n}");if(i){var s=t.statementToCode(this,"ELSE");r="function (emotion) {\n  if (emotion === ".concat(n,") {\n  ").concat(a,"  } else {\n ").concat(s," }\n}")}return"Studio.getSpriteEmotion('block_id_".concat(this.id,"', ").concat(o,", ").concat(r,");")}));var p=[[g.getActorXPosition(),"x"],[g.getActorYPosition(),"y"]];l("ifActorPosition",(function(t,i){var o=Blockly.RTL?[["=","EQ"],["≠","NEQ"],[">","LT"],["≥","LTE"],["<","GT"],["≤","GTE"]]:[["=","EQ"],["≠","NEQ"],["<","LT"],["≤","LTE"],[">","GT"],["≥","GTE"]];Blockly.cdoUtils.setHSV(this,196,1,.79),this.appendDummyInput().appendField(n.default.ifCode()),r(this,t),this.appendDummyInput().appendField(" ");var a=new e.FieldDropdown(p);a.setValue(p[0][1]),this.appendDummyInput().appendField(a,"POSITION");var s=new Blockly.FieldDropdown(o);this.appendDummyInput().appendField(s,"OPERATOR"),this.appendValueInput("COMPARED_VALUE"),this.appendStatementInput("DO"),i&&this.appendStatementInput("ELSE").appendField(g.elseCode()),this.setTooltip(Blockly.Msg.CONTROLS_IF_IF_TOOLTIP),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!0)}),(function(e,i){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="},n=e?this.getFieldValue("SPRITE")||0:A(this),a=this.getFieldValue("POSITION"),r=this.getFieldValue("OPERATOR"),s="EQ"===r||"NEQ"===r?Blockly.JavaScript.ORDER_EQUALITY:Blockly.JavaScript.ORDER_RELATIONAL,l=Blockly.JavaScript.valueToCode(this,"COMPARED_VALUE",s)||"0",u=t.statementToCode(this,"DO"),d="".concat(a," ").concat(o[r]," ").concat(l),c="function (x, y) {\n  if (".concat(d,") {\n  ").concat(u,"  }\n}");if(i){var p=t.statementToCode(this,"ELSE");c="function (x, y) {\n  if (".concat(d,") {\n  ").concat(u,"  } else {\n ").concat(p," }\n}")}return"Studio.getSpriteXY('block_id_".concat(this.id,"', ").concat(n,", ").concat(c,");")}));var m=[[g.getActorHidden(),"false"],[g.getActorVisible(),"true"]];l("ifActorIsVisible",(function(t,i){Blockly.cdoUtils.setHSV(this,196,1,.79),this.appendDummyInput().appendField(n.default.ifCode()),r(this,t);var o=new e.FieldDropdown(m);o.setValue(m[0][1]),this.appendDummyInput().appendField(o,"VISIBILITY"),this.appendStatementInput("DO"),i&&this.appendStatementInput("ELSE").appendField(g.elseCode()),this.setTooltip(Blockly.Msg.CONTROLS_IF_IF_TOOLTIP),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!0)}),(function(e,i){var o=e?this.getFieldValue("SPRITE")||0:A(this),n=this.getFieldValue("VISIBILITY"),a=t.statementToCode(this,"DO"),r="function (visibility) {\n  if (visibility === ".concat(n,") {\n  ").concat(a,"  }\n}");if(i){var s=t.statementToCode(this,"ELSE");r="function (visibility) {\n  if (visibility === ".concat(n,") {\n  ").concat(a,"  } else {\n ").concat(s," }\n}")}return"Studio.getSpriteVisibility('block_id_".concat(this.id,"', ").concat(o,", ").concat(r,");")}));var h=a.skin.spriteChoices.filter((function(e){return e[1]!==d.RANDOM_VALUE})).map((function(e){return[g.isSet()+" "+e[0],e[1]]}));l("ifActorIsSprite",(function(t,i){Blockly.cdoUtils.setHSV(this,196,1,.79),this.appendDummyInput().appendField(n.default.ifCode()),r(this,t);var o=new e.FieldDropdown(h);o.setValue(h[0][1]),this.appendDummyInput().appendField(o,"VALUE"),this.appendStatementInput("DO"),i&&this.appendStatementInput("ELSE").appendField(g.elseCode()),this.setTooltip(Blockly.Msg.CONTROLS_IF_IF_TOOLTIP),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!0)}),(function(e,i){var o=e?this.getFieldValue("SPRITE")||0:A(this),n=this.getFieldValue("VALUE"),a=t.statementToCode(this,"DO"),r="function (value) {\n  if (value === ".concat(n,") {\n  ").concat(a,"  }\n}");if(i){var s=t.statementToCode(this,"ELSE");r="function (value) {\n  if (value === ".concat(n,") {\n  ").concat(a,"  } else {\n ").concat(s," }\n}")}return"Studio.getSpriteValue('block_id_".concat(this.id,"', ").concat(o,", ").concat(r,");")}))}(e,c,0,0,t,f,w),c.studio_eventHandlerPrologue=function(){return"\n"},e.Blocks.studio_whenLeft={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),a?this.appendDummyInput().appendField(n.default.when()).appendField(new Blockly.FieldImage(i.whenLeft)):this.appendDummyInput().appendField(g.whenLeft()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenLeftTooltip())}},c.studio_whenLeft=c.studio_eventHandlerPrologue,e.Blocks.studio_whenRight={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),a?this.appendDummyInput().appendField(n.default.when()).appendField(new Blockly.FieldImage(i.whenRight)):this.appendDummyInput().appendField(g.whenRight()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenRightTooltip())}},c.studio_whenRight=c.studio_eventHandlerPrologue,e.Blocks.studio_whenUp={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),a?this.appendDummyInput().appendField(n.default.when()).appendField(new Blockly.FieldImage(i.whenUp)):this.appendDummyInput().appendField(g.whenUp()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenUpTooltip())}},c.studio_whenUp=c.studio_eventHandlerPrologue,e.Blocks.studio_whenDown={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),a?this.appendDummyInput().appendField(n.default.when()).appendField(new Blockly.FieldImage(i.whenDown)):this.appendDummyInput().appendField(g.whenDown()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenDownTooltip())}},c.studio_whenDown=c.studio_eventHandlerPrologue,e.Blocks.studio_whenArrow={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),this.appendDummyInput().appendField(n.default.when()),a?this.appendDummyInput().appendField(new e.FieldImageDropdown(this.K1_VALUES),"VALUE"):this.appendDummyInput().appendField(new e.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenArrowTooltip())}},e.Blocks.studio_whenArrow.K1_VALUES=[[i.whenUp,"up"],[i.whenRight,"right"],[i.whenDown,"down"],[i.whenLeft,"left"]],e.Blocks.studio_whenArrow.VALUES=[[g.whenArrowUp(),"up"],[g.whenArrowDown(),"down"],[g.whenArrowLeft(),"left"],[g.whenArrowRight(),"right"]],c.studio_whenArrow=c.studio_eventHandlerPrologue,e.Blocks.studio_repeatForever={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,322,.9,.95),a?(this.appendDummyInput().appendField(n.default.repeat()),this.appendStatementInput("DO").appendField(new e.FieldImage(i.repeatImage))):(this.appendDummyInput().appendField(g.repeatForever()),this.appendStatementInput("DO").appendField(g.repeatDo())),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setTooltip(g.repeatForeverTooltip())}},c.studio_repeatForever=function(){var e=Blockly.JavaScript.statementToCode(this,"DO");return c.studio_eventHandlerPrologue()+e},e.Blocks.studio_whenSpriteClicked={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),b>1?a?this.appendDummyInput().appendField(n.default.when()).appendField(new e.FieldImage(i.clickIcon)).appendField(h(),"SPRITE"):this.appendDummyInput().appendField(m(g.whenSpriteClickedN),"SPRITE"):a?this.appendDummyInput().appendField(n.default.when()).appendField(new e.FieldImage(i.clickIcon)).appendField(new e.FieldImage(i[k[0]].dropdownThumbnail,i.dropdownThumbnailWidth,i.dropdownThumbnailHeight)):this.appendDummyInput().appendField(g.whenSpriteClicked()),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenSpriteClickedTooltip())}},c.studio_whenSpriteClicked=c.studio_eventHandlerPrologue,e.Blocks.studio_whenTouchCharacter={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),this.appendDummyInput().appendField(g.whenTouchCharacter()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenTouchCharacterTooltip())}},c.studio_whenTouchCharacter=c.studio_eventHandlerPrologue,e.Blocks.studio_whenTouchObstacle={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),this.appendDummyInput().appendField(g.whenTouchObstacle()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenTouchObstacleTooltip())}},c.studio_whenTouchObstacle=c.studio_eventHandlerPrologue,e.Blocks.studio_whenTouchGoal={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),this.appendDummyInput().appendField(g.whenTouchGoal()),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenTouchGoalTooltip())}},c.studio_whenTouchGoal=c.studio_eventHandlerPrologue,e.Blocks.studio_whenGetCharacter={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenGetCharacterTooltip())}},e.Blocks.studio_whenGetCharacter.VALUES=[[g.whenGetCharacterAnyItem(),"any_item"],[g.whenGetCharacterPufferPig(),"pufferpig"],[g.whenGetCharacterStormtrooper(),"stormtrooper"],[g.whenGetCharacterTauntaun(),"tauntaun"],[g.whenGetCharacterMynock(),"mynock"],[g.whenGetCharacterProbot(),"probot"],[g.whenGetCharacterMouseDroid(),"mousedroid"],[g.whenGetCharacterRebelPilot(),"rebelpilot"]],c.studio_whenGetCharacter=c.studio_eventHandlerPrologue,e.Blocks.studio_whenGetAllCharacters={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),this.appendDummyInput().appendField(g.whenGetAllCharacters()),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenGetAllCharactersTooltip())}},c.studio_whenGetAllCharacters=c.studio_eventHandlerPrologue,e.Blocks.studio_whenGetAllCharacterClass={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenGetAllCharacterClassTooltip())}},e.Blocks.studio_whenGetAllCharacterClass.VALUES=[[g.whenGetAllCharacterPufferPig(),"pufferpig"],[g.whenGetAllCharacterStormtrooper(),"stormtrooper"],[g.whenGetAllCharacterTauntaun(),"tauntaun"],[g.whenGetAllCharacterMynock(),"mynock"],[g.whenGetAllCharacterProbot(),"probot"],[g.whenGetAllCharacterMouseDroid(),"mousedroid"],[g.whenGetAllCharacterRebelPilot(),"rebelpilot"]],c.studio_whenGetAllCharacterClass=c.studio_eventHandlerPrologue,e.Blocks.studio_whenSpriteCollided={helpUrl:"",init:function(){var t,o;if(Blockly.cdoUtils.setHSV(this,140,1,.74),a)t=h(),o=h(),this.appendDummyInput().appendField(n.default.when()).appendField(new e.FieldImage(i.collide)).appendField(t,"SPRITE1"),this.appendDummyInput().appendField(n.default.and()).appendField(o,"SPRITE2");else{t=m(g.whenSpriteCollidedN);var r=[this.GROUPINGS[0]];(r=r.concat(E(g.whenSpriteCollidedWithN))).unshift(this.GROUPINGS[1]),v&&(r=(r=r.concat([this.GROUPINGS[2]])).concat(this.PROJECTILES)),r=(r=r.concat(this.GROUPINGS.slice(3,6))).concat(this.EDGES),o=new e.FieldDropdown(r),this.appendDummyInput().appendField(t,"SPRITE1"),this.appendDummyInput().appendField(o,"SPRITE2")}b>1&&o.setValue("1"),this.setPreviousStatement(!1),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.whenSpriteCollidedTooltip())}},e.Blocks.studio_whenSpriteCollided.GROUPINGS=[[g.whenSpriteCollidedWithAnything(),"anything"],[g.whenSpriteCollidedWithAnyActor(),"any_actor"],[g.whenSpriteCollidedWithAnyProjectile(),"any_projectile"],[g.whenSpriteCollidedWithAnyGoal(),"goal"],[g.whenSpriteCollidedWithAnyObstacle(),"wall"],[g.whenSpriteCollidedWithAnyEdge(),"any_edge"]],e.Blocks.studio_whenSpriteCollided.PROJECTILES=i.whenProjectileCollidedChoices,e.Blocks.studio_whenSpriteCollided.EDGES=[[g.whenSpriteCollidedWithTopEdge(),"top"],[g.whenSpriteCollidedWithLeftEdge(),"left"],[g.whenSpriteCollidedWithBottomEdge(),"bottom"],[g.whenSpriteCollidedWithRightEdge(),"right"]],c.studio_whenSpriteCollided=c.studio_eventHandlerPrologue,e.Blocks.studio_allowSpritesOutsidePlayspace={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown([[g.allowActorsToLeaveThePlayspace(),"true"],[g.dontAllowActorsToLeaveThePlayspace(),"false"]]),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.allowActorsOutsidePlayspaceTooltip())}},c.studio_allowSpritesOutsidePlayspace=function(){var e="true"===this.getFieldValue("VALUE");return"Studio.setAllowSpritesOutsidePlayspace('block_id_".concat(this.id,"',\n        ").concat(e,");\n")},e.Blocks.studio_stop={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),b>1?this.appendDummyInput().appendField(m(g.stopSpriteN),"SPRITE"):this.appendDummyInput().appendField(g.stopSprite()),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.stopTooltip())}},e.Blocks.studio_stopSprite={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.stopSpriteN({spriteIndex:""})),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.stopTooltip())}},c.studio_stop=function(){return"Studio.stop('block_id_"+this.id+"', "+(this.getFieldValue("SPRITE")||"0")+");\n"},c.studio_stopSprite=function(){var e=A(this);return"Studio.stop('block_id_"+this.id+"', "+e+");\n"},e.Blocks.studio_addCharacter={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(g.addCharacter()),this.appendDummyInput().appendField(new e.FieldDropdown(i.itemChoices),"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.addCharacterTooltip())}},c.studio_addCharacter=function(){var e=i.itemChoices.slice(0,-1).map((function(e){return e[1]})),t=this.getFieldValue("VALUE");return"random"===t&&(t="Studio.random(["+e+"])"),"Studio.addCharacter('block_id_"+this.id+"', "+t+");\n"},e.Blocks.studio_setItemActivity={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown(i.activityChoices),"TYPE"),this.appendDummyInput().appendField(new e.FieldDropdown(i.itemChoices),"VALUE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.setActivityTooltip())}},c.studio_setItemActivity=function(){var e=i.itemChoices.slice(0,-1).map((function(e){return e[1]})),t=this.getFieldValue("VALUE");"random"===t&&(t="Studio.random(["+e+"])");var o=i.activityChoices.slice(0,-1).map((function(e){return e[1]})),n=this.getFieldValue("TYPE");return"random"===n&&(n="Studio.random(["+o+"])"),"Studio.setItemActivity('block_id_"+this.id+"', "+t+", "+n+");\n"},e.Blocks.studio_setItemSpeed={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(g.setItemSpeedSet()),this.appendDummyInput().appendField(new e.FieldDropdown(i.itemChoices),"CLASS");var t=new e.FieldDropdown(this.VALUES);t.setValue(this.VALUES[1][1]),this.appendDummyInput().appendField(t,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setItemSpeedTooltip())}},e.Blocks.studio_setItemSpeed.VALUES=[[g.setSpriteSpeedRandom(),d.RANDOM_VALUE],[g.setSpriteSpeedSlow(),'"slow"'],[g.setSpriteSpeedNormal(),'"normal"'],[g.setSpriteSpeedFast(),'"fast"']],c.studio_setItemSpeed=function(){return y({ctx:this,extraParams:this.getFieldValue("CLASS"),name:"setItemSpeed"})},w("throw",(function(t){Blockly.cdoUtils.setHSV(this,184,1,.74),f(this,t),this.appendDummyInput().appendField(g.throwSprite()),this.appendDummyInput().appendField(new e.FieldDropdown(i.projectileChoices),"VALUE"),this.appendDummyInput().appendField("\t"),this.appendDummyInput().appendField(new e.FieldDropdown(e.Blocks.studio_throw.DIR),"DIR"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.throwTooltip())}),(function(t){var o=e.Blocks.studio_throw.DIR.slice(0,-1).map((function(e){return e[1]})),n=this.getFieldValue("DIR");"random"===n&&(n="Studio.random(["+o+"])");var a=i.projectileChoices.slice(0,-1).map((function(e){return e[1]})),r=this.getFieldValue("VALUE");return"random"===r&&(r="Studio.random(["+a+"])"),"Studio.throwProjectile('block_id_"+this.id+"', "+function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"SPRITE";return t?e.getFieldValue(i)||0:A(e,i)}(this,t)+", "+n+", "+r+");\n"})),e.Blocks.studio_throw.DIR=[[g.moveDirectionUp(),d.Direction.NORTH.toString()],[g.moveDirectionDown(),d.Direction.SOUTH.toString()],[g.moveDirectionLeft(),d.Direction.WEST.toString()],[g.moveDirectionRight(),d.Direction.EAST.toString()],[g.moveDirectionRandom(),"random"]],e.Blocks.studio_makeProjectile={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown(this.VALUES),"VALUE"),this.appendDummyInput().appendField("\t"),this.appendDummyInput().appendField(new e.FieldDropdown(this.ACTIONS),"ACTION"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.makeProjectileTooltip())}},e.Blocks.studio_makeProjectile.VALUES=i.makeProjectileChoices,e.Blocks.studio_makeProjectile.ACTIONS=[[g.makeProjectileBounce(),'"bounce"'],[g.makeProjectileDisappear(),'"disappear"']],c.studio_makeProjectile=function(){return"Studio.makeProjectile('block_id_"+this.id+"', "+this.getFieldValue("VALUE")+", "+this.getFieldValue("ACTION")+");\n"},e.Blocks.studio_setSpritePosition={helpUrl:"",init:function(){var t=this,i=new e.FieldDropdown(this.VALUES),o=new e.FieldDropdown(E((function(e){return e.spriteIndex.toString()})));i.setValue(this.VALUES[1][1]),Blockly.cdoUtils.setHSV(this,184,1,.74),b>1?this.interpolateMsg(g.setSpritePosition(),(function(){t.appendDummyInput().appendField(o,"SPRITE")}),(function(){t.appendDummyInput().appendField(i,"VALUE")}),e.ALIGN_RIGHT):this.interpolateMsg(g.setPosition(),(function(){t.appendDummyInput().appendField(i,"VALUE")}),e.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritePositionTooltip())}},e.Blocks.studio_setSpritePosition.VALUES=_,c.studio_setSpritePosition=function(){return y({ctx:this,extraParams:this.getFieldValue("SPRITE")||"0",name:"setSpritePosition"})},e.Blocks.studio_setSpritePositionParams={helpUrl:"",init:function(){var t=this,i=new e.FieldDropdown(_);i.setValue(_[1][1]),Blockly.cdoUtils.setHSV(this,184,1,.74),this.interpolateMsg(g.setSpritePosition(),(function(){t.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER)}),(function(){t.appendDummyInput().appendField(i,"VALUE")}),e.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritePositionTooltip())}},c.studio_setSpritePositionParams=function(){return y({ctx:this,extraParams:A(this)||"0",name:"setSpritePosition"})},e.Blocks.studio_setSpriteXY={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),b>1?this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.moveSpriteN({spriteIndex:""})):this.appendDummyInput().appendField(g.setSprite()),this.appendDummyInput().appendField(g.to()),this.appendValueInput("XPOS").setCheck(e.BlockValueType.NUMBER),this.appendDummyInput().appendField(n.default.positionAbsoluteOver()),this.appendValueInput("YPOS").setCheck(e.BlockValueType.NUMBER),this.appendDummyInput().appendField(n.default.positionAbsoluteDown()),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0)}},c.studio_setSpriteXY=function(){var e=A(this),t=Blockly.JavaScript.valueToCode(this,"XPOS",Blockly.JavaScript.ORDER_NONE)||"0",i=Blockly.JavaScript.valueToCode(this,"YPOS",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.setSpriteXY('block_id_"+this.id+"', "+e+", "+t+", "+i+");\n"},e.Blocks.studio_addGoal={helpUrl:"",init:function(){var t=this,i=new e.FieldDropdown(this.VALUES);i.setValue(this.VALUES[1][1]),Blockly.cdoUtils.setHSV(this,184,1,.74),this.interpolateMsg(g.addGoalPosition(),(function(){t.appendDummyInput().appendField(i,"VALUE")}),e.ALIGN_RIGHT),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.addGoalTooltip())}},e.Blocks.studio_addGoal.VALUES=_,c.studio_addGoal=function(){var e=this.getFieldValue("VALUE");e===d.RANDOM_VALUE&&(e="Studio.random(["+(0,o.default)(this.VALUES).map((function(e){return e[1]})).without(d.RANDOM_VALUE,d.HIDDEN_VALUE,d.CLICK_VALUE)+"])");return"Studio.addGoal('block_id_"+this.id+"', "+e+");\n"},e.Blocks.studio_addGoalXY={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(g.addGoal()),this.appendDummyInput().appendField(g.to()),this.appendValueInput("XPOS").setCheck(e.BlockValueType.NUMBER),this.appendDummyInput().appendField(n.default.positionAbsoluteOver()),this.appendValueInput("YPOS").setCheck(e.BlockValueType.NUMBER),this.appendDummyInput().appendField(n.default.positionAbsoluteDown()),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.addGoalTooltip())}},c.studio_addGoalXY=function(){var e=Blockly.JavaScript.valueToCode(this,"XPOS",Blockly.JavaScript.ORDER_NONE)||"0",t=Blockly.JavaScript.valueToCode(this,"YPOS",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.addGoalXY('block_id_"+this.id+"', "+e+", "+t+");\n"};var I={DIRECTION_CONFIGS:{West:{letter:n.default.directionWestLetter(),image:i.leftArrow,studioValue:d.Direction.WEST,tooltip:g.moveLeftTooltip()},East:{letter:n.default.directionEastLetter(),image:i.rightArrow,studioValue:d.Direction.EAST,tooltip:g.moveRightTooltip()},North:{letter:n.default.directionNorthLetter(),image:i.upArrow,studioValue:d.Direction.NORTH,tooltip:g.moveUpTooltip()},South:{letter:n.default.directionSouthLetter(),image:i.downArrow,studioValue:d.Direction.SOUTH,tooltip:g.moveDownTooltip()},Northwest:{letter:n.default.directionNorthwestLetter(),image:i.upLeftArrow,studioValue:d.Direction.NORTHWEST,tooltip:g.moveUpLeftTooltip()},Northeast:{letter:n.default.directionNortheastLetter(),image:i.upRightArrow,studioValue:d.Direction.NORTHEAST,tooltip:g.moveUpRightTooltip()},Southwest:{letter:n.default.directionSouthwestLetter(),image:i.downLeftArrow,studioValue:d.Direction.SOUTHWEST,tooltip:g.moveDownLeftTooltip()},Southeast:{letter:n.default.directionSoutheastLetter(),image:i.downRightArrow,studioValue:d.Direction.SOUTHEAST,tooltip:g.moveDownRightTooltip()}},DISTANCES:[[i.shortLine,"25"],[i.longLine,"400"]],DEFAULT_MOVE_DISTANCE:"100",generateBlocksForAllDirections:function(){Object.keys(I.DIRECTION_CONFIGS).forEach((function(e){I.generateBlocksForDirection(e)}))},generateBlocksForDirection:function(t){c["studio_move"+t]=I.generateCodeGenerator(t,!0),e.Blocks["studio_move"+t]=I.generateMoveBlock(t,!1),c["studio_move"+t+"Distance"]=I.generateCodeGenerator(t,!1),e.Blocks["studio_move"+t+"Distance"]=I.generateMoveBlock(t,!1),c["studio_move"+t+"_length"]=I.generateCodeGenerator(t,!1),e.Blocks["studio_move"+t+"_length"]=I.generateMoveBlock(t,!0)},generateMoveBlock:function(t,i){var o=I.DIRECTION_CONFIGS[t];return{helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(g.moveSprite()).appendField(new e.FieldImage(o.image)).appendField(o.letter),b>1&&this.appendDummyInput().appendField(h(),"SPRITE"),i&&this.appendDummyInput().appendField(new e.FieldImageDropdown(I.DISTANCES),"DISTANCE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(o.tooltip)}}},generateCodeGenerator:function(e,t){var i=I.DIRECTION_CONFIGS[e];return function(){var e=this.getFieldValue("SPRITE")||"0",o=i.studioValue.toString(),n=t?"move":"moveDistance",a=d.CardinalDirections.includes(i.studioValue)?I.DEFAULT_MOVE_DISTANCE:I.DEFAULT_MOVE_DISTANCE*Math.sqrt(2),r=this.getFieldValue("DISTANCE")||a;return"Studio."+n+"('block_id_"+this.id+"', "+e+", "+o+(t?"":", "+r)+");\n"}}};I.generateBlocksForAllDirections(),e.Blocks.studio_move={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),b>1?(a?this.appendDummyInput().appendField(g.moveSprite()).appendField(h(),"SPRITE"):this.appendDummyInput().appendField(m(g.moveSpriteN),"SPRITE"),this.appendDummyInput().appendField("\t")):this.appendDummyInput().appendField(g.moveSprite()),a?this.appendDummyInput().appendField(new e.FieldImageDropdown(this.K1_DIR),"DIR"):this.appendDummyInput().appendField(new e.FieldDropdown(this.DIR),"DIR"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.moveTooltip())}},e.Blocks.studio_move.K1_DIR=[[i.upArrow,d.Direction.NORTH.toString()],[i.rightArrow,d.Direction.EAST.toString()],[i.downArrow,d.Direction.SOUTH.toString()],[i.leftArrow,d.Direction.WEST.toString()]],e.Blocks.studio_move.DIR=[[g.moveDirectionUp(),d.Direction.NORTH.toString()],[g.moveDirectionDown(),d.Direction.SOUTH.toString()],[g.moveDirectionLeft(),d.Direction.WEST.toString()],[g.moveDirectionRight(),d.Direction.EAST.toString()]],c.studio_move=function(){return"Studio.move('block_id_"+this.id+"', "+(this.getFieldValue("SPRITE")||"0")+", "+this.getFieldValue("DIR")+");\n"};var C=function(t){var o={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),t.sprite?this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.moveSpriteN({spriteIndex:""})):b>1?(a?this.appendDummyInput().appendField(g.moveSprite()).appendField(h(),"SPRITE"):this.appendDummyInput().appendField(m(g.moveSpriteN),"SPRITE"),this.appendDummyInput().appendField("\t")):this.appendDummyInput().appendField(g.moveSprite()),a?this.appendDummyInput().appendField(new e.FieldImageDropdown(this.K1_DIR),"DIR"):this.appendDummyInput().appendField(new e.FieldDropdown(this.DIR),"DIR"),this.appendDummyInput().appendField("\t"),t.params?(this.appendValueInput("DISTANCE").setCheck(e.BlockValueType.NUMBER),this.appendDummyInput().appendField(g.moveDistancePixels())):a?this.appendDummyInput().appendField(new e.FieldImageDropdown(this.K1_DISTANCE),"DISTANCE"):this.appendDummyInput().appendField(new e.FieldDropdown(this.DISTANCE),"DISTANCE"),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.moveDistanceTooltip())}};return o.K1_DIR=[[i.upArrow,d.Direction.NORTH.toString()],[i.rightArrow,d.Direction.EAST.toString()],[i.downArrow,d.Direction.SOUTH.toString()],[i.leftArrow,d.Direction.WEST.toString()]],o.DIR=[[g.moveDirectionUp(),d.Direction.NORTH.toString()],[g.moveDirectionDown(),d.Direction.SOUTH.toString()],[g.moveDirectionLeft(),d.Direction.WEST.toString()],[g.moveDirectionRight(),d.Direction.EAST.toString()],[g.moveDirectionRandom(),"random"]],t.params||(o.DISTANCE=[[g.moveDistance25(),"25"],[g.moveDistance50(),"50"],[g.moveDistance100(),"100"],[g.moveDistance200(),"200"],[g.moveDistance400(),"400"],[g.moveDistanceRandom(),"random"]],o.K1_DISTANCE=[[i.shortLine,"25"],[i.longLine,"400"]]),o};function x(e){var t=(0,u.stripQuotes)(e).toLowerCase().trim();if(t!==d.RANDOM_VALUE){var n=(0,u.valueOr)(i.soundMetadata,[]),a=Object.assign({volume:1},o.default.find(n,(function(e){return e.name.toLowerCase().trim()===t})));(0,l.singleton)().playAudio(t,a)}}function R(t,o){var n=i.spriteChoices.filter((function(e){return e[1]!==d.HIDDEN_VALUE&&e[1]!==d.RANDOM_VALUE})).map((function(e){var i=(0,u.stripQuotes)(e[1]);return[t({spriteName:"".concat(g[i]())}),e[1]]})),a=new e.FieldDropdown(n,o,!0);return a.setValue(n[0][1]),a}e.Blocks.studio_moveDistance=C({}),e.Blocks.studio_moveDistanceParams=C({params:!0}),e.Blocks.studio_moveDistanceParamsSprite=C({params:!0,sprite:!0}),c.studio_moveDistance=function(){var e=this.DISTANCE.slice(0,-1).map((function(e){return e[1]})),t=this.getFieldValue("DISTANCE");"random"===t&&(t="Studio.random(["+e+"])");var i=this.DIR.slice(0,-1).map((function(e){return e[1]})),o=this.getFieldValue("DIR");return"random"===o&&(o="Studio.random(["+i+"])"),"Studio.moveDistance('block_id_"+this.id+"', "+(this.getFieldValue("SPRITE")||"0")+", "+o+", "+t+");\n"},c.studio_moveDistanceParams=function(){var e=this.DIR.slice(0,-1).map((function(e){return e[1]})),t=this.getFieldValue("DIR");"random"===t&&(t="Studio.random(["+e+"])");var i=Blockly.JavaScript.valueToCode(this,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.moveDistance('block_id_"+this.id+"', "+(this.getFieldValue("SPRITE")||"0")+", "+t+", "+i+");\n"},c.studio_moveDistanceParamsSprite=function(){var e=A(this),t=this.DIR.slice(0,-1).map((function(e){return e[1]})),i=this.getFieldValue("DIR");"random"===i&&(i="Studio.random(["+t+"])");var o=Blockly.JavaScript.valueToCode(this,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.moveDistance('block_id_"+this.id+"', "+e+", "+i+", "+o+");\n"},e.Blocks.studio_moveOrientation={helpUrl:"http://code.google.com/p/blockly/wiki/Move",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown(this.DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.moveTooltip())}},e.Blocks.studio_moveOrientation.DIRECTIONS=[[g.moveForward(),"moveForward"],[g.moveBackward(),"moveBackward"]],c.studio_moveOrientation=function(){return"Studio."+this.getFieldValue("DIR")+"('block_id_"+this.id+"');\n"},e.Blocks.studio_turnOrientation={helpUrl:"http://code.google.com/p/blockly/wiki/Turn",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown(this.DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.turnTooltip())}},e.Blocks.studio_turnOrientation.DIRECTIONS=[[g.turnLeft()+" ↺","turnLeft"],[g.turnRight()+" ↻","turnRight"]],c.studio_turnOrientation=function(){return"Studio."+this.getFieldValue("DIR")+"('block_id_"+this.id+"');\n"},e.Blocks.studio_playSound={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),a?this.appendDummyInput().appendField(n.default.play()).appendField(new e.FieldImage(i.soundIcon)).appendField(new e.FieldDropdown(this.soundChoices(),x),"SOUND"):this.appendDummyInput().appendField(new e.FieldDropdown(this.soundChoices(),x),"SOUND"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.playSoundTooltip())}},e.Blocks.studio_playSound.soundChoices=function(){var e=a?i.soundChoicesK1:i.soundChoices,t=r.default.getPlaySoundValues(!0);return e.filter((function(e){for(var i=0;i<t.length;i++)if(e[1]===t[i])return!0;return!1}))},c.studio_playSound=function(){return"Studio.playSound('block_id_"+this.id+"', '"+this.getFieldValue("SOUND")+"');\n"},e.Blocks.studio_changeScore={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),a?this.appendDummyInput().appendField(n.default.score()).appendField(new e.FieldImage(i.scoreCard)):this.appendDummyInput().appendField(new e.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(a?g.changeScoreTooltipK1():g.changeScoreTooltip())}},e.Blocks.studio_changeScore.VALUES=[[g.incrementPlayerScore(),"1"],[g.decrementPlayerScore(),"-1"]],c.studio_changeScore=function(){return"Studio.changeScore('block_id_"+this.id+"', '"+(this.getFieldValue("VALUE")||"1")+"');\n"},e.Blocks.studio_addPoints={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.addPointsTooltip())}},e.Blocks.studio_addPoints.VALUES=[[g.addPoints10(),"10"],[g.addPoints50(),"50"],[g.addPoints100(),"100"],[g.addPoints300(),"300"],[g.addPoints1000(),"1000"]],c.studio_addPoints=function(){return"Studio.addPoints('block_id_"+this.id+"', '"+(this.getFieldValue("VALUE")||"1")+"');\n"},e.Blocks.studio_removePoints={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(new e.FieldDropdown(this.VALUES),"VALUE"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.removePointsTooltip())}},e.Blocks.studio_removePoints.VALUES=[[g.removePoints10(),"10"],[g.removePoints50(),"50"],[g.removePoints100(),"100"],[g.removePoints300(),"300"],[g.removePoints1000(),"1000"]],c.studio_removePoints=function(){return"Studio.removePoints('block_id_"+this.id+"', '"+(this.getFieldValue("VALUE")||"1")+"');\n"},e.Blocks.studio_setScore={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,312,.32,.62),this.appendValueInput("VALUE").appendField(g.setScore()),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setScoreTooltip())}},c.studio_setScore=function(){return"Studio.setScore("+(Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"0")+");\n"},e.Blocks.studio_getScore={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,312,.32,.62),this.appendDummyInput().appendField(g.score()),this.setOutput(!0,Blockly.BlockValueType.NUMBER),this.setTooltip(g.getScoreTooltip())}},c.studio_getScore=function(){return["Studio.getScore()",0]},e.Blocks.studio_addNumPoints={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendValueInput("NUM").setCheck(e.BlockValueType.NUMBER).appendField(g.add()),this.appendDummyInput().appendField(g.points()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.addPointsTooltip())}},c.studio_addNumPoints=function(){var e=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"1";return"Studio.changeScore('block_id_"+this.id+"', '"+e+"');\n"},e.Blocks.studio_removeNumPoints={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendValueInput("NUM").appendField(g.remove()),this.appendDummyInput().appendField(g.points()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.removePointsTooltip())}},c.studio_removeNumPoints=function(){var e=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"1";return"Studio.removePoints('block_id_"+this.id+"', '"+e+"');\n"},e.Blocks.studio_setScoreText={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendValueInput("TEXT").appendField(g.setScoreText()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setScoreTextTooltip())}},c.studio_setScoreText=function(){var e=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||d.EMPTY_QUOTES;return"Studio.setScoreText('block_id_"+this.id+"', "+e+");\n"},e.Blocks.studio_showCoordinates={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(g.showCoordinates()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.showCoordinatesTooltip())}},c.studio_showCoordinates=function(){return"Studio.showCoordinates('block_id_"+this.id+"');\n"},e.Blocks.studio_setDroidSpeed={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74);var t=new e.FieldDropdown(this.VALUES);t.setValue(this.VALUES[2][1]),this.appendDummyInput().appendField(t,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setDroidSpeedTooltip())}},e.Blocks.studio_setDroidSpeed.VALUES=[[g.setDroidSpeedRandom(),"random"],[g.setDroidSpeedSlow(),"slow"],[g.setDroidSpeedNormal(),"normal"],[g.setDroidSpeedFast(),"fast"]],c.studio_setDroidSpeed=function(){return"Studio.setDroidSpeed('block_id_"+this.id+"', \""+this.getFieldValue("VALUE")+'");\n'},e.Blocks.studio_setSpriteSpeed={helpUrl:"",init:function(){if(Blockly.cdoUtils.setHSV(this,184,1,.74),b>1?a?this.appendDummyInput().appendField(g.setSprite()).appendField(h(),"SPRITE"):this.appendDummyInput().appendField(m(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendField(g.setSprite()),a){var t=new e.FieldImageDropdown(this.K1_VALUES);t.setValue(this.K1_VALUES[1][1]),this.appendDummyInput().appendField(g.speed()).appendField(t,"VALUE")}else{var i=new e.FieldDropdown(this.VALUES);i.setValue(this.VALUES[3][1]),this.appendDummyInput().appendField(i,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},e.Blocks.studio_setSpriteSpeedParams={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.setSpriteN({spriteIndex:""})),this.appendValueInput("VALUE").setCheck(e.BlockValueType.NUMBER).appendField(g.speed()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},e.Blocks.studio_setSpriteSpeed.K1_VALUES=[[i.speedSlow,"Studio.SpriteSpeed.SLOW"],[i.speedMedium,"Studio.SpriteSpeed.NORMAL"],[i.speedFast,"Studio.SpriteSpeed.FAST"]],e.Blocks.studio_setSpriteSpeed.VALUES=[[g.setSpriteSpeedRandom(),d.RANDOM_VALUE],[g.setSpriteSpeedVerySlow(),"Studio.SpriteSpeed.VERY_SLOW"],[g.setSpriteSpeedSlow(),"Studio.SpriteSpeed.SLOW"],[g.setSpriteSpeedNormal(),"Studio.SpriteSpeed.NORMAL"],[g.setSpriteSpeedFast(),"Studio.SpriteSpeed.FAST"],[g.setSpriteSpeedVeryFast(),"Studio.SpriteSpeed.VERY_FAST"]],c.studio_setSpriteSpeed=function(){return y({ctx:this,extraParams:this.getFieldValue("SPRITE")||"0",name:"setSpriteSpeed"})},c.studio_setSpriteSpeedParams=function(){var e=A(this),t=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"5";return"Studio.setSpriteSpeed('block_id_"+this.id+"', "+e+","+t+");\n"},e.Blocks.studio_setSpriteSize={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),b>1?this.appendDummyInput().appendField(m(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendField(g.setSprite());var t=new e.FieldDropdown(this.VALUES);t.setValue(this.VALUES[3][1]),this.appendDummyInput().appendField(t,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSizeTooltip())}},e.Blocks.studio_setSpriteSizeParams={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.setSpriteN({spriteIndex:""})),this.appendValueInput("VALUE").setCheck(e.BlockValueType.NUMBER).appendField(g.size()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSizeTooltip())}},e.Blocks.studio_setSpriteSize.VALUES=[[g.setSpriteSizeRandom(),d.RANDOM_VALUE],[g.setSpriteSizeVerySmall(),"Studio.SpriteSize.VERY_SMALL"],[g.setSpriteSizeSmall(),"Studio.SpriteSize.SMALL"],[g.setSpriteSizeNormal(),"Studio.SpriteSize.NORMAL"],[g.setSpriteSizeLarge(),"Studio.SpriteSize.LARGE"],[g.setSpriteSizeVeryLarge(),"Studio.SpriteSize.VERY_LARGE"]],c.studio_setSpriteSize=function(){return y({ctx:this,extraParams:this.getFieldValue("SPRITE")||"0",name:"setSpriteSize"})},c.studio_setSpriteSizeParams=function(){var e=A(this),t=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"5";return"Studio.setSpriteSize('block_id_"+this.id+"', "+e+","+t+");\n"},e.Blocks.studio_setSpritesWander={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74);var e=R(g.setEverySpriteNameWander);this.appendDummyInput().appendField(e,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritesWanderTooltip())}},c.studio_setSpritesWander=function(){return y({ctx:this,name:"setSpritesWander"})},e.Blocks.studio_setSpritesStop={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74);var e=R(g.stopEverySpriteName);this.appendDummyInput().appendField(e,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritesStopTooltip())}},c.studio_setSpritesStop=function(){return y({ctx:this,name:"setSpritesStop"})},e.Blocks.studio_setSpritesChase={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74);var t=R(g.setEverySpriteNameChaseActor);this.appendDummyInput().appendField(t,"VALUE"),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritesChaseTooltip())}},c.studio_setSpritesChase=function(){return y({ctx:this,name:"setSpritesChase",extraParams:A(this)})},e.Blocks.studio_setSpritesFlee={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74);var t=R(g.setEverySpriteNameFleeActor);this.appendDummyInput().appendField(t,"VALUE"),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpritesFleeTooltip())}},c.studio_setSpritesFlee=function(){return y({ctx:this,name:"setSpritesFlee",extraParams:A(this)})},e.Blocks.studio_setSpritesSpeed={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74);var t=R(g.setEverySpriteNameSpeed);this.appendDummyInput().appendField(t,"VALUE"),this.appendValueInput("SPEED").setCheck(e.BlockValueType.NUMBER),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteSpeedTooltip())}},c.studio_setSpritesSpeed=function(){var t=e.JavaScript.valueToCode(this,"SPEED",Blockly.JavaScript.ORDER_NONE);return y({ctx:this,name:"setSpritesSpeed",extraParams:t})},e.Blocks.studio_setSpriteBehavior={helpUrl:"",init:function(){var t=this;Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(g.setActor()),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER);var i=!0,o=[[g.setSpriteChase(),d.BEHAVIOR_CHASE],[g.setSpriteFlee(),d.BEHAVIOR_FLEE],[g.toWander(),d.BEHAVIOR_WANDER]].map((function(e){return[e[0],'"'.concat(e[1],'"')]})),n=new e.FieldDropdown(o,(function(o){o=o.substring(1,o.length-1),i&&o===d.BEHAVIOR_WANDER?(t.removeInput("TARGETSPRITE"),i=!1):i||o!==d.BEHAVIOR_CHASE&&o!==d.BEHAVIOR_FLEE||(t.appendValueInput("TARGETSPRITE").setCheck(e.BlockValueType.NUMBER),i=!0)}),!0);this.appendDummyInput().appendField(n,"VALUE"),this.appendValueInput("TARGETSPRITE").setCheck(e.BlockValueType.NUMBER),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteBehaviorTooltip())}},c.studio_setSpriteBehavior=function(){return y({ctx:this,name:"setSpriteBehavior",extraParams:A(this)+", "+A(this,"TARGETSPRITE")})},e.Blocks.studio_whenSpriteAndGroupCollide={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74);var e=m(g.whenSpriteN),t=new Blockly.FieldLabel,i=R(g.collidesWithAnySpriteName,(function(e){return t.setValue(g.toTouchedSpriteName({spriteName:(0,u.stripQuotes)(e)}))}));this.appendDummyInput().appendField(e,"SPRITE").appendField(i,"SPRITENAME"),this.appendDummyInput(),this.appendValueInput("GROUPMEMBER").setInline(!0).appendField(g.set()),this.appendDummyInput().setInline(!0).appendField(t),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenSpriteAndGroupCollideTooltip())}},c.studio_whenSpriteAndGroupCollide=function(){var e=Blockly.JavaScript.valueToCode(this,"GROUPMEMBER",Blockly.JavaScript.ORDER_NONE);return"".concat(e," = touchedSpriteIndex + 1;\n")},e.Blocks.studio_whenSpriteAndGroupCollideSimple={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,140,1,.74);var e=m(g.whenSpriteN),t=R(g.collidesWithAnySpriteName);this.appendDummyInput().appendField(e,"SPRITE").appendField(t,"SPRITENAME"),this.setPreviousStatement(!1),this.setNextStatement(!0),this.setTooltip(g.whenSpriteAndGroupCollideTooltip())}},c.studio_whenSpriteAndGroupCollideSimple=c.studio_eventHandlerPrologue,e.Blocks.studio_setBackground={helpUrl:"",init:function(){var t;Blockly.cdoUtils.setHSV(this,312,.32,.62),this.VALUES=[],a?(this.VALUES=i.backgroundChoicesK1,t=new e.FieldImageDropdown(i.backgroundChoicesK1,i.dropdownThumbnailWidth,i.dropdownThumbnailHeight),this.appendDummyInput().appendField(g.setBackground()).appendField(t,"VALUE")):(this.VALUES=i.backgroundChoices,t=new e.FieldDropdown(i.backgroundChoices),this.appendDummyInput().appendField(t,"VALUE")),t.setValue('"'+i.defaultBackground+'"'),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setBackgroundTooltip())}},e.Blocks.studio_setBackgroundParam={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,312,.32,.62),this.VALUES=i.backgroundChoices,this.appendDummyInput().appendField(g.setBackground()),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setBackgroundTooltip())}},c.studio_setBackground=function(){return y({ctx:this,name:"setBackground"})},c.studio_setBackgroundParam=function(){var t=e.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE);return y({value:t,ctx:this,name:"setBackground"})},e.Blocks.studio_setMap={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,312,.32,.62),this.VALUES=i.mapChoices.map((function(e){return[e[0],e[1]===d.RANDOM_VALUE?e[1]:'"'.concat(e[1],'"')]}));var t=new e.FieldDropdown(this.VALUES);this.appendDummyInput().appendField(t,"VALUE"),t.setValue(i.mapChoices[1][1]),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setMapTooltip())}},c.studio_setMap=function(){return y({ctx:this,name:"setMap"})},e.Blocks.studio_setMapAndColor={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,312,.32,.62),this.VALUES=i.mapChoices.map((function(e){return[e[0],e[1]===d.RANDOM_VALUE?e[1]:'"'.concat(e[1],'"')]}));var t=new e.FieldDropdown(this.VALUES);this.appendDummyInput().appendField(t,"VALUE"),t.setValue(i.mapChoices[1][1]),this.appendValueInput("COLOR").setCheck(e.BlockValueType.COLOUR).appendField(g.withColor()),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setMapTooltip())}},c.studio_setMapAndColor=function(){var t=e.JavaScript.valueToCode(this,"COLOR",c.ORDER_NONE)||"'#000000'";return y({ctx:this,name:"setMapAndColor",extraParams:t})};var D=function(t){var i={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendDummyInput().appendField(g.showTitleScreen()),t.params?(this.appendValueInput("TITLE").setCheck(e.BlockValueType.STRING).setAlign(Blockly.ALIGN_RIGHT).appendField(g.showTitleScreenTitle()),this.appendValueInput("TEXT").setCheck(e.BlockValueType.STRING).setAlign(Blockly.ALIGN_RIGHT).appendField(g.showTitleScreenText())):(this.appendDummyInput().appendField(g.showTitleScreenTitle()).appendField(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendField(new Blockly.FieldTextInput(g.showTSDefTitle()),"TITLE").appendField(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12)),this.appendDummyInput().appendField(g.showTitleScreenText()).appendField(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendField(new Blockly.FieldTextInput(g.showTSDefText()),"TEXT").appendField(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12))),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.showTitleScreenTooltip())}};return i};e.Blocks.studio_showTitleScreen=D({}),e.Blocks.studio_showTitleScreenParams=D({params:!0}),c.studio_showTitleScreen=function(){return"Studio.showTitleScreen('block_id_"+this.id+"', "+e.JavaScript.quote_(this.getFieldValue("TITLE"))+", "+e.JavaScript.quote_(this.getFieldValue("TEXT"))+");\n"},c.studio_showTitleScreenParams=function(){var e=Blockly.JavaScript.valueToCode(this,"TITLE",Blockly.JavaScript.ORDER_NONE)||d.EMPTY_QUOTES,t=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||d.EMPTY_QUOTES;return"Studio.showTitleScreen('block_id_"+this.id+"', "+e+", "+t+");\n"},a?(e.Blocks.studio_setSprite={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,312,.32,.62);var t=new e.FieldDropdown(this.VALUES);t.setValue(d.VISIBLE_VALUE),this.appendDummyInput().appendField(t,"VALUE"),b>1&&this.appendDummyInput().appendField(h(),"SPRITE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteK1Tooltip())}},e.Blocks.studio_setSprite.VALUES=[[g.setSpriteHideK1(),d.HIDDEN_VALUE],[g.setSpriteShowK1(),d.VISIBLE_VALUE]]):e.Blocks.studio_setSprite={helpUrl:"",init:function(){if(this.VALUES=[].concat(i.spriteChoices),Blockly.cdoUtils.setHSV(this,312,.32,.62),b>1)this.appendDummyInput().appendField(m(g.setSpriteN),"SPRITE");else for(var t=i.setSpritePrefix+" ",o=0;o<this.VALUES.length;o++)this.VALUES[o]=[].concat(i.spriteChoices[o]),this.VALUES[o][0]=t+this.VALUES[o][0];var n=new e.FieldDropdown(this.VALUES);n.setValue(i.spriteChoices[2][1]),this.appendDummyInput().appendField(n,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},e.Blocks.studio_setSpriteParams={helpUrl:"",init:function(){this.VALUES=i.spriteChoices;var t=new e.FieldDropdown(i.spriteChoices);t.setValue(i.spriteChoices[2][1]),Blockly.cdoUtils.setHSV(this,312,.32,.62),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.setSpriteN({spriteIndex:""})),this.appendDummyInput().appendField(t,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},e.Blocks.studio_setSpriteParamValue={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,312,.32,.62),b>1?this.appendDummyInput().appendField(m(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendField(g.setSprite()),this.appendValueInput("VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteTooltip())}},c.studio_setSprite=function(){var e=this.getFieldValue("SPRITE")||"0";return y({ctx:this,extraParams:e,name:"setSprite"})},c.studio_setSpriteParams=function(){var e=A(this);return y({ctx:this,extraParams:e,name:"setSprite"})},c.studio_setSpriteParamValue=function(){var t=this.getFieldValue("SPRITE")||"0",i=e.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE);return y({value:i,ctx:this,extraParams:t,name:"setSprite"})},e.Blocks.studio_setSpriteEmotion={helpUrl:"",init:function(){if(Blockly.cdoUtils.setHSV(this,184,1,.74),b>1?a?this.appendDummyInput().appendField(g.setSprite()).appendField(h(),"SPRITE"):this.appendDummyInput().appendField(m(g.setSpriteN),"SPRITE"):this.appendDummyInput().appendField(g.setSprite()),a){var t=new e.FieldImageDropdown(this.K1_VALUES,34,34);t.setValue(this.K1_VALUES[0][1]),this.appendDummyInput().appendField(g.emotion()).appendField(t,"VALUE")}else{var i=new e.FieldDropdown(this.VALUES);i.setValue(this.VALUES[1][1]),this.appendDummyInput().appendField(i,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteEmotionTooltip())}},e.Blocks.studio_setSpriteEmotionParams={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.setSpriteN({spriteIndex:""}));var t=new e.FieldDropdown(this.VALUES);t.setValue(this.VALUES[1][1]),this.appendDummyInput().appendField(t,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.setSpriteEmotionTooltip())}},e.Blocks.studio_setSpriteEmotion.VALUES=e.Blocks.studio_setSpriteEmotionParams.VALUES=[[g.setSpriteEmotionRandom(),d.RANDOM_VALUE],[g.setSpriteEmotionNormal(),d.Emotions.NORMAL.toString()],[g.setSpriteEmotionHappy(),d.Emotions.HAPPY.toString()],[g.setSpriteEmotionAngry(),d.Emotions.ANGRY.toString()],[g.setSpriteEmotionSad(),d.Emotions.SAD.toString()]],e.Blocks.studio_setSpriteEmotion.K1_VALUES=[[i.emotionNormal,d.Emotions.NORMAL.toString()],[i.emotionHappy,d.Emotions.HAPPY.toString()],[i.emotionAngry,d.Emotions.ANGRY.toString()],[i.emotionSad,d.Emotions.SAD.toString()],[i.randomPurpleIcon,d.RANDOM_VALUE]],c.studio_setSpriteEmotion=function(){return y({ctx:this,extraParams:this.getFieldValue("SPRITE")||"0",name:"setSpriteEmotion"})},c.studio_setSpriteEmotionParams=function(){var e=A(this);return y({ctx:this,extraParams:e,name:"setSpriteEmotion"})};var O=function(t){var o={helpUrl:"",init:function(){if(Blockly.cdoUtils.setHSV(this,184,1,.74),t.time?(this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.actor()),this.appendDummyInput().appendField(g.saySprite())):b>1?a?this.appendDummyInput().appendField(g.saySprite()).appendField(h(),"SPRITE"):this.appendDummyInput().appendField(m(g.saySpriteN),"SPRITE"):this.appendDummyInput().appendField(g.saySprite()),t.restrictedDialog){for(var o=[],n=0;n<60;n++){var r=o[n]=[],s=g["saySpriteChoices_"+n]();r[0]=r[1]=s}var l=new e.FieldDropdown(o);this.appendDummyInput().appendField(l,"VALUE")}else if(t.params)this.appendValueInput("TEXT");else{var u=this.appendDummyInput();a&&u.appendField(new Blockly.FieldImage(i.speechBubble)),u.appendField(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendField(new Blockly.FieldTextInput(g.defaultSayText()),"TEXT").appendField(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12))}t.time&&(this.appendValueInput("TIME").setCheck(e.BlockValueType.NUMBER).appendField(g.for()),this.appendDummyInput().appendField(g.waitSeconds())),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.saySpriteTooltip())}};return o};e.Blocks.studio_saySprite=O({}),e.Blocks.studio_saySpriteChoices=O({restrictedDialog:!0}),e.Blocks.studio_saySpriteParams=O({params:!0}),e.Blocks.studio_saySpriteParamsTime=O({params:!0,time:!0}),c.studio_saySprite=function(){return"Studio.saySprite('block_id_"+this.id+"', "+(this.getFieldValue("SPRITE")||"0")+", "+e.JavaScript.quote_(this.getFieldValue("TEXT"))+");\n"},c.studio_saySpriteChoices=function(){return"Studio.saySprite('block_id_"+this.id+"', "+(this.getFieldValue("SPRITE")||"0")+", '"+(this.getFieldValue("VALUE")||" ")+"');\n"},c.studio_saySpriteParams=function(){var e=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||d.EMPTY_QUOTES;return"Studio.saySprite('block_id_"+this.id+"', "+(this.getFieldValue("SPRITE")||"0")+", "+e+");\n"},c.studio_saySpriteParamsTime=function(){var e=A(this),t=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||d.EMPTY_QUOTES,i=Blockly.JavaScript.valueToCode(this,"TIME",Blockly.JavaScript.ORDER_NONE)||1;return"Studio.saySprite('block_id_"+this.id+"', "+e+", "+t+","+i+");\n"};var P=function(t){var o={helpUrl:"",init:function(){if(Blockly.cdoUtils.setHSV(this,184,1,.74),t.params)this.appendDummyInput().appendField(g.waitFor()),this.appendValueInput("VALUE").setCheck(e.BlockValueType.NUMBER),this.appendDummyInput().appendField(g.waitSeconds());else if(a){var o=new e.FieldDropdown([1,2,3,4,5].map((function(e){return[e.toString(),(1e3*e).toString()]})));o.setValue("1000"),this.appendDummyInput().appendField(g.wait()).appendField(new e.FieldImage(i.clockIcon)).appendField(o,"VALUE").appendField(g.waitSeconds())}else{var n=new e.FieldDropdown(this.VALUES);n.setValue(this.VALUES[2][1]),this.appendDummyInput().appendField(n,"VALUE")}this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.params?g.waitParamsTooltip():g.waitTooltip())}};return t.params||(o.VALUES=[[g.waitForClick(),'"click"'],[g.waitForRandom(),"random"],[g.waitForHalfSecond(),"500"],[g.waitFor1Second(),"1000"],[g.waitFor2Seconds(),"2000"],[g.waitFor5Seconds(),"5000"],[g.waitFor10Seconds(),"10000"]]),o};e.Blocks.studio_wait=P({}),e.Blocks.studio_waitParams=P({params:!0}),c.studio_wait=function(){return y({ctx:this,name:"wait"})},c.studio_waitParams=function(){var e=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_NONE)||"0";return"Studio.wait('block_id_"+this.id+"', ("+e+" * 1000));\n"},e.Blocks.studio_endGame={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74);var t=new e.FieldDropdown(this.VALUES);t.setValue(this.VALUES[0][1]),this.appendDummyInput().appendField(t,"VALUE"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(g.endGameTooltip())}},e.Blocks.studio_endGame.VALUES=[[g.endGameWin(),"win"],[g.endGameLose(),"lose"]],c.studio_endGame=function(){return"Studio.endGame('block_id_"+this.id+"','"+this.getFieldValue("VALUE")+"');\n"},e.Blocks.functional_start_setValue={init:function(){var t=g.startSetValue(),i=e.BlockValueType.NONE,o=[{name:"VALUE",type:e.BlockValueType.FUNCTION}];e.FunctionalBlockUtils.initTitledFunctionalBlock(this,t,i,o)}},c.functional_start_setValue=function(){if(!T)throw new Error("must register custom game logic");T.cacheBlock("VALUE",this.getInputTargetBlock("VALUE"))},e.Blocks.functional_start_setVars={init:function(){var t=g.startSetVars(),i=e.BlockValueType.NONE,o=[{name:"title",type:e.BlockValueType.STRING},{name:"subtitle",type:e.BlockValueType.STRING},{name:"background",type:e.BlockValueType.IMAGE},{name:"player",type:e.BlockValueType.IMAGE},{name:"target",type:e.BlockValueType.IMAGE},{name:"danger",type:e.BlockValueType.IMAGE}];e.FunctionalBlockUtils.initTitledFunctionalBlock(this,t,i,o)}},c.functional_start_setVars=function(){},e.Blocks.functional_start_setFuncs={init:function(){var t;this.blockArgs=[{name:"title",type:e.BlockValueType.STRING},{name:"subtitle",type:e.BlockValueType.STRING},{name:"background",type:e.BlockValueType.IMAGE},{name:"target",type:e.BlockValueType.IMAGE},{name:"danger",type:e.BlockValueType.IMAGE},{name:"player",type:e.BlockValueType.IMAGE},{name:"update-target",type:e.BlockValueType.FUNCTION},{name:"update-danger",type:e.BlockValueType.FUNCTION},{name:"update-player",type:e.BlockValueType.FUNCTION},{name:"collide?",type:e.BlockValueType.FUNCTION},{name:"on-screen?",type:e.BlockValueType.FUNCTION}],this.setFunctional(!0,{headerHeight:30}),(t=Blockly.cdoUtils).setHSV.apply(t,[this].concat(p(e.FunctionalTypeColors[e.BlockValueType.NONE])));this.appendDummyInput().appendField(new Blockly.FieldLabel("game_funcs",{fixedSize:{height:35}})).setAlign(Blockly.ALIGN_LEFT),["title, subtitle, background",[this.blockArgs[0],this.blockArgs[1],this.blockArgs[2]],"target, danger, player",[this.blockArgs[3],this.blockArgs[4],this.blockArgs[5]],"update-target, update-danger, update-player",[this.blockArgs[6],this.blockArgs[7],this.blockArgs[8]],"collide?, onscreen?",[this.blockArgs[9],this.blockArgs[10]]].forEach((function(t){"string"==typeof t?this.appendDummyInput().appendField(new Blockly.FieldLabel(t)):t.forEach((function(t,i){var o=this.appendFunctionalInput(t.name);0!==i&&o.setInline(!0),o.setHSV.apply(o,e.FunctionalTypeColors[t.type]),o.setCheck(t.type),o.setAlign(Blockly.ALIGN_LEFT)}),this)}),this),this.setFunctionalOutput(!1)}},c.functional_start_setFuncs=function(){if(!T)throw new Error("must register custom game logic");this.blockArgs.forEach((function(e){var t=this.getInputTargetBlock(e.name);t&&T.cacheBlock(e.name,t)}),this)},e.Blocks.functional_start_setSpeeds={init:function(){var t=e.BlockValueType.NONE;e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"start (player-speed, enemy-speed)",t,[{name:"PLAYER_SPEED",type:"Number"},{name:"ENEMY_SPEED",type:"Number"}])}},c.functional_start_setSpeeds=function(){var e=Blockly.JavaScript.statementToCode(this,"PLAYER_SPEED",!1)||7,t=Blockly.JavaScript.statementToCode(this,"ENEMY_SPEED",!1)||7,i="Studio.setSpriteSpeed('block_id_"+this.id+"',0,"+e+");\n";return i+="Studio.setSpriteSpeed('block_id_"+this.id+"',1,"+t+");\n"},e.Blocks.functional_start_setBackgroundAndSpeeds={init:function(){var t=e.BlockValueType.NONE,i=[{name:"BACKGROUND",type:e.BlockValueType.STRING},{name:"PLAYER_SPEED",type:"Number"},{name:"ENEMY_SPEED",type:"Number"}];e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"start (background, player-speed, enemy-speed)",t,i)}},c.functional_start_setBackgroundAndSpeeds=function(){var e=Blockly.JavaScript.statementToCode(this,"BACKGROUND",!1)||"cave",t=Blockly.JavaScript.statementToCode(this,"PLAYER_SPEED",!1)||7,i=Blockly.JavaScript.statementToCode(this,"ENEMY_SPEED",!1)||7,o="Studio.setBackground('block_id_"+this.id+"',"+e+");\n";return o+="Studio.setSpriteSpeed('block_id_"+this.id+"',0,"+t+");\n",o+="Studio.setSpriteSpeed('block_id_"+this.id+"',1,"+i+");\n"},s.default.install(e,c);var N=i.backgroundChoices.slice(1);e.FunctionalBlockUtils.installStringPicker(e,c,{blockName:"functional_background_string_picker",values:N}),e.Blocks.studio_vanishSprite={helpUrl:"",init:function(){Blockly.cdoUtils.setHSV(this,184,1,.74),this.appendValueInput("SPRITE").setCheck(e.BlockValueType.NUMBER).appendField(g.vanishActorN({spriteIndex:""})),this.setPreviousStatement(!0),this.setInputsInline(!0),this.setNextStatement(!0),this.setTooltip(g.vanishTooltip())}},c.studio_vanishSprite=function(){var e=A(this);return"Studio.vanish('block_id_"+this.id+"', "+e+");\n"},e.Blocks.functional_sprite_dropdown={helpUrl:"",init:function(){var t;(t=Blockly.cdoUtils).setHSV.apply(t,[this].concat(p(e.FunctionalTypeColors[e.BlockValueType.IMAGE]))),this.VALUES=i.spriteChoices;var n=o.default.map(k,(function(e){return[i[e].dropdownThumbnail,e]})),a=new e.FieldImageDropdown(n,i.dropdownThumbnailWidth,i.dropdownThumbnailHeight);this.appendDummyInput().appendField(a,"SPRITE_INDEX"),this.setFunctionalOutput(!0)}},c.functional_sprite_dropdown=function(){return e.JavaScript.quote_(this.getFieldValue("SPRITE_INDEX"))},e.Blocks.functional_background_dropdown={helpUrl:"",init:function(){var t;(t=Blockly.cdoUtils).setHSV.apply(t,[this].concat(p(e.FunctionalTypeColors[e.BlockValueType.IMAGE]))),this.VALUES=i.backgroundChoicesK1;var o=new e.FieldImageDropdown(i.backgroundChoicesK1,i.dropdownThumbnailWidth,i.dropdownThumbnailHeight);this.appendDummyInput().appendField(o,"BACKGROUND"),this.setFunctionalOutput(!0)}},c.functional_background_dropdown=function(){return y({value:this.getFieldValue("BACKGROUND"),ctx:this,returnValue:!0})},e.Blocks.functional_keydown={helpUrl:"",init:function(){e.FunctionalBlockUtils.initTitledFunctionalBlock(this,"keydown?",e.BlockValueType.BOOLEAN,[{name:"ARG1",type:"Number"}])}},c.functional_keydown=function(){return"Studio.isKeyDown("+(Blockly.JavaScript.statementToCode(this,"ARG1",!1)||-1)+");"},e.Blocks.studio_ask={helpUrl:"",init:function(){var e=new Blockly.FieldLabel(Blockly.Msg.VARIABLES_GET_ITEM);e.EDITABLE=!0,Blockly.cdoUtils.setHSV(this,312,.32,.62),this.appendDummyInput().appendField(g.ask()),this.setInputsInline(!0),this.appendDummyInput().appendField(new Blockly.FieldImage(Blockly.assetUrl("media/quote0.png"),12,12)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(new Blockly.FieldImage(Blockly.assetUrl("media/quote1.png"),12,12)),this.appendDummyInput().appendField(g.toSet()),this.appendDummyInput().appendField(Blockly.Msg.VARIABLES_GET_TITLE).appendField(Blockly.disableVariableEditing?e:new Blockly.FieldVariable(Blockly.Msg.VARIABLES_GET_ITEM),"VAR").appendField(Blockly.Msg.VARIABLES_GET_TAIL),this.setPreviousStatement(!0),this.setNextStatement(!0),this.skipNextBlockGeneration=!0},getVars:Blockly.Blocks.variables_get.getVars,renameVar:Blockly.Blocks.variables_get.renameVar,removeVar:Blockly.Blocks.variables_get.removeVar},c.studio_ask=function(){var e="block_id_".concat(this.id),t=this.getFieldValue("TEXT"),i=Blockly.JavaScript.translateVarName(this.getFieldValue("VAR")),o=this.nextConnection&&this.nextConnection.targetBlock(),n=Blockly.JavaScript.blockToCode(o,!0);n=Blockly.Generator.prefixLines("".concat(i," = value;\n").concat(n),"  ");var a="function (value) {\n".concat(n,"}");return'Studio.askForInput("'.concat(e,'", "').concat(t,'", ').concat(a,");\n")}}},2543:e=>{var t=function(e,t,i,o,n,a){this.tileType_=e,this.speed_=t,this.size_=i,this.direction_=o,this.emotion_=n,this.sprite_=a};e.exports=t,t.prototype.getTileType=function(){return this.tileType_},t.prototype.clone=function(){return new t(this.tileType_,this.speed_,this.size_,this.direction_,this.emotion_,this.sprite_)},t.prototype.serialize=function(){return{tileType:this.tileType_,speed:this.speed_,size:this.size_,direction:this.direction_,emotion:this.emotion_,sprite:this.sprite_}},t.deserialize=function(e){return new t(e.tileType,e.speed,e.size,e.direction,e.emotion,e.sprite)}},2658:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(678),n=i(137),a=function(){function e(e){for(var t in this.gridX=void 0,this.gridY=void 0,this.activity=n.BEHAVIOR_STOP,e)this[t]=e[t];this.visible=this.visible||!0,this.flags=0,this.collidingWith_={},this.frames=this.frames||1,this.actions_=[]}var t=e.prototype;return t.clearCollisions=function(){this.collidingWith_={}},t.startCollision=function(e){return!this.isCollidingWith(e)&&(this.collidingWith_[e]=!0,!0)},t.endCollision=function(e){this.collidingWith_[e]=!1},t.isCollidingWith=function(e){return!0===this.collidingWith_[e]},t.outOfBounds=function(){return this.x<-this.width/2||this.x>(0,o.singleton)().MAZE_WIDTH+this.width/2||this.y<-this.height/2||this.y>(0,o.singleton)().MAZE_HEIGHT+this.height/2},t.addAction=function(e){this.actions_.push(e)},t.hasActions=function(){return this.actions_.length>0},t.updateActions=function(){this.actions_.forEach((function(e){e.update(this)}),this);for(var e=this.actions_.length-1;e>=0;e--)this.actions_[e].isDone()&&this.actions_.splice(e,1)},e}();t.default=a,e.exports=t.default},3008:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=(o=i(2586))&&o.__esModule?o:{default:o},a=i(393);function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var s="#7F7F7F",l=function(e){var t,i;function o(t,i,o,n,r,l,u){var d;return(d=e.call(this,t,i,o)||this).width=r,d.height=l,d.drawDebugOverlay=n,d.bytesPerRow=Math.ceil(r/8),d.wallMaps={},Promise.all(Object.keys(i.wallMaps).map((function(e){return(0,a.toImageData)(i.wallMaps[e].srcUrl).then((function(t){var o=d.wallMapFromImageData(t.data);d.wallMaps[e]={srcData:t,wallColor:s,wallMap:o,overlayURI:d.wallOverlayURI(t,o),srcUrl:i.wallMaps[e].srcUrl}}))}))).then((function(){u&&u()})).catch((function(e){console.error(e)})),d}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,r(t,i);var n=o.prototype;return n.willRectTouchWall=function(e,t,i,o){if(this.wallMaps[this.wallMapRequested]){var n=this.wallMaps[this.wallMapRequested].wallMap;this.drawDebugOverlay(this.wallMaps[this.wallMapRequested].srcUrl);for(var a=Math.max(0,t-o/2),r=Math.min(this.height,a+o),s=Math.max(0,e-i/2),l=Math.min(this.width,s+i),u=Math.floor(s/8),d=Math.floor((l-1)/8),c=a;c<r;c++)for(var p=this.bytesPerRow*c,m=u;m<=d;m++)if(n[p+m]){var h=Math.max(s,8*m),S=(1<<Math.min(l,8*(m+1))-h)-1<<h%8;if(n[p+m]&S)return!0}}return!1},n.wallMapFromImageData=function(e){for(var t=new Uint8Array(this.height*this.bytesPerRow),i=0;i<this.height;i++)for(var o=0;o<this.width;o+=8){for(var n=0,a=0;a<8;a++)o+a<this.width&&0===e[4*(i*this.width+o+a)]&&(n|=1<<a);t[i*this.bytesPerRow+o/8]=n}return t},n.wallOverlayURI=function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,n=e.data,r=o.hexToRgb(i),l=0;l<this.height;l++)for(var u=0;u<this.width;u+=8)for(var d=t[l*this.bytesPerRow+u/8],c=0;c<8;c++){var p=1<<c,m=4*(l*this.width+u+c);d&p?(n[m+0]=r.R,n[m+1]=r.G,n[m+2]=r.B,n[m+3]=255):n[m+3]=0}return(0,a.URIFromImageData)(e)},n.getWallOverlayURI=function(){var e=this.wallMaps[this.wallMapRequested];return e?e.overlayURI:null},n.setColor=function(e){var t=this;Object.keys(this.wallMaps).map((function(i){var o=t.wallMaps[i];o.wallColor!==e&&(o.overlayURI=t.wallOverlayURI(o.srcData,o.wallMap,e),o.wallColor=e)}))},o.hexToRgb=function(e){return 4===e.length?{R:17*parseInt(e.substr(1,1),16),G:17*parseInt(e.substr(2,1),16),B:17*parseInt(e.substr(3,1),16)}:{R:parseInt(e.substr(1,2),16),G:parseInt(e.substr(3,2),16),B:parseInt(e.substr(5,2),16)}},o}(n.default);t.default=l,e.exports=t.default},1211:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClosestDirection=t.frameDirTableWalkingWithIdleCounterclockwise=t.frameDirTableWalkingWithIdleClockwise=t.frameDirTableWalking=t.frameDirTable=t.floatingScoreChangeY=t.floatingScoreChangeOpacity=t.WallTypeShift=t.WallTypeMask=t.WallType=t.WallRandomCoordMax=t.WallCoordsShift=t.WallCoordsMask=t.WallCoordRowShift=t.WallCoordRowMask=t.WallCoordMax=t.WallCoordColShift=t.WallCoordColMask=t.WallAnyMask=t.VISIBLE_VALUE=t.UNIT_VECTOR=t.TOUCH_OBSTACLE_THROTTLE_TIME=t.TOUCH_HAZARD_EFFECT_TIME=t.SquareType=t.SquareItemClassShift=t.SquareItemClassMask=t.SpriteSpeed=t.SpriteSize=t.SPRITE_COLLIDE_DISTANCE_SCALING=t.SOUND_THROTTLE_TIME=t.SHAKE_DEFAULT_DURATION=t.SHAKE_DEFAULT_DISTANCE=t.SHAKE_DEFAULT_CYCLES=t.RANDOM_VALUE=t.Position=t.NextTurn=t.MAX_NUM_CLOUDS=t.ITEM_FADE_TIME=t.IDLE_TICKS_BEFORE_FACE_SOUTH=t.HIDDEN_VALUE=t.GOAL_FADE_TIME=t.FINISH_COLLIDE_DISTANCE_SCALING=t.Emotions=t.EMPTY_QUOTES=t.Direction=t.DEFAULT_SPRITE_SPEED=t.DEFAULT_SPRITE_SIZE=t.DEFAULT_SPRITE_ANIMATION_FRAME_DURATION=t.DEFAULT_PROJECTILE_SPEED=t.DEFAULT_PROJECTILE_ANIMATION_FRAME_DURATION=t.DEFAULT_ITEM_SPEED=t.DEFAULT_ITEM_ANIMATION_FRAME_DURATION=t.DEFAULT_ANIMATION_RATE=t.DEFAULT_ACTOR_FADE_TIME=t.ClockwiseDirectionsFromNorth=t.CardinalDirections=t.CLOUD_SIZE=t.CLOUD_OPACITY=t.CLICK_VALUE=t.CAPTURE_TICK_COUNT=t.BEHAVIOR_WATCH_ACTOR=t.BEHAVIOR_WANDER=t.BEHAVIOR_STOP=t.BEHAVIOR_GRID_ALIGNED=t.BEHAVIOR_FLEE=t.BEHAVIOR_CHASE=void 0,t.squareHasItemClass=function(e,t){var i=(t&g)>>>5;return Math.pow(2,e)&i},t.turnRight90=t.turnLeft90=void 0;var i={VERY_SLOW:2,SLOW:3,LITTLE_SLOW:4,NORMAL:5,LITTLE_FAST:6,FAST:8,VERY_FAST:12};t.SpriteSpeed=i;t.SpriteSize={VERY_SMALL:.5,SMALL:.75,NORMAL:1,LARGE:1.5,VERY_LARGE:2};var o={NONE:0,NORTH:1,EAST:2,SOUTH:4,WEST:8,NORTHEAST:3,SOUTHEAST:6,SOUTHWEST:12,NORTHWEST:9};t.Direction=o;t.turnLeft90=function(e){return e>>1||o.WEST};t.turnRight90=function(e){return e<<1&15||o.NORTH};var n=o,a=[n.NORTH,n.NORTHEAST,n.EAST,n.SOUTHEAST,n.SOUTH,n.SOUTHWEST,n.WEST,n.NORTHWEST];t.ClockwiseDirectionsFromNorth=a;var r=[n.NORTH,n.SOUTH,n.EAST,n.WEST];t.CardinalDirections=r;t.getClosestDirection=function(e,t){var i=Math.atan2(e,-t),o=Math.PI/4,n=(Math.round(i/o)+8)%8;return a[n]};var s={};t.frameDirTable=s,s[n.SOUTHEAST]=0,s[n.EAST]=1,s[n.NORTHEAST]=2,s[n.NORTH]=3,s[n.NORTHWEST]=4,s[n.WEST]=5,s[n.SOUTHWEST]=6;var l={};t.frameDirTableWalking=l,l[n.NONE]=0,l[n.SOUTH]=0,l[n.SOUTHEAST]=1,l[n.EAST]=2,l[n.NORTHEAST]=3,l[n.NORTH]=4,l[n.NORTHWEST]=5,l[n.WEST]=6,l[n.SOUTHWEST]=7;var u={};t.frameDirTableWalkingWithIdleClockwise=u,u[n.NONE]=8,u[n.SOUTH]=0,u[n.SOUTHEAST]=1,u[n.EAST]=2,u[n.NORTHEAST]=3,u[n.NORTH]=4,u[n.NORTHWEST]=5,u[n.WEST]=6,u[n.SOUTHWEST]=7;var d={};t.frameDirTableWalkingWithIdleCounterclockwise=d,d[n.NONE]=8,d[n.SOUTH]=0,d[n.SOUTHEAST]=7,d[n.EAST]=6,d[n.NORTHEAST]=5,d[n.NORTH]=4,d[n.NORTHWEST]=3,d[n.WEST]=2,d[n.SOUTHWEST]=1;var c={};t.UNIT_VECTOR=c,c[n.NONE]={x:0,y:0},c[n.NORTH]={x:0,y:-1},c[n.EAST]={x:1,y:0},c[n.SOUTH]={x:0,y:1},c[n.WEST]={x:-1,y:0},c[n.NORTHEAST]={x:1,y:-1},c[n.SOUTHEAST]={x:1,y:1},c[n.SOUTHWEST]={x:-1,y:1},c[n.NORTHWEST]={x:-1,y:-1},n.getUnitVector=function(e){return c[e]};t.Position={OUTTOPOUTLEFT:1,OUTTOPLEFT:2,OUTTOPCENTER:3,OUTTOPRIGHT:4,OUTTOPOUTRIGHT:5,TOPOUTLEFT:6,TOPLEFT:7,TOPCENTER:8,TOPRIGHT:9,TOPOUTRIGHT:10,MIDDLEOUTLEFT:11,MIDDLELEFT:12,MIDDLECENTER:13,MIDDLERIGHT:14,MIDDLEOUTRIGHT:15,BOTTOMOUTLEFT:16,BOTTOMLEFT:17,BOTTOMCENTER:18,BOTTOMRIGHT:19,BOTTOMOUTRIGHT:20,OUTBOTTOMOUTLEFT:21,OUTBOTTOMLEFT:22,OUTBOTTOMCENTER:23,OUTBOTTOMRIGHT:24,OUTBOTTOMOUTRIGHT:25};var p={};t.NextTurn=p,p[n.NORTH]={},p[n.NORTH][n.NORTH]=n.NORTH,p[n.NORTH][n.EAST]=n.NORTHEAST,p[n.NORTH][n.SOUTH]=n.NORTHEAST,p[n.NORTH][n.NONE]=n.NORTHEAST,p[n.NORTH][n.WEST]=n.NORTHWEST,p[n.NORTH][n.NORTHEAST]=n.NORTHEAST,p[n.NORTH][n.SOUTHEAST]=n.NORTHEAST,p[n.NORTH][n.SOUTHWEST]=n.NORTHWEST,p[n.NORTH][n.NORTHWEST]=n.NORTHWEST,p[n.EAST]={},p[n.EAST][n.NORTH]=n.NORTHEAST,p[n.EAST][n.EAST]=n.EAST,p[n.EAST][n.SOUTH]=n.SOUTHEAST,p[n.EAST][n.NONE]=n.SOUTHEAST,p[n.EAST][n.WEST]=n.SOUTHEAST,p[n.EAST][n.NORTHEAST]=n.NORTHEAST,p[n.EAST][n.SOUTHEAST]=n.SOUTHEAST,p[n.EAST][n.SOUTHWEST]=n.SOUTHEAST,p[n.EAST][n.NORTHWEST]=n.NORTHEAST,p[n.SOUTH]={},p[n.SOUTH][n.NORTH]=n.SOUTHEAST,p[n.SOUTH][n.EAST]=n.SOUTHEAST,p[n.SOUTH][n.SOUTH]=n.SOUTH,p[n.SOUTH][n.NONE]=n.NONE,p[n.SOUTH][n.WEST]=n.SOUTHWEST,p[n.SOUTH][n.NORTHEAST]=n.SOUTHEAST,p[n.SOUTH][n.SOUTHEAST]=n.SOUTHEAST,p[n.SOUTH][n.SOUTHWEST]=n.SOUTHWEST,p[n.SOUTH][n.NORTHWEST]=n.SOUTHWEST,p[n.WEST]={},p[n.WEST][n.NORTH]=n.NORTHWEST,p[n.WEST][n.EAST]=n.SOUTHWEST,p[n.WEST][n.SOUTH]=n.SOUTHWEST,p[n.WEST][n.NONE]=n.SOUTHWEST,p[n.WEST][n.WEST]=n.WEST,p[n.WEST][n.NORTHEAST]=n.NORTHWEST,p[n.WEST][n.SOUTHEAST]=n.SOUTHWEST,p[n.WEST][n.SOUTHWEST]=n.SOUTHWEST,p[n.WEST][n.NORTHWEST]=n.NORTHWEST,p[n.NORTHEAST]={},p[n.NORTHEAST][n.NORTH]=n.NORTH,p[n.NORTHEAST][n.EAST]=n.EAST,p[n.NORTHEAST][n.SOUTH]=n.EAST,p[n.NORTHEAST][n.NONE]=n.EAST,p[n.NORTHEAST][n.WEST]=n.NORTH,p[n.NORTHEAST][n.NORTHEAST]=n.NORTHEAST,p[n.NORTHEAST][n.SOUTHEAST]=n.EAST,p[n.NORTHEAST][n.SOUTHWEST]=n.EAST,p[n.NORTHEAST][n.NORTHWEST]=n.NORTH,p[n.SOUTHEAST]={},p[n.SOUTHEAST][n.NORTH]=n.EAST,p[n.SOUTHEAST][n.EAST]=n.EAST,p[n.SOUTHEAST][n.SOUTH]=n.SOUTH,p[n.SOUTHEAST][n.NONE]=n.SOUTH,p[n.SOUTHEAST][n.WEST]=n.SOUTH,p[n.SOUTHEAST][n.NORTHEAST]=n.EAST,p[n.SOUTHEAST][n.SOUTHEAST]=n.SOUTHEAST,p[n.SOUTHEAST][n.SOUTHWEST]=n.SOUTH,p[n.SOUTHEAST][n.NORTHWEST]=n.SOUTH,p[n.SOUTHWEST]={},p[n.SOUTHWEST][n.NORTH]=n.WEST,p[n.SOUTHWEST][n.EAST]=n.SOUTH,p[n.SOUTHWEST][n.SOUTH]=n.SOUTH,p[n.SOUTHWEST][n.NONE]=n.SOUTH,p[n.SOUTHWEST][n.WEST]=n.WEST,p[n.SOUTHWEST][n.NORTHEAST]=n.SOUTH,p[n.SOUTHWEST][n.SOUTHEAST]=n.SOUTH,p[n.SOUTHWEST][n.SOUTHWEST]=n.SOUTHWEST,p[n.SOUTHWEST][n.NORTHWEST]=n.WEST,p[n.NORTHWEST]={},p[n.NORTHWEST][n.NORTH]=n.NORTH,p[n.NORTHWEST][n.EAST]=n.NORTH,p[n.NORTHWEST][n.SOUTH]=n.WEST,p[n.NORTHWEST][n.NONE]=n.WEST,p[n.NORTHWEST][n.WEST]=n.WEST,p[n.NORTHWEST][n.NORTHEAST]=n.NORTH,p[n.NORTHWEST][n.SOUTHEAST]=n.WEST,p[n.NORTHWEST][n.SOUTHWEST]=n.WEST,p[n.NORTHWEST][n.NORTHWEST]=n.NORTHWEST,p[n.NONE]={},p[n.NONE][n.NORTH]=n.SOUTHEAST,p[n.NONE][n.EAST]=n.SOUTHEAST,p[n.NONE][n.SOUTH]=n.SOUTH,p[n.NONE][n.NONE]=n.NONE,p[n.NONE][n.WEST]=n.SOUTHWEST,p[n.NONE][n.NORTHEAST]=n.SOUTHEAST,p[n.NONE][n.SOUTHEAST]=n.SOUTHEAST,p[n.NONE][n.SOUTHWEST]=n.SOUTHWEST,p[n.NONE][n.NORTHWEST]=n.SOUTHWEST;t.Emotions={NORMAL:0,HAPPY:1,ANGRY:2,SAD:3};t.FINISH_COLLIDE_DISTANCE_SCALING=.75;t.SPRITE_COLLIDE_DISTANCE_SCALING=.9;var m=i.NORMAL;t.DEFAULT_SPRITE_SPEED=m;t.DEFAULT_SPRITE_SIZE=1;t.DEFAULT_SPRITE_ANIMATION_FRAME_DURATION=6;var h=i.SLOW;t.DEFAULT_PROJECTILE_SPEED=h;t.DEFAULT_PROJECTILE_ANIMATION_FRAME_DURATION=1.5;var S=i.SLOW;t.DEFAULT_ITEM_SPEED=S;t.DEFAULT_ITEM_ANIMATION_FRAME_DURATION=1.5;var f={OPEN:0,SPRITEFINISH:1,NOT_USED_2:2,WALL:4,NOT_USED_8:8,SPRITESTART:16,ITEM_CLASS_0:32,ITEM_CLASS_1:64,ITEM_CLASS_2:128,ITEM_CLASS_3:256,ITEM_CLASS_4:512,ITEM_CLASS_5:1024,ITEM_CLASS_6:2048,ITEM_CLASS_7:4096,NOT_USED_8K:8192,NOT_USED_16K:16384,NOT_USED_32K:32768};t.SquareType=f;var g=f.ITEM_CLASS_0|f.ITEM_CLASS_1|f.ITEM_CLASS_2|f.ITEM_CLASS_3|f.ITEM_CLASS_4|f.ITEM_CLASS_5|f.ITEM_CLASS_6|f.ITEM_CLASS_7;t.SquareItemClassMask=g;t.SquareItemClassShift=5;t.WallType={NORMAL_SIZE:0,DOUBLE_SIZE:1,JUMBO_SIZE:2};var _=251658240;t.WallTypeMask=_;var y=15728640;t.WallCoordRowMask=y;var b=983040;t.WallCoordColMask=b;var v=268369920;t.WallCoordsMask=v;t.WallCoordsShift=16;t.WallCoordColShift=16;t.WallCoordRowShift=20;t.WallTypeShift=24;t.WallCoordMax=16;t.WallRandomCoordMax=2;var k=v|f.WALL;t.WallAnyMask=k;t.floatingScoreChangeOpacity=-.025;t.floatingScoreChangeY=-1;t.RANDOM_VALUE="random";t.HIDDEN_VALUE='"hidden"';t.CLICK_VALUE='"click"';t.VISIBLE_VALUE='"visible"';t.EMPTY_QUOTES='""';t.IDLE_TICKS_BEFORE_FACE_SOUTH=4;t.DEFAULT_ANIMATION_RATE=20;t.GOAL_FADE_TIME=200;t.ITEM_FADE_TIME=200;t.DEFAULT_ACTOR_FADE_TIME=1e3;t.TOUCH_HAZARD_EFFECT_TIME=1500;t.SHAKE_DEFAULT_DURATION=1e3;t.SHAKE_DEFAULT_CYCLES=6;t.SHAKE_DEFAULT_DISTANCE=5;t.MAX_NUM_CLOUDS=2;t.CLOUD_SIZE=300;t.CLOUD_OPACITY=.7;t.SOUND_THROTTLE_TIME=200;t.TOUCH_OBSTACLE_THROTTLE_TIME=330;t.BEHAVIOR_CHASE="chase";t.BEHAVIOR_FLEE="flee";t.BEHAVIOR_STOP="none";t.BEHAVIOR_WANDER="roam";t.BEHAVIOR_WATCH_ACTOR="watchActor";t.BEHAVIOR_GRID_ALIGNED="grid";t.CAPTURE_TICK_COUNT=20},3513:(e,t,i)=>{"use strict";var o,n=(o=i(2610))&&o.__esModule?o:{default:o},a=i(33),r=i(1211);var s=function(e,t){t=t||{},n.default.apply(this,arguments),this.playerSpriteIndex=0,this.targetSpriteIndex=1,this.dangerSpriteIndex=2,this.finished=!1,this.staticPlayer=(0,a.valueOr)(t.staticPlayer,!1)};s.inherits(n.default),s.prototype.onTick=function(){if(1===this.studio_.tickCount)return this.onFirstTick_(),void(this.studio_.playerScore=100);if(!this.finished&&"visible"!==document.getElementById("titleScreenTitle").getAttribute("visibility")){var e=this.studio_.sprite[this.playerSpriteIndex],t=this.studio_.sprite[this.targetSpriteIndex],i=this.studio_.sprite[this.dangerSpriteIndex];for(var o in this.updateSpriteX_(this.targetSpriteIndex,this.update_target.bind(this)),this.updateSpriteX_(this.dangerSpriteIndex,this.update_danger.bind(this)),this.studio_.keyState)"keydown"===this.studio_.keyState[o]&&this.handleUpdatePlayer_(o);for(var n in this.studio_.btnState)this.studio_.btnState[n]&&("leftButton"===n?this.handleUpdatePlayer_(37):"upButton"===n?this.handleUpdatePlayer_(38):"rightButton"===n?this.handleUpdatePlayer_(39):"downButton"===n&&this.handleUpdatePlayer_(40));if(e.visible&&i.visible&&this.collide(e.x,e.y,i.x,i.y)&&(this.studio_.vanishActor({spriteIndex:this.playerSpriteIndex}),setTimeout(function(){this.studio_.setSprite({spriteIndex:this.playerSpriteIndex,value:"visible"})}.bind(this),850),this.studio_.playerScore-=20,this.resetSprite_(i)),e.visible&&t.visible&&this.collide(e.x,e.y,t.x,t.y)&&(this.studio_.playerScore+=10,this.resetSprite_(t)),this.studio_.playerScore<=0){document.getElementById("score").setAttribute("visibility","hidden"),this.studio_.showTitleScreen({title:"Game Over",text:"Click Reset to Play Again"});for(var a=0;a<this.studio_.spriteCount;a++)this.studio_.setSprite({spriteIndex:a,value:"hidden"});this.finished=!0}else this.studio_.displayScore()}},s.prototype.reset=function(){this.finished=!1},s.prototype.onFirstTick_=function(){var e=function(e,t){e.setBackground(null,this.getVar_("background")),e.setSpritePosition(null,this.playerSpriteIndex,r.Position.MIDDLECENTER),e.setSprite(null,this.playerSpriteIndex,this.getVar_("player")),e.setSpritePosition(null,this.targetSpriteIndex,r.Position.TOPLEFT),e.setSprite(null,this.targetSpriteIndex,this.getVar_("target")),e.setSpritePosition(null,this.dangerSpriteIndex,r.Position.BOTTOMRIGHT),e.setSprite(null,this.dangerSpriteIndex,this.getVar_("danger")),e.showTitleScreen(null,this.getVar_("title"),this.getVar_("subtitle"))}.bind(this);this.studio_.callApiCode("BigGame.onFirstTick",e)},s.prototype.updateSpriteX_=function(e,t){var i=this.studio_.sprite[e],o=t(i.x+i.width/2);i.x=o-i.width/2,this.onscreen(o)?i.visible||this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(i),value:"visible"}):i.visible&&this.resetSprite_(i)},s.prototype.handleUpdatePlayer_=function(e){var t=this.studio_.sprite[this.playerSpriteIndex];if(t.visible){var i=t.y+t.height/2,o=this.studio_.MAZE_HEIGHT-i,n=this.update_player(e,o);t.y=this.studio_.MAZE_HEIGHT-n-t.height/2,this.staticPlayer&&(t.dir=r.Direction.NONE)}},s.prototype.resetSprite_=function(e){e.dir===r.Direction.EAST?e.x=0-e.width:e.x=this.studio_.MAZE_WIDTH,e.y=Math.floor(Math.random()*(this.studio_.MAZE_HEIGHT-e.height)),this.studio_.setSprite({spriteIndex:this.studio_.sprite.indexOf(e),value:"hidden"})},s.prototype.update_target=function(e){return this.getFunc_("update-target")(e)},s.prototype.update_danger=function(e){return this.getFunc_("update-danger")(e)},s.prototype.update_player=function(e,t){return e=parseInt(e,10),this.getFunc_("update-player")(e,t)},s.prototype.onscreen=function(e){return this.getFunc_("on-screen?")(e)},s.prototype.collide=function(e,t,i,o){return this.getFunc_("collide?")(e,t,i,o)},e.exports=s},2610:(e,t,i)=>{"use strict";var o=a(i(3514)),n=a(i(972));function a(e){return e&&e.__esModule?e:{default:e}}var r=function(e){this.studio_=e,this.cached_={}};r.prototype.onTick=function(){throw new Error("should be overridden by child")},r.prototype.reset=function(){},r.prototype.cacheBlock=function(e,t){this.cached_[e]=t},r.prototype.resolveCachedBlock_=function(e){var t="",i=this.cached_[e];if(!i)return t;var a="return "+Blockly.JavaScript.blockToCode(i);return t=n.default.evalWith(a,{Studio:o.default,Globals:Studio.Globals},{legacy:!0})},r.prototype.getVar_=function(e){return this.resolveCachedBlock_(e)},r.prototype.getFunc_=function(e){return this.resolveCachedBlock_(e)||function(){}},e.exports=r},3518:(e,t,i)=>{"use strict";var o,n=i(1211),a=(o=i(2610))&&o.__esModule?o:{default:o};i(33);var r=function(e){a.default.apply(this,arguments),this.rocketIndex=0,this.last=Date.now(),this.seconds=0,this.rocket=null,this.height=0,this.SECONDS_TO_RUN=8};r.inherits(a.default),r.prototype.onTick=function(){1===this.studio_.tickCount&&(this.last=Date.now(),this.seconds=0,this.rocket=this.studio_.sprite[this.rocketIndex],this.height=0,this.studio_.setBackground({value:"space"})),Date.now()-this.last<1e3||(this.last=Date.now(),this.seconds++,this.height=this.rocket_height(this.seconds)||0,this.rocket.y=this.studio_.MAZE_HEIGHT-(this.height+this.rocket.height),this.rocket.dir=n.Direction.NONE,this.studio_.scoreText="Time: "+this.seconds+" | Height: "+this.height,this.studio_.displayScore())},r.prototype.rocket_height=function(e){var t=this.resolveCachedBlock_("VALUE");if(t)return t(e)},e.exports=r},3519:(e,t,i)=>{"use strict";var o,n=i(1211),a=(o=i(2610))&&o.__esModule?o:{default:o};i(33);var r=function(e){a.default.apply(this,arguments),this.samIndex=0,this.sam=null,this.stopped={left:!1,up:!1,right:!1,down:!1}};r.inherits(a.default),r.prototype.onTick=function(){for(var e in this.sam=this.studio_.sprite[this.samIndex],n.KeyCodes)if(this.studio_.keyState[n.KeyCodes[e]]&&"keydown"===this.studio_.keyState[n.KeyCodes[e]])switch(n.KeyCodes[e]){case n.KeyCodes.LEFT:this.updateSam_(n.Direction.WEST);break;case n.KeyCodes.UP:this.updateSam_(n.Direction.NORTH);break;case n.KeyCodes.RIGHT:this.updateSam_(n.Direction.EAST);break;case n.KeyCodes.DOWN:this.updateSam_(n.Direction.SOUTH)}for(var t in this.studio_.btnState)if(this.studio_.btnState[t])switch(t){case"leftButton":this.updateSam_(n.Direction.WEST);break;case"upButton":this.updateSam_(n.Direction.NORTH);break;case"rightButton":this.updateSam_(n.Direction.EAST);break;case"downButton":this.updateSam_(n.Direction.SOUTH)}var i=this.sam.x+this.sam.width/2,o=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);this.studio_.scoreText="("+i+", "+o+")",this.studio_.displayScore()},r.prototype.updateSam_=function(e){var t=this.sam.x+this.sam.width/2,i=this.studio_.MAZE_HEIGHT-(this.sam.y+this.sam.height/2);switch(e){case n.Direction.WEST:this.onscreen(t-this.sam.speed,i)||(e=n.Direction.NONE,this.stopped.left=!0);break;case n.Direction.NORTH:this.onscreen(t,i+this.sam.speed)||(e=n.Direction.NONE,this.stopped.up=!0);break;case n.Direction.EAST:this.onscreen(t+this.sam.speed,i)||(e=n.Direction.NONE,this.stopped.right=!0);break;case n.Direction.SOUTH:this.onscreen(t,i-this.sam.speed)||(e=n.Direction.NONE,this.stopped.down=!0)}this.studio_.moveSingle({spriteIndex:this.samIndex,dir:e})},r.prototype.onscreen=function(e,t){return this.resolveCachedBlock_("VALUE")(e,t)},e.exports=r},3714:(e,t,i)=>{var o=i(3715),n=i(1677);e.exports.blocks=[{func:"setDroid",parent:o,category:"",params:['"R2-D2"'],dropdown:{0:['"random"','"R2-D2"','"C-3PO"']}},{func:"setDroidSpeed",parent:o,category:"",params:['"fast"'],dropdown:{0:['"random"','"slow"','"normal"','"fast"']}},{func:"setBackground",parent:o,category:"",params:['"Hoth"'],dropdown:{0:['"random"','"Endor"','"Hoth"','"Starship"']}},{func:"setMap",parent:o,category:"",params:['"blank"'],dropdown:{0:['"random"','"blank"','"circle"','"horizontal"','"grid"','"blobs"']}},{func:"moveRight",parent:o,category:""},{func:"moveLeft",parent:o,category:""},{func:"moveUp",parent:o,category:""},{func:"moveDown",parent:o,category:""},{func:"goRight",parent:o,category:""},{func:"goLeft",parent:o,category:""},{func:"goUp",parent:o,category:""},{func:"goDown",parent:o,category:""},{func:"playSound",parent:o,category:"",params:['"R2-D2sound1"'],dropdown:{0:n.playSoundDropdown}},{func:"endGame",parent:o,category:"",params:['"win"'],dropdown:{0:['"win"','"lose"']}},{func:"addPoints",parent:o,category:"",params:["100"]},{func:"removePoints",parent:o,category:"",params:["100"]},{func:"addCharacter",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveFast",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveNormal",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"moveSlow",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']}},{func:"whenLeft",block:"function whenLeft() {}",expansion:"function whenLeft() {\n  __;\n}",category:""},{func:"whenRight",block:"function whenRight() {}",expansion:"function whenRight() {\n  __;\n}",category:""},{func:"whenUp",block:"function whenUp() {}",expansion:"function whenUp() {\n  __;\n}",category:""},{func:"whenDown",block:"function whenDown() {}",expansion:"function whenDown() {\n  __;\n}",category:""},{func:"whenTouchObstacle",block:"function whenTouchObstacle() {}",expansion:"function whenTouchObstacle() {\n  __;\n}",category:""},{func:"whenGetCharacter",block:"function whenGetCharacter() {}",expansion:"function whenGetCharacter() {\n  __;\n}",category:""},{func:"whenGetStormtrooper",block:"function whenGetStormtrooper() {}",expansion:"function whenGetStormtrooper() {\n  __;\n}",category:""},{func:"whenGetRebelPilot",block:"function whenGetRebelPilot() {}",expansion:"function whenGetRebelPilot() {\n  __;\n}",category:""},{func:"whenGetPufferPig",block:"function whenGetPufferPig() {}",expansion:"function whenGetPufferPig() {\n  __;\n}",category:""},{func:"whenGetMynock",block:"function whenGetMynock() {}",expansion:"function whenGetMynock() {\n  __;\n}",category:""},{func:"whenGetMouseDroid",block:"function whenGetMouseDroid() {}",expansion:"function whenGetMouseDroid() {\n  __;\n}",category:""},{func:"whenGetTauntaun",block:"function whenGetTauntaun() {}",expansion:"function whenGetTauntaun() {\n  __;\n}",category:""},{func:"whenGetProbot",block:"function whenGetProbot() {}",expansion:"function whenGetProbot() {\n  __;\n}",category:""},{func:"whenGetAllCharacters",block:"function whenGetAllCharacters() {}",expansion:"function whenGetAllCharacters() {\n  __;\n}",category:""},{func:"whenGetAllStormtroopers",block:"function whenGetAllStormtroopers() {}",expansion:"function whenGetAllStormtroopers() {\n  __;\n}",category:""},{func:"whenGetAllRebelPilots",block:"function whenGetAllRebelPilots() {}",expansion:"function whenGetAllRebelPilots() {\n  __;\n}",category:""},{func:"whenGetAllPufferPigs",block:"function whenGetAllPufferPigs() {}",expansion:"function whenGetAllPufferPigs() {\n  __;\n}",category:""},{func:"whenGetAllMynocks",block:"function whenGetAllMynocks() {}",expansion:"function whenGetAllMynocks() {\n  __;\n}",category:""},{func:"whenGetAllMouseDroids",block:"function whenGetAllMouseDroids() {}",expansion:"function whenGetAllMouseDroids() {\n  __;\n}",category:""},{func:"whenGetAllTauntauns",block:"function whenGetAllTauntauns() {}",expansion:"function whenGetAllTauntauns() {\n  __;\n}",category:""},{func:"whenGetAllProbots",block:"function whenGetAllProbots() {}",expansion:"function whenGetAllProbots() {\n  __;\n}",category:""},{func:"whenTouchStormtrooper",block:"function whenTouchStormtrooper() {}",expansion:"function whenTouchStormtrooper() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchRebelPilot",block:"function whenTouchRebelPilot() {}",expansion:"function whenTouchRebelPilot() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchPufferPig",block:"function whenTouchPufferPig() {}",expansion:"function whenTouchPufferPig() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchMynock",block:"function whenTouchMynock() {}",expansion:"function whenTouchMynock() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchMouseDroid",block:"function whenTouchMouseDroid() {}",expansion:"function whenTouchMouseDroid() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchTauntaun",block:"function whenTouchTauntaun() {}",expansion:"function whenTouchTauntaun() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchProbot",block:"function whenTouchProbot() {}",expansion:"function whenTouchProbot() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchCharacter",block:"function whenTouchCharacter() {}",expansion:"function whenTouchCharacter() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"changeScore",parent:o,category:"",params:["1"],noAutocomplete:!0},{func:"whenTouchGoal",block:"function whenTouchGoal() {}",expansion:"function whenTouchGoal() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenTouchAllGoals",block:"function whenTouchAllGoals() {}",expansion:"function whenTouchAllGoals() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"whenScore1000",block:"function whenScore1000() {}",expansion:"function whenScore1000() {\n  __;\n}",category:"",noAutocomplete:!0},{func:"setToChase",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToFlee",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToRoam",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setToStop",parent:o,category:"",params:['"PufferPig"'],dropdown:{0:['"random"','"Stormtrooper"','"RebelPilot"','"PufferPig"','"Mynock"','"MouseDroid"','"Tauntaun"','"Probot"']},noAutocomplete:!0},{func:"setSprite",parent:o,category:"",params:["0",'"R2-D2"'],dropdown:{1:['"random"','"R2-D2"','"C-3PO"']},noAutocomplete:!0},{func:"setSpritePosition",parent:o,category:"",params:["0","7"],noAutocomplete:!0},{func:"setSpriteSpeed",parent:o,category:"",params:["0","8"],noAutocomplete:!0},{func:"setSpriteEmotion",parent:o,category:"",params:["0","1"],noAutocomplete:!0},{func:"setSpriteSize",parent:o,category:"",params:["0","1.0"],noAutocomplete:!0},{func:"throwProjectile",parent:o,category:"",params:["0","1",'"blue_fireball"'],noAutocomplete:!0},{func:"vanish",parent:o,category:"",params:["0"],noAutocomplete:!0},{func:"move",parent:o,category:"",params:["0","1"],noAutocomplete:!0},{func:"showDebugInfo",parent:o,category:"",params:["false"],noAutocomplete:!0},{func:"onEvent",parent:o,category:"",params:["'when-left'","function() {\n  \n}"],noAutocomplete:!0}],e.exports.categories={"":{color:"red",blocks:[]},"Play Lab":{color:"red",blocks:[]},Commands:{color:"red",blocks:[]},Events:{color:"green",blocks:[]}},e.exports.autocompleteFunctionsWithSemicolon=!0,e.exports.showParamDropdowns=!0},3522:(e,t,i)=>{"use strict";var o=i(1211),n=s(i(1490)),a=i(33),r=s(i(677));function s(e){return e&&e.__esModule?e:{default:e}}var l=r.default.createToolbox,u=r.default.blockOfType,d=r.default.createCategory;function c(e){var t={};return e.sprite&&(t.SPRITE=e.sprite),e.requiredText&&(t.TEXT=e.requiredText),e.notDefaultText&&(t.TEXT=n.default.helloWorld()),[{test:function(t){return"studio_saySprite"===t.type&&((!e.sprite||t.getFieldValue("SPRITE")===e.sprite)&&(!e.notDefaultText&&!e.requiredText||t.getFieldValue("TEXT")!==n.default.defaultSayText()))},type:"studio_saySprite",titles:t}]}function p(e){var t={};return e.sprite&&(t.SPRITE=e.sprite),e.dir&&(t.DIR=e.dir),[{test:function(t){return"studio_move"===t.type&&((!e.sprite||t.getFieldValue("SPRITE")===e.sprite)&&(!e.dir||t.getFieldValue("DIR")===e.dir))},type:"studio_move",titles:t}]}function m(){return p({dir:"1"})}function h(){return p({dir:"4"})}function S(){return p({dir:"2"})}function f(){return p({dir:"8"})}var g='<block type="studio_move"><title name="DIR">1</title></block>   <block type="studio_move"><title name="DIR">4</title></block>   <block type="studio_move"><title name="DIR">8</title></block>   <block type="studio_move"><title name="DIR">2</title></block>',_='<block type="when_run"><next>   <block type="studio_move"><title name="DIR">2</title></block></next>   </block>',y='<block type="when_run"><next>   <block type="studio_move"><title name="DIR">4</title></block></next>   </block>',b=u("studio_moveNorthDistance")+u("studio_moveEastDistance")+u("studio_moveSouthDistance")+u("studio_moveWestDistance");var v=e.exports={};v.custom={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},startBlocks:""},v.dog_hello={ideal:2,instructionsImportant:!0,requiredBlocks:[c({notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0}},timeoutFailureTick:100,toolbox:l(u("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},v.k1_1=(0,a.extend)(v.dog_hello,{isK1:!0,toolbox:l(u("studio_saySprite"))}),v.c2_1=(0,a.extend)(v.dog_hello),v.c3_story_1=(0,a.extend)(v.dog_hello),v.playlab_1=(0,a.extend)(v.dog_hello,{background:"winter",timeoutFailureTick:null,timeoutAfterWhenRun:!0,firstSpriteIndex:2,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>0}},requiredBlocks:[c({requiredText:n.default.hello()})]}),v.iceage_hello1=(0,a.extend)(v.playlab_1,{background:"icy5",firstSpriteIndex:1}),v.gumball_hello1=(0,a.extend)(v.playlab_1,{background:"dots",firstSpriteIndex:0}),v.dog_and_cat_hello={ideal:3,requiredBlocks:[c({sprite:"0",notDefaultText:!0}),c({sprite:"1",notDefaultText:!0})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>1}},timeoutFailureTick:200,toolbox:l(u("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},v.k1_2=(0,a.extend)(v.dog_and_cat_hello,{isK1:!0,toolbox:l(u("studio_saySprite"))}),v.c2_2=(0,a.extend)(v.dog_and_cat_hello,{}),v.c3_story_2=(0,a.extend)(v.dog_and_cat_hello,{}),v.playlab_2=(0,a.extend)(v.dog_and_cat_hello,{background:"desert",firstSpriteIndex:20,timeoutFailureTick:null,timeoutAfterWhenRun:!0,defaultEmotion:o.Emotions.HAPPY,goal:{successCondition:function(){return Studio.allWhenRunBlocksComplete()&&Studio.sayComplete>1}},requiredBlocks:[c({sprite:"0",requiredText:n.default.hello()}),c({sprite:"1",requiredText:n.default.hello()})],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),v.iceage_hello2=(0,a.extend)(v.playlab_2,{background:"icy1",firstSpriteIndex:0}),v.gumball_hello2=(0,a.extend)(v.playlab_2,{background:"dots",firstSpriteIndex:3,defaultEmotion:o.Emotions.NORMAL}),v.dog_move_cat={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2"}}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:100,toolbox:l('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+u("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},v.k1_3=(0,a.extend)(v.dog_move_cat,{isK1:!0,requiredBlocks:[[{test:function(e){return"studio_moveEastDistance"===e.type},type:"studio_moveEastDistance"}]],toolbox:l(b+u("studio_saySprite"))}),v.c2_3=(0,a.extend)(v.dog_move_cat,{}),v.c3_story_3=(0,a.extend)(v.dog_move_cat,{}),v.playlab_3={ideal:2,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"200"}}]],timeoutFailureTick:null,timeoutAfterWhenRun:!0,scale:{snapRadius:2},background:"tennis",firstSpriteIndex:26,toolbox:l('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},v.iceage_move_to_flag=(0,a.extend)(v.playlab_3,{background:"icy3",firstSpriteIndex:2}),v.gumball_move_to_flag=(0,a.extend)(v.playlab_3,{background:"clouds",firstSpriteIndex:2}),v.dog_move_cat_hello={ideal:4,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"2",DISTANCE:"100"}}],c({sprite:"1",requiredText:n.default.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return Studio.sayComplete>0&&Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:200,toolbox:l('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+u("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>'},v.k1_4=(0,a.extend)(v.dog_move_cat_hello,{isK1:!0,requiredBlocks:[[{test:function(e){return"studio_moveEastDistance"===e.type},type:"studio_moveEastDistance"}],[{test:function(e){return"studio_saySprite"===e.type&&"1"===e.getFieldValue("SPRITE")&&e.getFieldValue("TEXT")!==n.default.defaultSayText()},type:"studio_saySprite",titles:{TEXT:n.default.hello(),SPRITE:"1"}}]],toolbox:l(b+u("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>      <block type="studio_whenSpriteCollided" deletable="false" x="20" y="140"></block>'}),v.c2_4=(0,a.extend)(v.dog_move_cat_hello,{}),v.c3_story_4=(0,a.extend)(v.dog_move_cat_hello,{}),v.playlab_4={ideal:4,scale:{snapRadius:2},background:"tennis",avatarList:["tennisboy","tennisgirl"],defaultEmotion:o.Emotions.SAD,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{DIR:"4",DISTANCE:"200"}}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"goal1"}}]],timeoutFailureTick:100,timeoutAfterWhenRun:!0,goal:{successCondition:function(){return Studio.playSoundCount>0&&Studio.sprite[0].isCollidingWith(1)}},toolbox:l('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">200</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">200</title></block><block type="studio_playSound"><title name="SOUND">goal1</title></block>'),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="120"></block>',map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},v.iceage_move_to_actor=(0,a.extend)(v.playlab_4,{background:"icy3",avatarList:["diego","manny"]}),v.gumball_move_to_actor=(0,a.extend)(v.playlab_4,{background:"space",avatarList:["gumball","darwin"],defaultEmotion:o.Emotions.NORMAL}),v.click_hello={instructionsImportant:!0,ideal:3,requiredBlocks:[c({requiredText:n.default.hello()})],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return this.successState.seenCmd||(this.successState.seenCmd=Studio.isCmdCurrentInQueue("saySprite","whenSpriteClicked-0")),Studio.sayComplete>0&&this.successState.seenCmd}},callouts:[{id:"playlab:click_hello:instructions",element_id:"#prompt-table",qtip_config:{content:{text:n.default.calloutInstructions()},position:{my:"bottom left",at:"top right",adjust:{x:-40,y:0}}}}],timeoutFailureTick:300,toolbox:l('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+u("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>     <block type="studio_whenSpriteClicked" deletable="false" x="20" y="120"></block>'},v.c2_5=(0,a.extend)(v.click_hello,{}),v.c3_game_1=(0,a.extend)(v.click_hello,{}),v.playlab_5=(0,a.extend)(v.click_hello,{background:"space",firstSpriteIndex:23,timeoutAfterWhenRun:!0,defaultEmotion:o.Emotions.HAPPY,toolbox:l(u("studio_saySprite")),startBlocks:'<block type="studio_whenSpriteClicked" deletable="false" x="20" y="20"></block>'}),v.iceage_click_hello=(0,a.extend)(v.playlab_5,{background:"icy4",firstSpriteIndex:1}),v.octopus_happy={ideal:2,requiredBlocks:[[{test:"setSpriteEmotion",type:"studio_setSpriteEmotion"}]],scale:{snapRadius:2},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:4,goal:{successCondition:function(){return Studio.sprite[0].emotion===o.Emotions.HAPPY&&Studio.tickCount>=50}},timeoutFailureTick:100,toolbox:l('<block type="studio_moveDistance"><title name="DIR">2</title></block>'+u("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},v.k1_5=(0,a.extend)(v.octopus_happy,{isK1:!0,toolbox:l(b+u("studio_setSpriteEmotion"))}),v.c3_story_5=(0,a.extend)(v.octopus_happy,{}),v.c3_story_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:l(u("studio_setSprite")+u("studio_setBackground")+u("studio_whenSpriteClicked")+u("studio_whenSpriteCollided")+u("studio_repeatForever")+u("studio_showTitleScreen")+u("studio_move")+u("studio_moveDistance")+u("studio_stop")+u("studio_wait")+u("studio_playSound")+u("studio_saySprite")+u("studio_throw")+u("studio_setSpritePosition")+u("studio_setSpriteSpeed")+u("studio_setSpriteEmotion")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},v.move_penguin={ideal:8,requiredBlocks:[[{test:"move",type:"studio_move"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,16,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,toolbox:l(u("studio_move")+u("studio_saySprite")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20"></block>     <block type="studio_whenRight" deletable="false" x="180" y="20"></block>     <block type="studio_whenUp" deletable="false" x="20" y="120"></block>     <block type="studio_whenDown" deletable="false" x="180" y="120"></block>'},v.c2_6=(0,a.extend)(v.move_penguin,{}),v.c3_game_2=(0,a.extend)(v.move_penguin,{}),v.playlab_6=(0,a.extend)(v.move_penguin,{background:"cave",firstSpriteIndex:5,goalOverride:{goalImage:"red_fireball",successImage:"blue_fireball",imageWidth:800},defaultEmotion:o.Emotions.ANGRY,toolbox:l(u("studio_move",{DIR:8})+u("studio_move",{DIR:2})+u("studio_move",{DIR:1})+u("studio_move",{DIR:4})),map:[[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0]]}),v.iceage_move_events=(0,a.extend)(v.playlab_6,{background:"icy5",firstSpriteIndex:2,goalOverride:{}}),v.gumball_click_hello=(0,a.extend)(v.playlab_5,{background:"characters",firstSpriteIndex:1}),v.gumball_move_events=(0,a.extend)(v.playlab_6,{background:"cornered",firstSpriteIndex:3,goalOverride:{},defaultEmotion:o.Emotions.NORMAL}),v.dino_up_and_down={ideal:11,requiredBlocks:[[{test:"moveDistance",type:"studio_moveDistance",titles:{SPRITE:"1",DISTANCE:"400"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,protagonistSpriteIndex:1,timeoutFailureTick:150,minWorkspaceHeight:800,toolbox:l('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block><block type="studio_saySprite">          <title name="SPRITE">1</title></block>'),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540"></block>'},v.c2_7=(0,a.extend)(v.dino_up_and_down,{}),v.c3_game_3=(0,a.extend)(v.dino_up_and_down,{}),v.playlab_7={ideal:3,background:"rainbow",firstSpriteIndex:10,scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],defaultEmotion:o.Emotions.HAPPY,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],goal:{successCondition:function(){return 252===Studio.tickCount}},timeoutFailureTick:253,minWorkspaceHeight:800,toolbox:l('<block type="studio_moveDistance"><title name="DIR">1</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">2</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">4</title><title name="DISTANCE">400</title></block><block type="studio_moveDistance"><title name="DIR">8</title><title name="DISTANCE">400</title></block>'),startBlocks:'<block type="studio_repeatForever" deletable="false" x="20" y="20"></block>',requiredBlocks:[[{test:function(e){return"studio_moveDistance"===e.type&&"2"===e.getFieldValue("DIR")},type:"studio_moveDistance",titles:{DIR:2,DISTANCE:"400"}}],[{test:function(e){return"studio_moveDistance"===e.type&&"8"===e.getFieldValue("DIR")},type:"studio_moveDistance",titles:{DIR:8,DISTANCE:"400"}}]]},v.iceage_repeat=(0,a.extend)(v.playlab_7,{background:"icy1",firstSpriteIndex:4,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),v.gumball_repeat=(0,a.extend)(v.playlab_7,{background:"dots",firstSpriteIndex:4,defaultEmotion:o.Emotions.NORMAL,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}),v.penguin_ouch={ideal:14,requiredBlocks:[c({sprite:"0",requiredText:n.default.ouchExclamation()}),[{test:"playSound",type:"studio_playSound"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:900,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},timeoutFailureTick:300,toolbox:l('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+u("studio_saySprite")+u("studio_playSound")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730"></block>'},v.c2_8=(0,a.extend)(v.penguin_ouch,{}),v.c3_game_4=(0,a.extend)(v.penguin_ouch,{}),v.penguin_touch_octopus={ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1050,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:l('<block type="studio_moveDistance">          <title name="DISTANCE">400</title>          <title name="SPRITE">1</title></block>'+u("studio_saySprite")+u("studio_playSound")+u("studio_changeScore")),startBlocks:'<block type="studio_whenLeft" deletable="false" x="20" y="20">       <next><block type="studio_move">               <title name="DIR">8</title></block>       </next></block>     <block type="studio_whenRight" deletable="false" x="20" y="150">       <next><block type="studio_move">               <title name="DIR">2</title></block>       </next></block>     <block type="studio_whenUp" deletable="false" x="20" y="280">       <next><block type="studio_move">               <title name="DIR">1</title></block>       </next></block>     <block type="studio_whenDown" deletable="false" x="20" y="410">       <next><block type="studio_move">               <title name="DIR">4</title></block>       </next></block>     <block type="studio_repeatForever" deletable="false" x="20" y="540">       <statement name="DO"><block type="studio_moveDistance">               <title name="SPRITE">1</title>               <title name="DISTANCE">400</title>         <next><block type="studio_moveDistance">                 <title name="SPRITE">1</title>                 <title name="DISTANCE">400</title>                 <title name="DIR">4</title></block>         </next></block>     </statement></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="730">       <next><block type="studio_playSound">       <next><block type="studio_saySprite">               <title name="TEXT">Ouch!</title></block>       </next></block>       </next></block>     <block type="studio_whenSpriteCollided" deletable="false" x="20" y="860">      <title name="SPRITE2">2</title></block>'},v.c2_9=(0,a.extend)(v.penguin_touch_octopus,{}),v.c3_game_5=(0,a.extend)(v.penguin_touch_octopus,{}),v.playlab_8={background:"rainbow",ideal:16,requiredBlocks:[[{test:"changeScore",type:"studio_changeScore"}],[{test:"playSound",type:"studio_playSound",titles:{SOUND:"winpoint"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],avatarList:["unicorn","wizard"],defaultEmotion:o.Emotions.HAPPY,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1===Studio.playerScore},failureCondition:function(){return Studio.sprite[0].isCollidingWith(1)&&1!==Studio.playerScore}},timeoutFailureTick:600,toolbox:l(u("studio_changeScore")+'<block type="studio_playSound"><title name="SOUND">winpoint</title></block>'),startBlocks:'<block type="studio_whenSpriteCollided" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+r.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:2,DISTANCE:400},u("studio_moveDistance",{SPRITE:1,DIR:8,DISTANCE:400}))+'</statement></block><block type="studio_whenLeft" deletable="false" x="20" y="300"><next>'+u("studio_move",{SPRITE:0,DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="400"><next>'+u("studio_move",{SPRITE:0,DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="500"><next>'+u("studio_move",{SPRITE:0,DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="600"><next>'+u("studio_move",{SPRITE:0,DIR:4})+"</next></block>"},v.iceage_sound_and_points=(0,a.extend)(v.playlab_8,{background:"icy2",avatarList:["sid","granny"]}),v.gumball_sound_and_points=(0,a.extend)(v.playlab_8,{background:"wood",avatarList:["bananajoe","anton"],delayCompletion:500,defaultEmotion:o.Emotions.NORMAL}),v.change_background_and_speed={ideal:19,requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"night"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,16,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:2,minWorkspaceHeight:1250,goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(2)}},timeoutFailureTick:600,toolbox:l(u("studio_setBackground",{VALUE:'"night"'})+u("studio_moveDistance",{DISTANCE:400,SPRITE:1})+u("studio_saySprite")+u("studio_playSound")+u("studio_changeScore")+u("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_whenLeft" deletable="false" x="20" y="200"><next>'+u("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="330"><next>'+u("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="460"><next>'+u("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="590"><next>'+u("studio_move",{DIR:4})+'</next></block><block type="studio_repeatForever" deletable="false" x="20" y="720"><statement name="DO">'+r.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},u("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="880"><title name="SPRITE2">1</title><next>'+r.default.blockWithNext("studio_playSound",{},u("studio_saySprite",{TEXT:n.default.ouchExclamation()}))+'</next></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="1040"><title name="SPRITE2">2</title><next>'+u("studio_changeScore")+"</next></block>"},v.c2_10=(0,a.extend)(v.change_background_and_speed,{}),v.c3_game_6=(0,a.extend)(v.change_background_and_speed,{}),v.playlab_9={background:"black",requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"space"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],timeoutFailureTick:400,scale:{snapRadius:2},defaultEmotion:o.Emotions.ANGRY,softButtons:["leftButton","rightButton","downButton","upButton"],avatarList:["spacebot","alien"],goal:{successCondition:function(){return Studio.sprite[0].isCollidingWith(1)}},map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,0,16,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:l(u("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+u("studio_setBackground",{VALUE:'"space"'})+u("studio_moveDistance",{DISTANCE:400,SPRITE:1})+u("studio_saySprite")+u("studio_playSound",{SOUND:"winpoint2"})+u("studio_changeScore")),minWorkspaceHeight:1250,startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+r.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},u("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+r.default.blockWithNext("studio_playSound",{SOUND:"winpoint2"},u("studio_saySprite",{TEXT:n.default.alienInvasion()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+u("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+u("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+u("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+u("studio_move",{DIR:4})+"</next></block>"},v.iceage_warn_ice_age=(0,a.extend)(v.playlab_9,{background:"ground",toolbox:l(u("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+u("studio_setBackground",{VALUE:'"icy5"'})+u("studio_moveDistance",{DISTANCE:400,SPRITE:1})+u("studio_saySprite")+u("studio_playSound",{SOUND:"winpoint2"})+u("studio_changeScore")),requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"grassy"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],avatarList:["sid","diego"],startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+r.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},u("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+r.default.blockWithNext("studio_playSound",{SOUND:"winpoint2"},u("studio_saySprite",{TEXT:n.default.iceAge()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+u("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+u("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+u("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+u("studio_move",{DIR:4})+"</next></block>"}),v.gumball_warn_food_fight=(0,a.extend)(v.playlab_9,{background:"dots",delayCompletion:500,defaultEmotion:o.Emotions.NORMAL,toolbox:l(u("studio_setSpriteSpeed",{VALUE:"Studio.SpriteSpeed.FAST"})+u("studio_setBackground",{VALUE:'"characters"'})+u("studio_moveDistance",{DISTANCE:400,SPRITE:1})+u("studio_saySprite")+u("studio_playSound",{SOUND:"winpoint2"})+u("studio_changeScore")),requiredBlocks:[[{test:"setBackground",type:"studio_setBackground",titles:{VALUE:'"characters"'}}],[{test:"setSpriteSpeed",type:"studio_setSpriteSpeed",titles:{VALUE:"Studio.SpriteSpeed.FAST"}}]],avatarList:["darwin","penny"],startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block><block type="studio_repeatForever" deletable="false" x="20" y="150"><statement name="DO">'+r.default.blockWithNext("studio_moveDistance",{SPRITE:1,DIR:1,DISTANCE:400},u("studio_moveDistance",{SPRITE:1,DIR:4,DISTANCE:400}))+'</statement></block><block type="studio_whenSpriteCollided" deletable="false" x="20" y="290"><title name="SPRITE2">0</title><title name="SPRITE2">1</title><next>'+r.default.blockWithNext("studio_playSound",{SOUND:"winpoint2"},u("studio_saySprite",{TEXT:n.default.foodFight()}))+'</next></block><block type="studio_whenLeft" deletable="false" x="20" y="410"><next>'+u("studio_move",{DIR:8})+'</next></block><block type="studio_whenRight" deletable="false" x="20" y="510"><next>'+u("studio_move",{DIR:2})+'</next></block><block type="studio_whenUp" deletable="false" x="20" y="610"><next>'+u("studio_move",{DIR:1})+'</next></block><block type="studio_whenDown" deletable="false" x="20" y="710"><next>'+u("studio_move",{DIR:4})+"</next></block>"}),v.gumball_join_food_fight={background:"wood",delayCompletion:2e3,requiredBlocks:[[{test:"setSpriteEmotion",type:"studio_setSpriteEmotion"}],[{test:"throw",type:"studio_throw"}]],timeoutFailureTick:300,scale:{snapRadius:2},defaultEmotion:o.Emotions.NORMAL,avatarList:["bananajoe","anton"],map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[16,0,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],toolbox:l(u("studio_whenSpriteCollided",{SPRITE1:1,SPRITE2:"anything"})+u("studio_setSpriteEmotion",{SPRITE:1})+u("studio_throw",{SPRITE:0,DIR:2})+u("studio_playSound")+u("studio_saySprite")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>',progressConditions:[{required:{setEmotion:!0,throwProjectile:!0},result:{success:!0}},{required:{timedOut:!0},result:{success:!1}}]},v.iceage_throw_hearts=(0,a.extend)(v.gumball_join_food_fight,{background:"icy3",avatarList:["sid","granny"]}),v.sandbox={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!1,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:l(u("studio_setSprite")+u("studio_setBackground")+u("studio_whenArrow")+u("studio_whenSpriteClicked")+u("studio_whenSpriteCollided")+u("studio_repeatForever")+u("studio_showTitleScreen")+u("studio_move")+u("studio_moveDistance")+u("studio_stop")+u("studio_wait")+u("studio_playSound")+u("studio_changeScore")+u("studio_saySprite")+u("studio_setSpritePosition")+u("studio_throw")+u("studio_makeProjectile")+u("studio_setSpriteSpeed")+u("studio_setSpriteEmotion")+u("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},v.c2_11=(0,a.extend)(v.sandbox,{}),v.c3_game_7=(0,a.extend)(v.sandbox,{}),v.playlab_10=(0,a.extend)(v.sandbox,{appStringsFunctions:{continueText:n.default.playlab_lastLevel_continueText}}),v.iceage_free_play=(0,a.extend)(v.playlab_10,{appStringsFunctions:{continueText:n.default.playlab_lastLevel_continueText}}),v.gumball_free_play=(0,a.extend)(v.playlab_10,{appStringsFunctions:{continueText:n.default.playlab_lastLevel_continueText}}),v.k1_6={ideal:1/0,requiredBlocks:[],scale:{snapRadius:2},minWorkspaceHeight:1500,spritesHiddenToStart:!0,freePlay:!0,map:[[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,0,16,0,16,0,16,0],[0,16,0,16,0,16,0,0],[16,16,16,16,16,16,16,0],[0,0,0,0,0,0,0,0]],isK1:!0,softButtons:[],toolbox:l(u("studio_setSprite")+u("studio_saySprite")+b+u("studio_whenSpriteCollided")+u("studio_setBackground")+u("studio_setSpriteSpeed")+u("studio_setSpriteEmotion")+u("studio_playSound")+u("studio_vanish")),startBlocks:'<block type="when_run" deletable="false" x="20" y="20">      <next><block type="studio_setSprite">         <title name="SPRITE">0</title></block>       </next></block>'},v.k1_block_test=(0,a.extend)(v[99],{toolbox:l(u("studio_setSprite")+u("studio_moveNorth")+u("studio_moveSouth")+u("studio_moveEast")+u("studio_moveWest")+u("studio_moveNorth_length")+u("studio_moveSouth_length")+u("studio_moveEast_length")+u("studio_moveWest_length")),isK1:!0}),v.full_sandbox={scrollbars:!0,requiredBlocks:[],scale:{snapRadius:2},softButtons:["leftButton","rightButton","downButton","upButton"],minWorkspaceHeight:1400,edgeCollisions:!0,projectileCollisions:!0,allowSpritesOutsidePlayspace:!0,spritesHiddenToStart:!0,freePlay:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],toolbox:l(d(n.default.catActions(),u("studio_setSprite")+u("studio_setBackground")+'<block type="studio_showTitleScreenParams">                         <value name="TITLE"><block type="text"></block>                         </value>                         <value name="TEXT"><block type="text"></block>                         </value></block>'+u("studio_move")+'<block type="studio_moveDistanceParams" inline="true">                       <value name="DISTANCE"><block type="math_number">                               <title name="NUM">25</title></block>                       </value></block>'+u("studio_stop")+'<block type="studio_waitParams" inline="true">                         <value name="VALUE"><block type="math_number">                                 <title name="NUM">1</title></block>                         </value></block>'+u("studio_playSound")+'<block type="studio_setScoreText" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block><block type="studio_saySpriteParams" inline="true">                         <value name="TEXT"><block type="text"></block>                         </value></block>'+u("studio_setSpritePosition")+u("studio_addCharacter")+u("studio_throw")+u("studio_makeProjectile")+u("studio_setSpriteSpeed")+u("studio_setSpriteEmotion")+u("studio_vanish")+u("studio_setSpriteSize")+u("studio_showCoordinates"))+d(n.default.catEvents(),u("studio_whenArrow")+u("studio_whenSpriteClicked")+u("studio_whenSpriteCollided"))+d(n.default.catControl(),u("studio_repeatForever")+'<block type="controls_repeat_ext">                           <value name="TIMES">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                         </block>'+u("controls_whileUntil")+'<block type="controls_for">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">10</title>                             </block>                           </value>                           <value name="BY">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block>'+u("controls_flow_statements"))+d(n.default.catLogic(),u("controls_if")+u("logic_compare")+u("logic_operation")+u("logic_negate")+u("logic_boolean"))+d(n.default.catMath(),u("math_number")+'<block type="math_change">                           <value name="DELTA">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                         </block><block type="math_random_int">                           <value name="FROM">                             <block type="math_number">                               <title name="NUM">1</title>                             </block>                           </value>                           <value name="TO">                             <block type="math_number">                               <title name="NUM">100</title>                             </block>                           </value>                         </block>'+u("math_arithmetic"))+d(n.default.catText(),u("text")+u("text_join")+'<block type="text_append">                           <value name="TEXT">                             <block type="text"></block>                           </value>                         </block>')+d(n.default.catVariables(),"","VARIABLE")+d(n.default.catProcedures(),"","PROCEDURE")+d("Functional",u("functional_string")+u("functional_background_string_picker")+u("functional_math_number")+'<block type="functional_math_number_dropdown"><title name="NUM" config="2,3,4,5,6,7,8,9,10,11,12">???</title></block>')+d("Functional Start",u("functional_start_setSpeeds")+u("functional_start_setBackgroundAndSpeeds"))+d("Functional Logic",u("functional_greater_than")+u("functional_less_than")+u("functional_number_equals")+u("functional_string_equals")+u("functional_logical_and")+u("functional_logical_or")+u("functional_logical_not")+u("functional_boolean"))),startBlocks:'<block type="when_run" deletable="false" x="20" y="20"></block>'},v.full_sandbox_infinity=(0,a.extend)(v.full_sandbox,{}),v.ec_sandbox=(0,a.extend)(v.sandbox,{editCode:!0,map:[[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,16,0,0,0,16,0,0],[0,0,0,0,0,0,0,0]],codeFunctions:{setSprite:{category:"Play Lab",noAutocomplete:!1},setBackground:{category:"Play Lab"},move:{category:"Play Lab",noAutocomplete:!1},playSound:{category:"Play Lab"},changeScore:{category:"Play Lab",noAutocomplete:!1},setSpritePosition:{category:"Play Lab",noAutocomplete:!1},setSpriteSpeed:{category:"Play Lab",noAutocomplete:!1},setSpriteEmotion:{category:"Play Lab",noAutocomplete:!1},setSpriteSize:{category:"Play Lab",noAutocomplete:!1},throwProjectile:{category:"Play Lab",noAutocomplete:!1},vanish:{category:"Play Lab",noAutocomplete:!1},onEvent:{category:"Play Lab",noAutocomplete:!1},forLoop_i_0_4:null,ifBlock:null,ifElseBlock:null,whileBlock:null,addOperator:null,subtractOperator:null,multiplyOperator:null,divideOperator:null,equalityOperator:null,inequalityOperator:null,greaterThanOperator:null,lessThanOperator:null,andOperator:null,orOperator:null,notOperator:null,randomNumber_max:null,randomNumber_min_max:null,mathRound:null,mathAbs:null,mathMax:null,mathMin:null,declareAssign_x:null,assign_x:null,declareAssign_x_array_1_4:null,declareAssign_x_prompt:null,functionParams_none:null,functionParams_n:null,callMyFunction:null,callMyFunction_n:null},startBlocks:""}),v.js_hoc2015_move_right={instructionsImportant:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song1"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[16908288,16908288,0,0,0,0,0,0],[16908288,16908288,0,65536,131072,1048576,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1048576,65536,1179648,0,0],[0,17956864,17956864,0,0,0,0,1048576],[0,17956864,17956864,0,0,0,0,0]],shortInstructions:n.default.hoc2015_move_right_instructions(),ticksBeforeFaceSouth:9,timeoutFailureTick:100,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},callouts:[{id:"playlab:js_hoc2015_move_right:runButton",element_id:"#runButton",qtip_config:{content:{text:n.default.calloutMoveRightRunButton()},position:{my:"bottom left",at:"top center",adjust:{x:0,y:0}}}}],progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:n.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:n.default.failedHasAllGoals()}}]},v.js_hoc2015_move_right_down={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song2"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[17825792,17825792,0,0,0,0,0,0],[17825792,17825792,0,16,0,1,0,0],[0,0,0,16842752,16842752,0,0,0],[0,0,0,16842752,16842752,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],shortInstructions:n.default.hoc2015_move_right_down_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:n.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:n.default.failedHasAllGoals()}}]},v.js_hoc2015_move_backtrack={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song3"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,65536,1,131072,0,0],[0,0,0,16,0,1,0,0],[0,0,0,0,0,0,0,0],[0,17825792,17825792,0,0,0,0,0],[0,17825792,17825792,0,0,0,0,0],[0,0,32,0,0,0,0,0]],shortInstructions:n.default.hoc2015_move_backtrack_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:n.default.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:n.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:n.default.failedHasAllGoals()}}]},v.js_hoc2015_move_diagonal={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,textModeAtStart:!0,background:"main",music:["song4"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveDown();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,65536,16,0,0],[0,17825792,17825792,0,1,0,0,0],[0,17825792,17825792,1,2359296,2424832,0,0],[0,32,1,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,20185088,20185088,20250624,20250624,0],[0,0,0,20185088,20185088,20250624,20250624,0]],embed:"false",shortInstructions:n.default.hoc2015_move_diagonal_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal1"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:n.default.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:n.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:n.default.failedHasAllGoals()}}],callouts:[{id:"playlab:js_hoc2015_move_diagonal:showCodeToggle",element_id:"#show-code-header",qtip_config:{content:{text:n.default.calloutShowCodeToggle()},position:{my:"top right",at:"bottom left",adjust:{x:0,y:0}}}}]},v.js_hoc2015_move_around={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,textModeAtStart:!0,background:"main",music:["song9"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveRight();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,1,65536,0],[0,0,0,262144,131072,0,0,0],[0,0,32,1310720,0,1,0,32],[17956864,17956864,0,0,1,0,0,0],[17956864,17956864,0,0,0,0,0,0],[0,32,0,0,0,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_move_around_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:n.default.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:n.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:n.default.failedHasAllGoals()}}]},v.js_hoc2015_move_finale={editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,background:"main",music:["song8"],codeFunctions:{moveRight:null,moveLeft:null,moveUp:null,moveDown:null},startBlocks:["moveDown();",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!1,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,32,16,131072,1,1048576,0,0],[0,0,0,1,0,1,32,0],[0,0,1,1179648,0,0,0,0],[0,0,0,0,32,0,16908288,16908288],[0,16842752,16842752,0,0,0,16908288,16908288],[0,16842752,16842752,0,0,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_move_finale_instructions(),ticksBeforeFaceSouth:9,timeoutAfterWhenRun:!0,goalOverride:{goalImage:"goal2"},progressConditions:[{required:{touchedHazardsAtOrAbove:1},result:{success:!1,message:n.default.failedAvoidHazard(),pauseInterpreter:!0}},{required:{allGoalsVisited:!0},result:{success:!0,message:n.default.successHasAllGoals()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:n.default.failedHasAllGoals()}}],callouts:[{id:"playlab:js_hoc2015_move_finale:showCodeToggle",element_id:"#show-code-header",qtip_config:{content:{text:n.default.calloutShowCodeCanToggle()},position:{my:"top right",at:"bottom left",adjust:{x:15,y:0}}}}]},v.js_hoc2015_event_two_items={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"hoth",music:["song7"],wallMap:"blank",softButtons:["downButton","upButton"],codeFunctions:{goUp:null,goDown:null,whenUp:null,whenDown:null},startBlocks:["function whenUp() {","  ","}","function whenDown() {","  ","}"].join("\n"),removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],pinWorkspaceToBottom:"true",embed:"false",shortInstructions:n.default.hoc2015_event_two_items_instructions(),instructions2:n.default.hoc2015_event_two_items_instructions2(),timeoutFailureTick:600,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal",goalRenderOffsetX:0},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:n.default.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:n.default.failedTwoItemsTimeout(),blocklyMessage:n.default.failedTwoItemsTimeoutBlockly()}}],callouts:[{id:"playlab:js_hoc2015_event_two_items:placeCommandsHere",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:n.default.calloutShowPlaceGoUpHere()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom right",adjust:{x:30,y:-10}}}},{id:"playlab:js_hoc2015_event_two_items:arrowsCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:n.default.calloutUseArrowButtons()},position:{my:"bottom left",at:"top center"}}}]},v.js_hoc2015_event_four_items={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"hoth",music:["song5"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{goRight:null,goLeft:null,goUp:null,goDown:null,whenLeft:null,whenRight:null,whenUp:null,whenDown:null},startBlocks:["function whenUp() {","  ","}","function whenDown() {","  ","}"].join("\n"),removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_event_four_items_instructions(),instructions2:n.default.hoc2015_event_four_items_instructions2(),timeoutFailureTick:1350,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal"},progressConditions:[{required:{allGoalsVisited:!0},result:{success:!0,message:n.default.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:n.default.failedFourItemsTimeout(),blocklyMessage:n.default.failedFourItemsTimeoutBlockly()}}]},v.js_hoc2015_score={lockZeroParamFunctions:!0,avatarList:["R2-D2"],autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,editCode:!0,background:"hoth",music:["song6"],wallMap:"circle",softButtons:["leftButton","rightButton","downButton","upButton"],autohandlerOverrides:{whenGetRebelPilot:"whenTouchGoal"},codeFunctions:{playSound:null,addPoints:{params:["100"]},whenGetRebelPilot:null},startBlocks:["function whenGetRebelPilot() {",'  playSound("R2-D2random");',"}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,edgeCollisions:"true",map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,16,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]],shortInstructions:n.default.hoc2015_score_instructions(),instructions2:n.default.hoc2015_score_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(0, 0, 0, 0.5)",goalOverride:{goalAnimation:"animatedGoal"},goal:{successCondition:function(){return!1}},progressConditions:[{required:{allGoalsVisited:!0,currentPointsAtOrAbove:900},result:{success:!0,message:n.default.successCharacter1()}},{required:{timedOut:!0,allGoalsVisited:!1},result:{success:!1,message:n.default.failedScoreTimeout()}},{required:{allGoalsVisited:!0},result:{success:!1,message:n.default.failedScoreScore(),blocklyMessage:n.default.failedScoreScoreBlockly()}}],completeOnSuccessConditionNotGoals:!0,callouts:[{id:"playlab:js_hoc2015_score:arrowsAutoSteerCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:n.default.calloutUseArrowButtonsAutoSteer()},position:{my:"bottom left",at:"top center"}}},{id:"playlab:js_hoc2015_score:placeCommandsAtTop",element_id:".droplet-gutter-line:nth-of-type(2)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:n.default.calloutShowPlaySound()},hide:{event:"mouseup touchend"},position:{my:"top center",at:"bottom center",adjust:{x:170,y:0}}}}]},v.js_hoc2015_win_lose={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"endor",music:["song9"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{playSound:null,addPoints:{params:["100"]},removePoints:{params:["100"]},whenGetRebelPilot:null,whenGetStormtrooper:null,whenGetMynock:null},startBlocks:[].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,64,64,0,0,0],[2048,0,0,0,0,0,0,2048],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,256,0,0,0,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_win_lose_instructions(),instructions2:n.default.hoc2015_win_lose_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_win_lose:instructions",element_id:"#prompt-table",qtip_config:{content:{text:n.default.calloutInstructions()},position:{my:"bottom left",at:"top right",adjust:{x:-40,y:0}}}}],progressConditions:[{required:{gotAllItems:!0,currentPointsBelow:200},result:{message:n.default.failedWinLoseScore(),blocklyMessage:n.default.failedWinLoseScoreBlockly()}},{required:{timedOut:!0,collectedItemsBelow:2,currentPointsBelow:200},result:{success:!1,message:n.default.failedWinLoseTimeout()}},{required:{timedOut:!0,collectedItemsAtOrAbove:2,currentPointsBelow:200},result:{success:!1,message:n.default.failedWinLoseScore(),blocklyMessage:n.default.failedWinLoseScoreBlockly()}},{required:{timedOut:!0,collectedItemsBelow:2,currentPointsAtOrAbove:200},result:{success:!1,message:n.default.failedWinLoseGoals(),blocklyMessage:n.default.failedWinLoseGoalsBlockly()}},{required:{collectedItemsAtOrAbove:2,currentPointsAtOrAbove:200},result:{success:!0,message:n.default.successCharacter1()}}]},v.js_hoc2015_add_characters={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"endor",music:["song11"],wallMap:"circle",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"PufferPig"']},addPoints:{params:["1000"]},removePoints:{params:["1000"]},playSound:null,whenGetPufferPig:null},startBlocks:['playSound("R2-D2sound1");','addCharacter("PufferPig");',"","function whenGetPufferPig() {",'  playSound("PufferPigRandom");',"  addPoints(1000);","}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,PufferPigRandom:!0,PufferPigSound1:!0,PufferPigSound2:!0,PufferPigSound3:!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_add_characters_instructions(),instructions2:n.default.hoc2015_add_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_add_characters:calloutPutCommandsHereRunStart",element_id:".droplet-gutter-line:nth-of-type(3)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:n.default.calloutPutCommandsHereRunStart()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"center right"}}}],progressConditions:[{required:{createdSpecificItemsBelow:{className:"pufferpig",count:3}},result:{success:!1,message:n.default.failedAddCharactersTimeout(),blocklyMessage:n.default.failedAddCharactersTimeoutBlockly()}},{required:{collectedSpecificItemsAtOrAbove:{className:"pufferpig",count:3}},result:{success:!0,message:n.default.successCharacter1()}},{required:{timedOut:!0},result:{success:!1,message:n.default.failedAddCharactersTimeout(),blocklyMessage:n.default.failedAddCharactersTimeoutBlockly()}}]},v.js_hoc2015_chain_characters={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song13"],wallMap:"horizontal",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"Mynock"']},addPoints:null,removePoints:null,playSound:null,whenGetTauntaun:null,whenGetMynock:null},startBlocks:['addCharacter("Tauntaun");','addCharacter("Tauntaun");','addCharacter("Tauntaun");','addCharacter("Tauntaun");',"","function whenGetTauntaun() {",'  playSound("TauntaunRandom");',"  addPoints(50);","","}"].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,TauntaunRandom:!0,TauntaunSound1:!0,TauntaunSound2:!0,TauntaunSound3:!0,TauntaunSound4:!0,MynockRandom:!0,MynockSound1:!0,MynockSound2:!0,MynockSound3:!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_chain_characters_instructions(),instructions2:n.default.hoc2015_chain_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1800,showTimeoutRect:"rgba(255, 255, 255, 0.5)",progressConditions:[{required:{collectedSpecificItemsAtOrAbove:{className:"mynock",count:8}},result:{success:!0,message:n.default.successCharacter1()}},{required:{timedOut:!0,collectedSpecificItemsAtOrAbove:{className:"mynock",count:5}},result:{success:!1,canPass:!0,message:n.default.failedChainCharactersTimeoutGotSome()}},{required:{collectedSpecificItemsAtOrAbove:{className:"tauntaun",count:4},createdSpecificItemsBelow:{className:"mynock",count:5}},result:{success:!1,message:n.default.failedChainCharactersTimeout()}},{required:{timedOut:!0},result:{success:!1,message:n.default.failedChainCharactersTimeout()}}],callouts:[{id:"playlab:js_hoc2015_chain_characters:calloutPlaceTwoWhenTauntaun",element_id:".droplet-gutter-line:nth-of-type(9)",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:n.default.calloutPlaceTwoWhenTauntaun()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom center",adjust:{x:65,y:0}}}}]},v.js_hoc2015_multiply_characters={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song12"],wallMap:"grid",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{addCharacter:{params:['"MouseDroid"']},playSound:null,addPoints:null,removePoints:null,whenGetMouseDroid:null},startBlocks:['addCharacter("MouseDroid");','playSound("R2-D2sound3");'].join("\n"),paramRestrictions:{playSound:{random:!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,MouseDroidRandom:!0,MouseDroidSound1:!0,MouseDroidSound2:!0,MouseDroidSound3:!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_multiply_characters_instructions(),instructions2:n.default.hoc2015_multiply_characters_instructions2(),autoArrowSteer:!0,timeoutFailureTick:2250,showTimeoutRect:"rgba(255, 255, 255, 0.5)",progressConditions:[{required:{collectedItemsAtOrAbove:20},result:{success:!0,message:n.default.successCharacter1()}},{required:{collectedSpecificItemsAtOrAbove:{className:"mousedroid",count:1},createdSpecificItemsBelow:{className:"mousedroid",count:2}},result:{success:!1,message:n.default.failedMultiplyCharactersTimeout()}},{required:{timedOut:!0,collectedItemsAtOrAbove:2},result:{success:!1,canPass:!0,message:n.default.failedMultiplyCharactersTimeoutGotSome()}},{required:{timedOut:!0},result:{success:!1,message:n.default.failedMultiplyCharactersTimeout(),blocklyMessage:n.default.failedMultiplyCharactersTimeoutBlockly()}}],callouts:[{id:"playlab:js_hoc2015_multiply_characters:calloutPlaceTwo",element_id:"#droplet_palette_block_whenGetMouseDroid",hide_target_selector:".droplet-drag-cover",qtip_config:{content:{text:n.default.calloutPlaceTwo()},hide:{event:"mouseup touchend"},position:{my:"top left",at:"bottom center"}}}]},v.js_hoc2015_change_setting={lockZeroParamFunctions:!0,editCode:!0,autocompletePaletteApisOnly:!0,executePaletteApisOnly:!0,preventUserDefinedFunctions:!0,background:"starship",music:["song14"],wallMap:"blobs",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{setDroid:{params:['"C-3PO"']},setBackground:null,setDroidSpeed:null,setMap:null,playSound:null,addCharacter:null,addPoints:null,removePoints:null,whenGetRebelPilot:null},startBlocks:['addCharacter("RebelPilot");','addCharacter("RebelPilot");','addCharacter("RebelPilot");',"",'setBackground("random");','setMap("random");',""].join("\n"),paramRestrictions:{playSound:{random:!0,"C-3POrandom":!0,"C-3POsound1":!0,"C-3POsound2":!0,"C-3POsound3":!0,"C-3POsound4":!0,"R2-D2random":!0,"R2-D2sound1":!0,"R2-D2sound2":!0,"R2-D2sound3":!0,"R2-D2sound4":!0,PufferPigRandom:!0,PufferPigSound1:!0,PufferPigSound2:!0,PufferPigSound3:!0,TauntaunRandom:!0,TauntaunSound1:!0,TauntaunSound2:!0,TauntaunSound3:!0,MouseDroidRandom:!0,MouseDroidSound1:!0,MouseDroidSound2:!0,MouseDroidSound3:!0,MynockRandom:!0,MynockSound1:!0,MynockSound2:!0,MynockSound3:!0,ProbotRandom:!0,ProbotSound1:!0,ProbotSound2:!0,ProbotSound3:!0}},itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_change_setting_instructions(),instructions2:n.default.hoc2015_change_setting_instructions2(),autoArrowSteer:!0,timeoutFailureTick:1350,showTimeoutRect:"rgba(255, 255, 255, 0.5)",callouts:[{id:"playlab:js_hoc2015_change_setting:setMap",element_id:"#droplet_palette_block_setDroid",qtip_config:{content:{text:n.default.calloutSetDroidAndSpeed()},position:{my:"center left",at:"center right"}}}],progressConditions:[{required:{setSprite:!0,setDroidSpeed:!0,collectedItemsAtOrAbove:3},result:{success:!0,message:n.default.successGenericCharacter()}},{required:{collectedItemsAtOrAbove:3},result:{success:!1,message:n.default.failedChangeSettingSettings()}},{required:{timedOut:!0},result:{success:!1,message:n.default.failedChangeSettingTimeout()}}]};var k,T,E=['<div class="js_hoc2015_event_free_markdown">','<p><span class="character-text">'+n.default.hoc2015_event_free_instructions()+"</span></p>","",'<p><span class="instructions2">'+n.default.hoc2015_event_free_instructions2()+"</span></p>","",'<details class="hoc2015">',"<summary>Example project ideas</summary>","<p><strong>Example 1</strong>","<br />Add five random characters in the scene, and play a different sound each time R2-D2 collides with one of them.</p>","","<p><strong>Example 2</strong>","<br />Add ten Stormtroopers to chase C-3PO. See if you can outrun them by running at high speed.</p>","","<p><strong>Example 3</strong>","<br />Make your droid move faster when he touches a Mouse Droid and slower when he touches a Stormtrooper.</p>","","</details>",'<details class="hoc2015">',"<summary>Extra credit project ideas</summary>","","<p><strong>Example 1</strong>","<br />Add a Mouse Droid and a Stormtrooper. Every time R2-D2 catches a Mouse Droid, score some points and then add another Mouse Droid and another Stormtrooper.  End the game if a Stormtrooper catches R2-D2.</p>","","</details>",'<details class="hoc2015">',"<summary>For JavaScript programmers</summary>","","You can create more complex JavaScript programs if you program in “text” mode. Feel free to use `for` loops, `if` statements, variables, or other JavaScript commands to make much more complex games. And _please_: document and share the code you wrote for others to learn too!","","</details>",'<details class="hoc2015">',"<summary>More about the characters</summary>","<p>Each character has a unique behavior:","<br/><br/>","","[pufferpig] <b>Puffer Pigs</b> roam around slowly<br/>","[tauntaun] <b>Tauntauns</b> roam around at a normal speed<br/>","[mynock] <b>Mynocks</b> fly around at a normal speed<br/>","[stormtrooper] <b>Stormtroopers</b> chase your droid slowly<br/>","[probot] <b>Probots</b> chase your droid quickly<br/>","[rebelpilot] <b>Rebel Pilots</b> flee at a normal speed<br/>","[mousedroid] <b>Mouse Droids</b> flee quickly<br/>","","<br/>","You can change the speed of any character with the moveFast, moveNormal, and moveSlow commands.","</p>","","</details>","</div>"].join("\r\n");v.js_hoc2015_event_free={lockZeroParamFunctions:!0,editCode:!0,freePlay:!0,background:"endor",music:["song15"],wallMap:"blank",softButtons:["leftButton","rightButton","downButton","upButton"],codeFunctions:{setDroid:{category:"Commands"},setBackground:{category:"Commands"},setDroidSpeed:{category:"Commands"},setMap:{category:"Commands"},playSound:{category:"Commands"},addCharacter:{category:"Commands"},moveSlow:{category:"Commands"},moveNormal:{category:"Commands"},moveFast:{category:"Commands"},addPoints:{category:"Commands"},removePoints:{category:"Commands"},endGame:{category:"Commands"},goRight:{category:"Commands"},goLeft:{category:"Commands"},goUp:{category:"Commands"},goDown:{category:"Commands"},whenLeft:{category:"Events"},whenRight:{category:"Events"},whenUp:{category:"Events"},whenDown:{category:"Events"},whenTouchObstacle:{category:"Events"},whenGetStormtrooper:{category:"Events"},whenGetRebelPilot:{category:"Events"},whenGetPufferPig:{category:"Events"},whenGetMynock:{category:"Events"},whenGetMouseDroid:{category:"Events"},whenGetTauntaun:{category:"Events"},whenGetProbot:{category:"Events"},whenGetCharacter:{category:"Events"},whenGetAllStormtroopers:{category:"Events"},whenGetAllRebelPilots:{category:"Events"},whenGetAllPufferPigs:{category:"Events"},whenGetAllMynocks:{category:"Events"},whenGetAllMouseDroids:{category:"Events"},whenGetAllTauntauns:{category:"Events"},whenGetAllProbots:{category:"Events"},whenGetAllCharacters:{category:"Events"}},startBlocks:['setBackground("Endor");','setMap("circle");','setDroid("R2-D2");','setDroidSpeed("normal");','playSound("R2-D2random");',"function whenUp() {","  goUp();","}","function whenDown() {","  goDown();","}","function whenLeft() {","  goLeft();","}","function whenRight() {","  goRight();","}",""].join("\n"),itemGridAlignedMovement:!0,removeItemsWhenActorCollides:!0,tapSvgToRunAndReset:!0,delayCompletion:2e3,floatingScore:!0,map:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,16,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],embed:"false",shortInstructions:n.default.hoc2015_event_free_instructions(),instructions2:n.default.hoc2015_event_free_instructions2(),longInstructions:E,markdownInstructionsWithClassicMargins:!0,callouts:[{id:"playlab:js_hoc2015_event_free:clickCategory",element_id:".droplet-palette-group-header.green",qtip_config:{content:{text:n.default.calloutClickEvents()},position:{my:"top center",at:"bottom center"}}},{id:"playlab:js_hoc2015_event_free:finishButton",element_id:"#finishButton",on:"finishButtonShown",qtip_config:{content:{text:n.default.calloutFinishButton()},position:{my:"center left",at:"center right"}}}],appStringsFunctions:{continueText:n.default.hoc2015_lastLevel_continueText,reinfFeedbackMsg:n.default.hoc2015_reinfFeedbackMsg,sharingText:n.default.hoc2015_shareGame},playStartSound:!1},v.hoc2015_blockly_1=(0,a.extend)(v.js_hoc2015_move_right,{instructionsImportant:!0,editCode:!1,enableShowCode:!0,startBlocks:_,toolbox:l(g),requiredBlocks:[S()],callouts:[{id:"playlab:blockly_hoc2015_move_right:runButton",element_id:"#runButton",qtip_config:{content:{text:n.default.calloutBlocklyMoveRightRunButton()},position:{my:"bottom left",at:"top center",adjust:{x:0,y:0}}}}]}),v.hoc2015_blockly_2=(0,a.extend)(v.js_hoc2015_move_right_down,{editCode:!1,enableShowCode:!0,startBlocks:_,toolbox:l(g),requiredBlocks:[S(),h()]}),v.hoc2015_blockly_3=(0,a.extend)(v.js_hoc2015_move_backtrack,{editCode:!1,enableShowCode:!0,startBlocks:_,toolbox:l(g),requiredBlocks:[S(),m()]}),v.hoc2015_blockly_4=(0,a.extend)(v.js_hoc2015_move_diagonal,{editCode:!1,enableShowCode:!0,callouts:null,startBlocks:y,toolbox:l(g),requiredBlocks:[h(),f()]}),v.hoc2015_blockly_5=(0,a.extend)(v.js_hoc2015_move_around,{editCode:!1,enableShowCode:!0,startBlocks:_,toolbox:l(g),requiredBlocks:[S(),h(),f()],callouts:[]}),v.hoc2015_blockly_6=(0,a.extend)(v.js_hoc2015_move_finale,{editCode:!1,enableShowCode:!0,startBlocks:y,toolbox:l(g),callouts:null,requiredBlocks:[m(),h(),S()]}),v.hoc2015_blockly_7=(0,a.extend)(v.js_hoc2015_event_two_items,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},startBlocks:'<block type="studio_whenUp" deletable="false" x="20" y="20"></block>   <block type="studio_whenDown" deletable="false" x="20" y="150"></block>',toolbox:l('<block type="studio_move"><title name="DIR">1</title></block>   <block type="studio_move"><title name="DIR">4</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_7:placeCommandsHere",element_id:'[block-id="3"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:n.default.calloutBlocklyPlaceMoveUpHere()},position:{my:"top left",at:"bottom left",adjust:{x:22,y:0}}}},{id:"playlab:hoc2015_blockly_7:arrowsCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:n.default.calloutUseArrowButtons()},position:{my:"bottom left",at:"top center"}}}]}),v.hoc2015_blockly_7_no_video=(0,a.extend)(v.hoc2015_blockly_7),v.hoc2015_blockly_8=(0,a.extend)(v.js_hoc2015_event_four_items,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},startBlocks:'<block type="studio_whenUp" deletable="false" x="20" y="20"></block>   <block type="studio_whenDown" deletable="false" x="20" y="150"></block>   <block type="studio_whenLeft" deletable="false" x="20" y="280"></block>   <block type="studio_whenRight" deletable="false" x="20" y="410"></block>',toolbox:l(g),requiredBlocks:[]}),v.hoc2015_blockly_9=(0,a.extend)(v.js_hoc2015_score,{editCode:!1,msgStringOverrides:{whenTouchGoal:"whenGetCharacterRebelPilot"},startBlocks:'<block type="studio_whenTouchGoal" deletable="false">       <next><block type="studio_playSound"><title name="SOUND">R2-D2random</title></block>       </next></block>',toolbox:l('<block type="studio_playSound"></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_9:arrowsAutoSteerCallout",element_id:"#upButton",hide_target_selector:"#soft-buttons",qtip_config:{content:{text:n.default.calloutUseArrowButtonsAutoSteer()},position:{my:"bottom left",at:"top center"}}},{id:"playlab:hoc2015_blockly_9:placeCommandsAtTop",element_id:'[block-id="4"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:n.default.calloutShowPlaySound()},position:{my:"top left",at:"bottom center"}}}]}),v.hoc2015_blockly_10=(0,a.extend)(v.js_hoc2015_win_lose,{editCode:!1,startBlocks:"",toolbox:l('<block type="studio_playSound"></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">rebelpilot</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">stormtrooper</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mynock</title></block>'),requiredBlocks:[]}),v.hoc2015_blockly_11=(0,a.extend)(v.js_hoc2015_add_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_playSound"><title name="SOUND">R2-D2sound1</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"pufferpig"</title></block>         </next>        </block>       </next>      </block>      <block type="studio_whenGetCharacter" deletable="false" x="20" y="200">       <title name="VALUE">pufferpig</title>       <next>        <block type="studio_playSound"><title name="SOUND">PufferPigRandom</title>         <next>          <block type="studio_addPoints"><title name="VALUE">1000</title></block>         </next>        </block>       </next>      </block>',toolbox:l('<block type="studio_addCharacter"><title name="VALUE">"pufferpig"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">pufferpig</title></block>'),callouts:[{id:"playlab:hoc2015_blockly_11:calloutPutCommandsHereRunStart",element_id:'[block-id="8"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:n.default.calloutPutCommandsHereRunStart()},position:{my:"top left",at:"bottom left",adjust:{x:22,y:0}}}}],requiredBlocks:[]}),v.hoc2015_blockly_12=(0,a.extend)(v.js_hoc2015_chain_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>           <next>            <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title>             <next>              <block type="studio_addCharacter"><title name="VALUE">"tauntaun"</title></block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>      <block type="studio_whenGetCharacter" deletable="false" x="20" y="180">       <title name="VALUE">tauntaun</title>       <next>        <block type="studio_playSound"><title name="SOUND">TauntaunRandom</title>         <next>          <block type="studio_addPoints"><title name="VALUE">50</title></block>         </next>        </block>       </next>      </block>',toolbox:l('<block type="studio_addCharacter"><title name="VALUE">"mynock"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">tauntaun</title></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mynock</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_12:calloutPlaceTwoWhenTauntaun",element_id:'[block-id="12"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:n.default.calloutPlaceTwoWhenTauntaun()},position:{my:"top left",at:"bottom center",adjust:{x:0,y:0}}}}]}),v.hoc2015_blockly_13=(0,a.extend)(v.js_hoc2015_multiply_characters,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title>         <next>          <block type="studio_playSound"><title name="SOUND">R2-D2sound3</title></block>         </next>        </block>       </next>      </block>',toolbox:l('<block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">mousedroid</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_13:calloutPlaceTwo",element_id:'[block-id="5"]',hide_target_selector:".blocklyDraggable",qtip_config:{content:{text:n.default.calloutPlaceTwo()},position:{my:"top left",at:"bottom center"}}}]}),v.hoc2015_blockly_14=(0,a.extend)(v.js_hoc2015_change_setting,{editCode:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>         <next>          <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>           <next>            <block type="studio_addCharacter"><title name="VALUE">"rebelpilot"</title>             <next>              <block type="studio_setBackground"><title name="VALUE">random</title>               <next>                <block type="studio_setMap"><title name="VALUE">random</title></block>               </next>              </block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>',toolbox:l('<block type="studio_setSprite"><title name="VALUE">"c-3po"</title></block>         <block type="studio_setDroidSpeed"><title name="VALUE">fast</title></block>         <block type="studio_setBackground"></block>         <block type="studio_setMap"></block>         <block type="studio_addCharacter"><title name="VALUE">"mousedroid"</title></block>         <block type="studio_addPoints"><title name="VALUE">100</title></block>         <block type="studio_removePoints"><title name="VALUE">100</title></block>         <block type="studio_playSound"></block>         <block type="studio_whenGetCharacter"><title name="VALUE">rebelpilot</title></block>'),requiredBlocks:[],callouts:[{id:"playlab:hoc2015_blockly_14:setMap",element_id:'[block-id="1"]',qtip_config:{content:{text:n.default.calloutSetDroidAndSpeed()},position:{my:"center left",at:"center right"}}}]}),v.hoc2015_blockly_15=(0,a.extend)(v.js_hoc2015_event_free,{editCode:!1,msgStringOverrides:{moveSprite:"goSprite"},longInstructions:null,markdownInstructionsWithClassicMargins:!1,startBlocks:'<block type="when_run" deletable="false" x="20" y="20">       <next>        <block type="studio_setBackground"><title name="VALUE">"endor"</title>         <next>          <block type="studio_setMap"><title name="VALUE">"circle"</title>           <next>            <block type="studio_setSprite"><title name="VALUE">"r2-d2"</title>             <next>              <block type="studio_setDroidSpeed"><title name="VALUE">normal</title>               <next>                <block type="studio_playSound"><title name="SOUND">R2-D2random</title></block>               </next>              </block>             </next>            </block>           </next>          </block>         </next>        </block>       </next>      </block>'+(k=200,T=80,'<block type="studio_whenUp" deletable="false" x="20" y="'+k.toString()+'"></block>     <block type="studio_whenDown" deletable="false" x="20" y="'+(T+k).toString()+'"></block>     <block type="studio_whenLeft" deletable="false" x="20" y="'+(2*T+k).toString()+'"></block>     <block type="studio_whenRight" deletable="false" x="20" y="'+(3*T+k).toString()+'"></block>'),toolbox:l(d(n.default.catCommands(),g+u("studio_setSprite")+u("studio_setBackground")+u("studio_setDroidSpeed")+u("studio_setMap")+u("studio_playSound")+u("studio_addCharacter")+u("studio_setItemSpeed")+u("studio_addPoints")+u("studio_removePoints")+u("studio_endGame"))+d(n.default.catEvents(),u("when_run")+u("studio_whenUp")+u("studio_whenDown")+u("studio_whenLeft")+u("studio_whenRight")+u("studio_whenGetCharacter")+u("studio_whenGetAllCharacters")+u("studio_whenGetAllCharacterClass")+u("studio_whenTouchObstacle"))),callouts:[{id:"playlab:hoc2015_blockly_15:finishButton",element_id:"#finishButton",on:"finishButtonShown",qtip_config:{content:{text:n.default.calloutFinishButton()},position:{my:"center left",at:"center right"}}},{id:"playlab:hoc2015_blockly_15:categories",element_id:".blocklyTreeRoot:visible",qtip_config:{content:{text:n.default.calloutBlocklyCategories()},position:{my:"top left",at:"bottom right",adjust:{x:-10,y:0}}}}]})},1490:(e,t,i)=>{"use strict";var o=a(i(180)),n=a(i(181));function a(e){return e&&e.__esModule?e:{default:e}}var r=(0,o.default)("studio_locale");r=(0,n.default)(r,"studio"),e.exports=r},3009:(e,t,i)=>{"use strict";var o;function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){var t,i;function o(t,i,o){var n;return(n=e.call(this,t,i,o)||this).obstacleZones=i.customObstacleZones,n}return i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,n(t,i),o.prototype.willRectTouchWall=function(e,t,i,o){if(this.obstacleZones[this.background]&&this.obstacleZones[this.background][this.wallMapRequested])for(var n=this.obstacleZones[this.background][this.wallMapRequested],a=0;a<n.length;a++){var r=n[a],s=r.maxX-r.minX+1,l=r.maxY-r.minY+1,u=r.minX+s/2,d=r.minY+l/2;if(this.drawDebugRect("avatarCollision",u,d,s,l),this.overlappingTest(e,u,s/2+i/2,t,d,l/2+o/2))return!0}return!1},o}(((o=i(2586))&&o.__esModule?o:{default:o}).default);t.default=a,e.exports=t.default},1677:(e,t,i)=>{var o,n,a=i(678).singleton,r=i(33),s=i(53);t.initWithSkinAndLevel=function(e,t){o=e,n=t},t.getPlaySoundValues=function(e){var t;if(t=e?["random"]:[],o&&o.sounds&&(t=t.concat(o.sounds),e))for(var i in o.soundGroups){var a=t.indexOf(i+o.soundGroups[i].minSuffix);-1!==a&&t.splice(a,0,o.soundGroups[i].randomValue)}if(n&&n.paramRestrictions&&n.paramRestrictions.playSound){var r=n.paramRestrictions.playSound;t=t.filter((function(e){return r[e]}))}return t},t.playSoundDropdown=function(){var e=r.valueOr(o.soundMetadata,[]);return t.getPlaySoundValues(!0).map((function(t){var i=t.toLowerCase().trim();return{text:r.quote(t),display:r.quote(t),click:function(o){var n=Object.assign({volume:1},s.find(e,(function(e){return e.name.toLowerCase().trim()===i})));a().playAudio(i,n),o(r.quote(t))}}}))}},3010:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(i(2658)),n=s(i(2587)),a=s(i(2588)),r=i(1211);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var u={};u[r.Direction.EAST]=0,u[r.Direction.SOUTH]=90,u[r.Direction.WEST]=180,u[r.Direction.NORTH]=270,u[r.Direction.NORTHEAST]=45,u[r.Direction.SOUTHEAST]=135,u[r.Direction.SOUTHWEST]=225,u[r.Direction.NORTHWEST]=315;var d={};d[r.Direction.NORTH]={x:.5,y:0},d[r.Direction.EAST]={x:1,y:.5},d[r.Direction.SOUTH]={x:.5,y:1},d[r.Direction.WEST]={x:0,y:.5},d[r.Direction.NORTHEAST]={x:1,y:0},d[r.Direction.SOUTHEAST]={x:1,y:1},d[r.Direction.SOUTHWEST]={x:0,y:1},d[r.Direction.NORTHWEST]={x:0,y:0};var c={};c[r.Direction.NORTH]={x:0,y:-25},c[r.Direction.EAST]={x:25,y:0},c[r.Direction.SOUTH]={x:0,y:25},c[r.Direction.WEST]={x:-25,y:0},c[r.Direction.NORTHEAST]={x:25,y:-25},c[r.Direction.SOUTHEAST]={x:25,y:25},c[r.Direction.SOUTHWEST]={x:-25,y:25},c[r.Direction.NORTHWEST]={x:-25,y:-25};var p=function(e){var t,i;function o(t){var i;return(i=e.call(this,t)||this).height=t.height||50,i.width=t.width||50,i.speed=t.speed||r.DEFAULT_PROJECTILE_SPEED,i.x=t.spriteX+c[t.dir].x+t.spriteWidth*d[t.dir].x,i.y=t.spriteY+c[t.dir].y+t.spriteHeight*d[t.dir].y,i.spriteSheet_=new a.default({frameWidth:t.spriteWidth,frameHeight:t.spriteHeight,defaultFramesPerAnimation:t.frames,assetPath:t.image,horizontalAnimation:!0,totalAnimations:1}),i.animation_=new n.default(Object.assign({},t,{spriteSheet:i.spriteSheet_,animationFrameDuration:i.getAnimationFrameDuration()})),i}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,l(t,i);var s=o.prototype;return s.getElement=function(){return this.animation_.getElement()},s.createElement=function(e){this.animation_.createElement(e)},s.getAnimationFrameDuration=function(){return r.DEFAULT_PROJECTILE_ANIMATION_FRAME_DURATION*r.DEFAULT_PROJECTILE_SPEED/this.speed},s.removeElement=function(){this.animation_.removeElement()},s.bounce=function(){switch(this.dir){case r.Direction.NORTH:this.dir=r.Direction.SOUTH;break;case r.Direction.WEST:this.dir=r.Direction.EAST;break;case r.Direction.SOUTH:this.dir=r.Direction.NORTH;break;case r.Direction.EAST:this.dir=r.Direction.WEST;break;case r.Direction.NORTHEAST:this.dir=r.Direction.SOUTHWEST;break;case r.Direction.SOUTHEAST:this.dir=r.Direction.NORTHWEST;break;case r.Direction.SOUTHWEST:this.dir=r.Direction.NORTHEAST;break;case r.Direction.NORTHWEST:this.dir=r.Direction.SOUTHEAST}},s.display=function(){this.animation_.redrawCenteredAt({x:this.x,y:this.y},Studio.tickCount),this.spriteSheet_.defaultFramesPerAnimation>1&&this.getElement().setAttribute("transform","rotate("+u[this.dir]+", "+this.x+", "+this.y+")")},s.getNextPosition=function(){var e=r.Direction.getUnitVector(this.dir);return{x:this.x+this.speed*e.x,y:this.y+this.speed*e.y}},s.moveToNextPosition=function(){var e=this.getNextPosition();this.x=e.x,this.y=e.y},s.setOpacity=function(e){this.animation_.setOpacity(e)},o}(o.default);t.default=p,e.exports=t.default},2544:(e,t,i)=>{"use strict";var o=i(1211),n=l(i(1490)),a=l(i(13)),r=l(i(884)),s=i(2235);function l(e){return e&&e.__esModule?e:{default:e}}var u={text:a.default.defaultTwitterText()+" @codeorg",hashtag:"HourOfCode"};t.load=function(e,t){var i=r.default.load(e,t);switch(i.ProjectileClassNames=["airplane","basketball","disc","pie","pumpkin","star","sandwich","snowball","blue_fireball","purple_fireball","red_fireball","purple_hearts","red_hearts","yellow_hearts"],i.specialProjectileProperties={airplane:{frames:10},basketball:{frames:10},disc:{frames:10},pie:{frames:10},pumpkin:{frames:10},star:{frames:10},sandwich:{frames:10},snowball:{frames:10}},i.ItemClassNames=["item_airplane","item_basketball","item_disc","item_pie","item_pumpkin","item_star","item_sandwich","item_snowball","item_blue_fireball","item_purple_fireball","item_red_fireball","item_purple_hearts","item_red_hearts","item_yellow_hearts"],i.airplane=i.assetUrl("projectile_airplane.png"),i.basketball=i.assetUrl("projectile_basketball.png"),i.disc=i.assetUrl("projectile_disc.png"),i.pie=i.assetUrl("projectile_pie.png"),i.pumpkin=i.assetUrl("projectile_pumpkin.png"),i.star=i.assetUrl("projectile_star.png"),i.sandwich=i.assetUrl("projectile_sandwich.png"),i.snowball=i.assetUrl("projectile_snowball.png"),i.yellow_hearts=i.assetUrl("yellow_hearts.gif"),i.purple_hearts=i.assetUrl("purple_hearts.gif"),i.red_hearts=i.assetUrl("red_hearts.gif"),i.blue_fireball=i.assetUrl("blue_fireball.png"),i.purple_fireball=i.assetUrl("purple_fireball.png"),i.red_fireball=i.assetUrl("red_fireball.png"),i.item_airplane=i.assetUrl("projectile_airplane.png"),i.item_basketball=i.assetUrl("projectile_basketball.png"),i.item_disc=i.assetUrl("projectile_disc.png"),i.item_pie=i.assetUrl("projectile_pie.png"),i.item_pumpkin=i.assetUrl("projectile_pumpkin.png"),i.item_star=i.assetUrl("projectile_star.png"),i.item_sandwich=i.assetUrl("projectile_sandwich.png"),i.item_snowball=i.assetUrl("projectile_snowball.png"),i.item_yellow_hearts=i.assetUrl("yellow_hearts.gif"),i.item_purple_hearts=i.assetUrl("purple_hearts.gif"),i.item_red_hearts=i.assetUrl("red_hearts.gif"),i.item_blue_fireball=i.assetUrl("blue_fireball.png"),i.item_purple_fireball=i.assetUrl("purple_fireball.png"),i.item_red_fireball=i.assetUrl("red_fireball.png"),i.whenUp=i.assetUrl("when-up.png"),i.whenDown=i.assetUrl("when-down.png"),i.whenLeft=i.assetUrl("when-left.png"),i.whenRight=i.assetUrl("when-right.png"),i.collide=i.assetUrl("when-sprite-collide.png"),i.emotionAngry=i.assetUrl("emotion-angry.png"),i.emotionNormal=i.assetUrl("emotion-nothing.png"),i.emotionSad=i.assetUrl("emotion-sad.png"),i.emotionHappy=i.assetUrl("emotion-happy.png"),i.speechBubble=i.assetUrl("say-sprite.png"),i.goal=i.assetUrl("goal.png"),i.goalSuccess=i.assetUrl("goal_success.png"),i.builtinSounds=["start","win","failure","flag"],i.sounds=["rubber","crunch","goal1","goal2","wood","retro","slap","hit","winpoint","winpoint2","losepoint","losepoint2"],i.soundChoices=[[n.default.playSoundRandom(),o.RANDOM_VALUE],[n.default.playSoundHit(),"hit"],[n.default.playSoundWood(),"wood"],[n.default.playSoundRetro(),"retro"],[n.default.playSoundSlap(),"slap"],[n.default.playSoundRubber(),"rubber"],[n.default.playSoundCrunch(),"crunch"],[n.default.playSoundWinPoint(),"winpoint"],[n.default.playSoundWinPoint2(),"winpoint2"],[n.default.playSoundLosePoint(),"losepoint"],[n.default.playSoundLosePoint2(),"losepoint2"],[n.default.playSoundGoal1(),"goal1"],[n.default.playSoundGoal2(),"goal2"]],i.soundChoicesK1=[[n.default.soundRandom(),o.RANDOM_VALUE],[n.default.soundHit(),"hit"],[n.default.soundWood(),"wood"],[n.default.soundRetro(),"retro"],[n.default.soundSlap(),"slap"],[n.default.soundRubber(),"rubber"],[n.default.soundCrunch(),"crunch"],[n.default.soundWinPoint(),"winpoint"],[n.default.soundWinPoint2(),"winpoint2"],[n.default.soundLosePoint(),"losepoint"],[n.default.soundLosePoint2(),"losepoint2"],[n.default.soundGoal1(),"goal1"],[n.default.soundGoal2(),"goal2"]],i.background=i.assetUrl("background.png"),i.spriteHeight=100,i.spriteWidth=100,i.dropdownThumbnailWidth=50,i.dropdownThumbnailHeight=50,i.preloadAssets=!0,i.wallCollisionRectOffsetX=0,i.wallCollisionRectOffsetY=0,i.setSpritePrefix=n.default.setSprite(),i.activityChoices=[[n.default.setActivityRandom(),o.RANDOM_VALUE],[n.default.setActivityRoam(),'"roam"'],[n.default.setActivityChase(),'"chase"'],[n.default.setActivityFlee(),'"flee"'],[n.default.setActivityNone(),'"none"']],i.id){case"gumball":!function(e){e.twitterOptions=u,e.defaultBackground="dots",e.projectileFrames=10,e.itemFrames=10,e.spriteHeight=110,e.spriteWidth=110,e.spriteCollisionRectWidth=60,e.spriteCollisionRectHeight=60,e.ProjectileClassNames=["projectile_banana","projectile_dodgeball","projectile_donkey","projectile_handbag","projectile_hotdog","projectile_pompom","projectile_toaster","projectile_waterball"],e.ItemClassNames=["item_projectile_banana","item_projectile_dodgeball","item_projectile_donkey","item_projectile_handbag","item_projectile_hotdog","item_projectile_pompom","item_projectile_toaster","item_projectile_waterball"],e.projectile_banana=e.assetUrl("projectile_banana.png"),e.projectile_dodgeball=e.assetUrl("projectile_dodgeball.png"),e.projectile_donkey=e.assetUrl("projectile_donkey.png"),e.projectile_handbag=e.assetUrl("projectile_handbag.png"),e.projectile_hotdog=e.assetUrl("projectile_hotdog.png"),e.projectile_pompom=e.assetUrl("projectile_pompom.png"),e.projectile_toaster=e.assetUrl("projectile_toaster.png"),e.projectile_waterball=e.assetUrl("projectile_waterball.png"),e.item_projectile_banana=e.assetUrl("projectile_banana.png"),e.item_projectile_dodgeball=e.assetUrl("projectile_dodgeball.png"),e.item_projectile_donkey=e.assetUrl("projectile_donkey.png"),e.item_projectile_handbag=e.assetUrl("projectile_handbag.png"),e.item_projectile_hotdog=e.assetUrl("projectile_hotdog.png"),e.item_projectile_pompom=e.assetUrl("projectile_pompom.png"),e.item_projectile_toaster=e.assetUrl("projectile_toaster.png"),e.item_projectile_waterball=e.assetUrl("projectile_waterball.png"),e.explosion=e.assetUrl("explosion.png"),e.explosionThumbnail=e.assetUrl("explosion_thumb.png"),e.explosionFrames=40,e.fadeExplosion=!1,e.timePerExplosionFrame=20,e.characters={background:e.assetUrl("background_characters.png")},e.checkers={background:e.assetUrl("background_checkers.png")},e.clouds={background:e.assetUrl("background_clouds.png")},e.cornered={background:e.assetUrl("background_cornered.png")},e.dots={background:e.assetUrl("background_dots.png")},e.graffiti={background:e.assetUrl("background_graffiti.png")},e.space={background:e.assetUrl("background_space.png")},e.squares={background:e.assetUrl("background_squares.png")},e.stripes={background:e.assetUrl("background_stripes.png")},e.wood={background:e.assetUrl("background_wood.png")},e.avatarList=["anais","anton","bananajoe","darwin","gumball","nicole","penny","richard"],e.walkValues=[8,8,8,12,12,8,10,12],e.avatarList.forEach((function(t,i){e[t]={sprite:e.assetUrl("idle_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:e.walkValues[i],extraEmotions:3,walkingEmotions:3},animations:{turns:8,walkingEmotions:3},animationFrameDuration:3}})),e.backgroundChoices=[[n.default.setBackgroundRandom(),o.RANDOM_VALUE],[n.default.setBackgroundCharacters(),'"characters"'],[n.default.setBackgroundCheckers(),'"checkers"'],[n.default.setBackgroundClouds(),'"clouds"'],[n.default.setBackgroundCornered(),'"cornered"'],[n.default.setBackgroundDots(),'"dots"'],[n.default.setBackgroundGraffiti(),'"graffiti"'],[n.default.setBackgroundSpace(),'"space"'],[n.default.setBackgroundSquares(),'"squares"'],[n.default.setBackgroundStripes(),'"stripes"'],[n.default.setBackgroundWood(),'"wood"']],e.backgroundChoicesK1=[[e.characters.background,'"characters"'],[e.checkers.background,'"checkers"'],[e.clouds.background,'"clouds"'],[e.cornered.background,'"cornered"'],[e.dots.background,'"dots"'],[e.graffiti.background,'"graffiti"'],[e.space.background,'"space"'],[e.squares.background,'"squares"'],[e.stripes.background,'"stripes"'],[e.wood.background,'"wood"'],[e.randomPurpleIcon,o.RANDOM_VALUE]],e.spriteChoices=[[n.default.setSpriteHidden(),o.HIDDEN_VALUE],[n.default.setSpriteRandom(),o.RANDOM_VALUE],[n.default.setSpriteAnais(),'"anais"'],[n.default.setSpriteAnton(),'"anton"'],[n.default.setSpriteBananajoe(),'"bananajoe"'],[n.default.setSpriteDarwin(),'"darwin"'],[n.default.setSpriteGumball(),'"gumball"'],[n.default.setSpriteNicole(),'"nicole"'],[n.default.setSpritePenny(),'"penny"'],[n.default.setSpriteRichard(),'"richard"']],e.projectileChoices=[[n.default.projectileBanana(),'"projectile_banana"'],[n.default.projectileDodgeball(),'"projectile_dodgeball"'],[n.default.projectileDonkey(),'"projectile_donkey"'],[n.default.projectileHandbag(),'"projectile_handbag"'],[n.default.projectileHotdog(),'"projectile_hotdog"'],[n.default.projectilePompom(),'"projectile_pompom"'],[n.default.projectileToaster(),'"projectile_toaster"'],[n.default.projectileWaterball(),'"projectile_waterball"'],[n.default.projectileRandom(),o.RANDOM_VALUE]],e.makeProjectileChoices=[[n.default.makeProjectileBanana(),'"projectile_banana"'],[n.default.makeProjectileDodgeball(),'"projectile_dodgeball"'],[n.default.makeProjectileDonkey(),'"projectile_donkey"'],[n.default.makeProjectileHandbag(),'"projectile_handbag"'],[n.default.makeProjectileHotdog(),'"projectile_hotdog"'],[n.default.makeProjectilePompom(),'"projectile_pompom"'],[n.default.makeProjectileToaster(),'"projectile_toaster"'],[n.default.makeProjectileWaterball(),'"projectile_waterball"']],e.whenProjectileCollidedChoices=[[n.default.whenSpriteCollidedWithProjectileBanana(),"projectile_banana"],[n.default.whenSpriteCollidedWithProjectileDodgeball(),"projectile_dodgeball"],[n.default.whenSpriteCollidedWithProjectileDonkey(),"projectile_donkey"],[n.default.whenSpriteCollidedWithProjectileHandbag(),"projectile_handbag"],[n.default.whenSpriteCollidedWithProjectileHotdog(),"projectile_hotdog"],[n.default.whenSpriteCollidedWithProjectilePompom(),"projectile_pompom"],[n.default.whenSpriteCollidedWithProjectileToaster(),"projectile_toaster"],[n.default.whenSpriteCollidedWithProjectileWaterball(),"projectile_waterball"]],e.itemChoices=[[n.default.itemProjectileBanana(),'"item_projectile_banana"'],[n.default.itemProjectileDodgeball(),'"item_projectile_dodgeball"'],[n.default.itemProjectileDonkey(),'"item_projectile_donkey"'],[n.default.itemProjectileHandbag(),'"item_projectile_handbag"'],[n.default.itemProjectileHotdog(),'"item_projectile_hotdog"'],[n.default.itemProjectilePompom(),'"item_projectile_pompom"'],[n.default.itemProjectileToaster(),'"item_projectile_toaster"'],[n.default.itemProjectileWaterball(),'"item_projectile_waterball"'],[n.default.itemRandom(),o.RANDOM_VALUE]]}(i);break;case"iceage":!function(e){e.twitterOptions=u,e.defaultBackground="icy1",e.projectileFrames=10,e.itemFrames=10,e.spriteHeight=130,e.spriteWidth=130,e.spriteCollisionRectWidth=60,e.spriteCollisionRectHeight=60,e.ProjectileClassNames=["ia_projectile_1","ia_projectile_2","ia_projectile_3","ia_projectile_4","ia_projectile_5"],e.ItemClassNames=["item_ia_projectile_1","item_ia_projectile_2","item_ia_projectile_3","item_ia_projectile_4","item_ia_projectile_5"],e.ia_projectile_1=e.assetUrl("ia_projectile_1.png"),e.ia_projectile_2=e.assetUrl("ia_projectile_2.png"),e.ia_projectile_3=e.assetUrl("ia_projectile_3.png"),e.ia_projectile_4=e.assetUrl("ia_projectile_4.png"),e.ia_projectile_5=e.assetUrl("ia_projectile_5.png"),e.item_ia_projectile_1=e.assetUrl("ia_projectile_1.png"),e.item_ia_projectile_2=e.assetUrl("ia_projectile_2.png"),e.item_ia_projectile_3=e.assetUrl("ia_projectile_3.png"),e.item_ia_projectile_4=e.assetUrl("ia_projectile_4.png"),e.item_ia_projectile_5=e.assetUrl("ia_projectile_5.png"),e.explosion=e.assetUrl("explosion.png"),e.explosionThumbnail=e.assetUrl("explosion_thumb.png"),e.explosionFrames=17,e.fadeExplosion=!1,e.timePerExplosionFrame=40,e.icy1={background:e.assetUrl("background_icy1.jpg")},e.icy2={background:e.assetUrl("background_icy2.jpg")},e.icy3={background:e.assetUrl("background_icy3.jpg")},e.icy4={background:e.assetUrl("background_icy4.jpg")},e.icy5={background:e.assetUrl("background_icy5.jpg")},e.ground={background:e.assetUrl("background_ground.jpg")},e.avatarList=["manny","sid","scrat","diego","granny"],e.avatarList.forEach((function(t){e[t]={sprite:e.assetUrl("avatar_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:12,extraEmotions:3,walkingEmotions:3},animations:{turns:8,walkingEmotions:3},animationFrameDuration:3}})),e.backgroundChoices=[[n.default.setBackgroundRandom(),o.RANDOM_VALUE],[n.default.setBackgroundIcy1(),'"icy1"'],[n.default.setBackgroundIcy2(),'"icy2"'],[n.default.setBackgroundIcy3(),'"icy3"'],[n.default.setBackgroundIcy4(),'"icy4"'],[n.default.setBackgroundIcy5(),'"icy5"'],[n.default.setBackgroundGround(),'"ground"']],e.backgroundChoicesK1=[[e.icy1.background,'"icy1"'],[e.icy2.background,'"icy2"'],[e.icy3.background,'"icy3"'],[e.icy4.background,'"icy4"'],[e.icy5.background,'"icy5"'],[e.ground.background,'"ground"'],[e.randomPurpleIcon,o.RANDOM_VALUE]],e.spriteChoices=[[n.default.setSpriteHidden(),o.HIDDEN_VALUE],[n.default.setSpriteRandom(),o.RANDOM_VALUE],[n.default.setSpriteManny(),'"manny"'],[n.default.setSpriteSid(),'"sid"'],[n.default.setSpriteScrat(),'"scrat"'],[n.default.setSpriteDiego(),'"diego"'],[n.default.setSpriteGranny(),'"granny"']],e.projectileChoices=[[n.default.projectileIAProjectile1(),'"ia_projectile_1"'],[n.default.projectileIAProjectile2(),'"ia_projectile_2"'],[n.default.projectileIAProjectile3(),'"ia_projectile_3"'],[n.default.projectileIAProjectile4(),'"ia_projectile_4"'],[n.default.projectileIAProjectile5(),'"ia_projectile_5"'],[n.default.projectileRandom(),o.RANDOM_VALUE]],e.makeProjectileChoices=[[n.default.makeProjectileIAProjectile1(),'"ia_projectile_1"'],[n.default.makeProjectileIAProjectile2(),'"ia_projectile_2"'],[n.default.makeProjectileIAProjectile3(),'"ia_projectile_3"'],[n.default.makeProjectileIAProjectile4(),'"ia_projectile_4"'],[n.default.makeProjectileIAProjectile5(),'"ia_projectile_5"']],e.whenProjectileCollidedChoices=[[n.default.whenSpriteCollidedWithIAProjectile1(),"ia_projectile_1"],[n.default.whenSpriteCollidedWithIAProjectile2(),"ia_projectile_2"],[n.default.whenSpriteCollidedWithIAProjectile3(),"ia_projectile_3"],[n.default.whenSpriteCollidedWithIAProjectile4(),"ia_projectile_4"],[n.default.whenSpriteCollidedWithIAProjectile5(),"ia_projectile_5"]],e.itemChoices=[[n.default.itemIAProjectile1(),'"item_ia_projectile_1"'],[n.default.itemIAProjectile2(),'"item_ia_projectile_2"'],[n.default.itemIAProjectile3(),'"item_ia_projectile_3"'],[n.default.itemIAProjectile4(),'"item_ia_projectile_4"'],[n.default.itemIAProjectile5(),'"item_ia_projectile_5"'],[n.default.itemRandom(),o.RANDOM_VALUE]]}(i);break;case"infinity":!function(e){e.preloadAssets=!0,e.defaultBackground="leafy",e.projectileFrames=10,e.itemFrames=10,e.ProjectileClassNames=["projectile_hiro","projectile_anna","projectile_elsa","projectile_baymax","projectile_rapunzel","projectile_cherry","projectile_ice","projectile_duck"],e.specialProjectileProperties={projectile_cherry:{frames:13},projectile_ice:{frames:12},projectile_duck:{frames:12}},e.ItemClassNames=["item_hiro","item_anna","item_elsa","item_baymax","item_rapunzel","item_cherry","item_ice","item_duck"],e.specialItemProperties={item_cherry:{frames:13},item_ice:{frames:12},item_duck:{frames:12}},e.explosion=e.assetUrl("vanish.png"),e.explosionFrames=17,e.fadeExplosion=!0,e.timePerExplosionFrame=100,e.projectileSpriteWidth=70,e.projectileSpriteHeight=70,e.avatarList=["anna","elsa","hiro","baymax","rapunzel"],e.avatarList.forEach((function(t){e[t]={sprite:e.assetUrl("avatar_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:19,turns:8,emotions:0,walk:12},animations:{turns:8},animationFrameDuration:3}})),e.preventProjectileLoop=function(e){return"projectile_hiro"===e},e.preventItemLoop=function(e){return"item_hiro"===e},e.projectile_hiro=e.assetUrl("projectile_hiro.png"),e.projectile_anna=e.assetUrl("projectile_anna.png"),e.projectile_elsa=e.assetUrl("projectile_elsa.png"),e.projectile_baymax=e.assetUrl("projectile_baymax.png"),e.projectile_rapunzel=e.assetUrl("projectile_rapunzel.png"),e.projectile_cherry=e.assetUrl("projectile_cherry.png"),e.projectile_ice=e.assetUrl("projectile_ice.png"),e.projectile_duck=e.assetUrl("projectile_duck.png"),e.item_hiro=e.assetUrl("projectile_hiro.png"),e.item_anna=e.assetUrl("projectile_anna.png"),e.item_elsa=e.assetUrl("projectile_elsa.png"),e.item_baymax=e.assetUrl("projectile_baymax.png"),e.item_rapunzel=e.assetUrl("projectile_rapunzel.png"),e.item_cherry=e.assetUrl("projectile_cherry.png"),e.item_ice=e.assetUrl("projectile_ice.png"),e.item_duck=e.assetUrl("projectile_duck.png"),e.leafy={background:e.assetUrl("background_leafy.jpg")},e.grassy={background:e.assetUrl("background_grassy.jpg")},e.flower={background:e.assetUrl("background_flower.jpg")},e.tile={background:e.assetUrl("background_tile.jpg")},e.icy={background:e.assetUrl("background_icy.jpg")},e.snowy={background:e.assetUrl("background_snowy.jpg")},e.backgroundChoices=[[n.default.setBackgroundRandom(),o.RANDOM_VALUE],[n.default.setBackgroundLeafy(),'"leafy"'],[n.default.setBackgroundGrassy(),'"grassy"'],[n.default.setBackgroundFlower(),'"flower"'],[n.default.setBackgroundTile(),'"tile"'],[n.default.setBackgroundIcy(),'"icy"'],[n.default.setBackgroundSnowy(),'"snowy"']],e.backgroundChoicesK1=[[e.leafy.background,'"leafy"'],[e.grassy.background,'"grassy"'],[e.flower.background,'"flower"'],[e.tile.background,'"tile"'],[e.icy.background,'"icy"'],[e.snowy.background,'"snowy"'],[e.randomPurpleIcon,o.RANDOM_VALUE]],e.spriteChoices=[[n.default.setSpriteHidden(),o.HIDDEN_VALUE],[n.default.setSpriteRandom(),o.RANDOM_VALUE],[n.default.setSpriteAnna(),'"anna"'],[n.default.setSpriteElsa(),'"elsa"'],[n.default.setSpriteHiro(),'"hiro"'],[n.default.setSpriteBaymax(),'"baymax"'],[n.default.setSpriteRapunzel(),'"rapunzel"']],e.projectileChoices=[[n.default.projectileHiro(),'"projectile_hiro"'],[n.default.projectileAnna(),'"projectile_anna"'],[n.default.projectileElsa(),'"projectile_elsa"'],[n.default.projectileBaymax(),'"projectile_baymax"'],[n.default.projectileRapunzel(),'"projectile_rapunzel"'],[n.default.projectileCherry(),'"projectile_cherry"'],[n.default.projectileIce(),'"projectile_ice"'],[n.default.projectileDuck(),'"projectile_duck"'],[n.default.projectileRandom(),o.RANDOM_VALUE]],e.itemChoices=[[n.default.itemHiro(),'"item_hiro"'],[n.default.itemAnna(),'"item_anna"'],[n.default.itemElsa(),'"item_elsa"'],[n.default.itemBaymax(),'"item_baymax"'],[n.default.itemRapunzel(),'"item_rapunzel"'],[n.default.itemCherry(),'"item_cherry"'],[n.default.itemIce(),'"item_ice"'],[n.default.itemDuck(),'"item_duck"'],[n.default.itemRandom(),o.RANDOM_VALUE]]}(i);break;case"hoc2015":(0,s.loadStarWarsEvents)(i),i.twitterOptions=u;break;case"hoc2015x":(0,s.loadStarWarsGrid)(i);break;case"studio":!function(e){e.defaultBackground="cave",e.projectileFrames=8,e.itemFrames=8,e.explosion=e.assetUrl("explosion.png"),e.explosionThumbnail=e.assetUrl("explosion_thumb.png"),e.explosionFrames=20,e.fadeExplosion=!1,e.timePerExplosionFrame=40,e.hardcourt={background:e.assetUrl("background.png")},e.black={background:e.assetUrl("retro_background.png")},e.cave={background:e.assetUrl("background_cave.png")},e.night={background:e.assetUrl("background_santa.png")},e.cloudy={background:e.assetUrl("background_scifi.png")},e.underwater={background:e.assetUrl("background_underwater.png")},e.city={background:e.assetUrl("background_city.png")},e.desert={background:e.assetUrl("background_desert.png")},e.rainbow={background:e.assetUrl("background_rainbow.png")},e.soccer={background:e.assetUrl("background_soccer.png")},e.space={background:e.assetUrl("background_space.png")},e.tennis={background:e.assetUrl("background_tennis.png")},e.winter={background:e.assetUrl("background_winter.png")},e.grid={background:e.assetUrl("background_grid.png")},e.mapChoices=[[n.default.setMapRandom(),o.RANDOM_VALUE],[n.default.setMapBlank(),"blank"],[n.default.setMapCircle(),"circle"],[n.default.setMapHorizontal(),"horizontal"],[n.default.setMapGrid(),"grid"],[n.default.setMapBlobs(),"blobs"]],e.wallMaps={blank:{srcUrl:e.assetUrl("obstacle_blank.png")},circle:{srcUrl:e.assetUrl("obstacle_circle.png")},horizontal:{srcUrl:e.assetUrl("obstacle_horizontal.png")},grid:{srcUrl:e.assetUrl("obstacle_grid.png")},blobs:{srcUrl:e.assetUrl("obstacle_blobs.png")}},e.avatarList=["dog","cat","penguin","dinosaur","octopus","witch","bat","bird","dragon","squirrel","wizard","alien","ghost","monster","robot","unicorn","zombie","knight","ninja","pirate","caveboy","cavegirl","princess","spacebot","soccergirl","soccerboy","tennisgirl","tennisboy"],e.avatarList.forEach((function(t){e[t]={sprite:e.assetUrl(t+"_spritesheet_200px.png"),dropdownThumbnail:e.assetUrl(t+"_thumb.png"),frameCounts:{normal:2,holdIdleFrame0Count:8,turns:7,emotions:3},animationFrameDuration:6}})),e.backgroundChoices=[[n.default.setBackgroundRandom(),o.RANDOM_VALUE],[n.default.setBackgroundCave(),'"cave"'],[n.default.setBackgroundNight(),'"night"'],[n.default.setBackgroundCloudy(),'"cloudy"'],[n.default.setBackgroundUnderwater(),'"underwater"'],[n.default.setBackgroundHardcourt(),'"hardcourt"'],[n.default.setBackgroundBlack(),'"black"'],[n.default.setBackgroundCity(),'"city"'],[n.default.setBackgroundDesert(),'"desert"'],[n.default.setBackgroundRainbow(),'"rainbow"'],[n.default.setBackgroundSoccer(),'"soccer"'],[n.default.setBackgroundSpace(),'"space"'],[n.default.setBackgroundTennis(),'"tennis"'],[n.default.setBackgroundWinter(),'"winter"']],e.backgroundChoicesK1=[[e.cave.background,'"cave"'],[e.night.background,'"night"'],[e.cloudy.background,'"cloudy"'],[e.underwater.background,'"underwater"'],[e.hardcourt.background,'"hardcourt"'],[e.black.background,'"black"'],[e.city.background,'"city"'],[e.desert.background,'"desert"'],[e.rainbow.background,'"rainbow"'],[e.soccer.background,'"soccer"'],[e.space.background,'"space"'],[e.tennis.background,'"tennis"'],[e.winter.background,'"winter"'],[e.randomPurpleIcon,o.RANDOM_VALUE]],e.spriteChoices=[[n.default.setSpriteHidden(),o.HIDDEN_VALUE],[n.default.setSpriteRandom(),o.RANDOM_VALUE],[n.default.setSpriteWitch(),'"witch"'],[n.default.setSpriteCat(),'"cat"'],[n.default.setSpriteDinosaur(),'"dinosaur"'],[n.default.setSpriteDog(),'"dog"'],[n.default.setSpriteOctopus(),'"octopus"'],[n.default.setSpritePenguin(),'"penguin"'],[n.default.setSpriteBat(),'"bat"'],[n.default.setSpriteBird(),'"bird"'],[n.default.setSpriteDragon(),'"dragon"'],[n.default.setSpriteSquirrel(),'"squirrel"'],[n.default.setSpriteWizard(),'"wizard"'],[n.default.setSpriteAlien(),'"alien"'],[n.default.setSpriteGhost(),'"ghost"'],[n.default.setSpriteMonster(),'"monster"'],[n.default.setSpriteRobot(),'"robot"'],[n.default.setSpriteUnicorn(),'"unicorn"'],[n.default.setSpriteZombie(),'"zombie"'],[n.default.setSpriteKnight(),'"knight"'],[n.default.setSpriteNinja(),'"ninja"'],[n.default.setSpritePirate(),'"pirate"'],[n.default.setSpriteCaveBoy(),'"caveboy"'],[n.default.setSpriteCaveGirl(),'"cavegirl"'],[n.default.setSpritePrincess(),'"princess"'],[n.default.setSpriteSpacebot(),'"spacebot"'],[n.default.setSpriteSoccerGirl(),'"soccergirl"'],[n.default.setSpriteSoccerBoy(),'"soccerboy"'],[n.default.setSpriteTennisGirl(),'"tennisgirl"'],[n.default.setSpriteTennisBoy(),'"tennisboy"']],e.projectileChoices=[[n.default.projectileAirplane(),'"airplane"'],[n.default.projectileBasketball(),'"basketball"'],[n.default.projectileDisc(),'"disc"'],[n.default.projectilePie(),'"pie"'],[n.default.projectilePumpkin(),'"pumpkin"'],[n.default.projectileStar(),'"star"'],[n.default.projectileSandwich(),'"sandwich"'],[n.default.projectileSnowball(),'"snowball"'],[n.default.projectileBlueFireball(),'"blue_fireball"'],[n.default.projectilePurpleFireball(),'"purple_fireball"'],[n.default.projectileRedFireball(),'"red_fireball"'],[n.default.projectileYellowHearts(),'"yellow_hearts"'],[n.default.projectilePurpleHearts(),'"purple_hearts"'],[n.default.projectileRedHearts(),'"red_hearts"'],[n.default.projectileRandom(),o.RANDOM_VALUE]],e.makeProjectileChoices=[[n.default.makeProjectileAirplane(),'"airplane"'],[n.default.makeProjectileBasketball(),'"basketball"'],[n.default.makeProjectileDisc(),'"disc"'],[n.default.makeProjectilePie(),'"pie"'],[n.default.makeProjectilePumpkin(),'"pumpkin"'],[n.default.makeProjectileStar(),'"star"'],[n.default.makeProjectileSandwich(),'"sandwich"'],[n.default.makeProjectileSnowball(),'"snowball"'],[n.default.makeProjectileBlueFireball(),'"blue_fireball"'],[n.default.makeProjectilePurpleFireball(),'"purple_fireball"'],[n.default.makeProjectileRedFireball(),'"red_fireball"'],[n.default.makeProjectileYellowHearts(),'"yellow_hearts"'],[n.default.makeProjectilePurpleHearts(),'"purple_hearts"'],[n.default.makeProjectileRedHearts(),'"red_hearts"']],e.whenProjectileCollidedChoices=[[n.default.whenSpriteCollidedWithAirplane(),"airplane"],[n.default.whenSpriteCollidedWithBasketball(),"basketball"],[n.default.whenSpriteCollidedWithDisc(),"disc"],[n.default.whenSpriteCollidedWithPie(),"pie"],[n.default.whenSpriteCollidedWithPumpkin(),"pumpkin"],[n.default.whenSpriteCollidedWithStar(),"star"],[n.default.whenSpriteCollidedWithSandwich(),"sandwich"],[n.default.whenSpriteCollidedWithSnowball(),"snowball"],[n.default.whenSpriteCollidedWithBlueFireball(),"blue_fireball"],[n.default.whenSpriteCollidedWithPurpleFireball(),"purple_fireball"],[n.default.whenSpriteCollidedWithRedFireball(),"red_fireball"],[n.default.whenSpriteCollidedWithYellowHearts(),"yellow_hearts"],[n.default.whenSpriteCollidedWithPurpleHearts(),"purple_hearts"],[n.default.whenSpriteCollidedWithRedHearts(),"red_hearts"]],e.itemChoices=[[n.default.itemAirplane(),'"item_airplane"'],[n.default.itemBasketball(),'"item_basketball"'],[n.default.itemDisc(),'"item_disc"'],[n.default.itemPie(),'"item_pie"'],[n.default.itemPumpkin(),'"item_pumpkin"'],[n.default.itemStar(),'"item_star"'],[n.default.itemSandwich(),'"item_sandwich"'],[n.default.itemSnowball(),'"item_snowball"'],[n.default.itemBlueFireball(),'"item_blue_fireball"'],[n.default.itemPurpleFireball(),'"item_purple_fireball"'],[n.default.itemRedFireball(),'"item_red_fireball"'],[n.default.itemYellowHearts(),'"item_yellow_hearts"'],[n.default.itemPurpleHearts(),'"item_purple_hearts"'],[n.default.itemRedHearts(),'"item_red_hearts"'],[n.default.itemRandom(),o.RANDOM_VALUE]]}(i)}return i}},3517:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShakeActor=t.GridTurn=t.GridMoveAndCancel=t.GridMove=t.FadeActor=void 0;var o=i(1211),n=i(33),a=function(){function e(e,t){this.towardDir_=e,this.totalSteps_=t,this.elapsedSteps_=0}var t=e.prototype;return t.update=function(e){0===this.elapsedSteps_&&e.setDirection(this.towardDir_),this.elapsedSteps_++},t.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},e}();t.GridTurn=a;var r=function(){function e(e,t,i,o){this.towardDeltaX_=e,this.towardDeltaY_=t,this.totalSteps_=i,this.elapsedSteps_=0,this.direction_=l(e,t,o),this.percentBeforeReverse_=.3}var t=e.prototype;return t.update=function(e){0===this.elapsedSteps_&&(this.startX_=e.x,this.startY_=e.y,e.x+=this.towardDeltaX_,e.y+=this.towardDeltaY_,e.setDirection(this.direction_));var t=(this.elapsedSteps_+1)/this.totalSteps_;e.displayX=this.startX_+this.towardDeltaX_*t,e.displayY=this.startY_+this.towardDeltaY_*t,this.elapsedSteps_++},t.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},e}();t.GridMove=r;var s=function(){function e(e,t,i,o){this.towardDeltaX_=e,this.towardDeltaY_=t,this.totalSteps_=i,this.elapsedSteps_=0,this.direction_=l(e,t,o),this.percentBeforeReverse_=.3}var t=e.prototype;return t.update=function(e){0===this.elapsedSteps_&&e.setDirection(this.direction_);var t=(this.elapsedSteps_+1)/this.totalSteps_,i=2*this.percentBeforeReverse_*(t<.5?t:1-t);e.displayX=e.x+this.towardDeltaX_*i,e.displayY=e.y+this.towardDeltaY_*i,this.elapsedSteps_++},t.isDone=function(){return this.elapsedSteps_>=this.totalSteps_},e}();function l(e,t,i){i&&(e*=-1,t*=-1);var n=o.Direction.NONE;return e<0?n|=o.Direction.WEST:e>0&&(n|=o.Direction.EAST),t<0?n|=o.Direction.NORTH:t>0&&(n|=o.Direction.SOUTH),n}t.GridMoveAndCancel=s;var u=function(){function e(e){this.startFadeTime_=null,this.fadeDurationMs_=(0,n.valueOr)(e,o.DEFAULT_ACTOR_FADE_TIME)}var t=e.prototype;return t.update=function(e){this.startFadeTime_||(this.startFadeTime_=(new Date).getTime());var t=1-((new Date).getTime()-this.startFadeTime_)/this.fadeDurationMs_;t=Math.max(t,0),e.setOpacity(t)},t.isDone=function(){var e=(new Date).getTime();return this.startFadeTime_&&e>this.startFadeTime_+this.fadeDurationMs_},e}();t.FadeActor=u;var d=function(){function e(e){this.startShakeTime_=null,this.shakeDurationMs_=(0,n.valueOr)(e,o.SHAKE_DEFAULT_DURATION),this.cycleCount_=o.SHAKE_DEFAULT_CYCLES,this.amplitude_=o.SHAKE_DEFAULT_DISTANCE,this.angularFrequency_=2*Math.PI*(this.cycleCount_/this.shakeDurationMs_)}var t=e.prototype;return t.update=function(e){this.startShakeTime_||(this.startShakeTime_=(new Date).getTime());var t=(new Date).getTime()-this.startShakeTime_,i=this.amplitude_*Math.sin(this.angularFrequency_*t);e.displayX=e.x+i},t.isDone=function(){var e=(new Date).getTime();return this.startShakeTime_&&e>this.startShakeTime_+this.shakeDurationMs_},e}();t.ShakeActor=d},3515:(e,t,i)=>{"use strict";i(33);var o=r(i(20)),n=i(137),a=r(i(3516));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){a.default.call(this,e),this.feCompositeLayers_=null,this.curve_=a.default.makeBellCurveOscillation(3e3,3,.1,1)};s.inherits(a.default),e.exports=s,s.prototype.createFilterSteps_=function(){var e=document.createElementNS(n.SVG_NS,"feFlood"),t=this.id_+"-flood-white";e.setAttribute("flood-color",o.default.white),e.setAttribute("result",t);var i=document.createElementNS(n.SVG_NS,"feMorphology"),a=this.id_+"-morphology";i.setAttribute("in","SourceAlpha"),i.setAttribute("operator","dilate"),i.setAttribute("radius",2),i.setAttribute("result",a);var r=document.createElementNS(n.SVG_NS,"feComposite"),s=this.id_+"-silhouette";r.setAttribute("in",t),r.setAttribute("operator","in"),r.setAttribute("in2",a),r.setAttribute("result",s);var l=document.createElementNS(n.SVG_NS,"feGaussianBlur"),u=this.id_+"-blur";l.setAttribute("in",s),l.setAttribute("stdDeviation",1),l.setAttribute("result",u);var d=document.createElementNS(n.SVG_NS,"feComposite"),c=this.id_+"-masked-glow";d.setAttribute("in",u),d.setAttribute("operator","out"),d.setAttribute("in2","SourceAlpha"),d.setAttribute("result",c);var p=document.createElementNS(n.SVG_NS,"feComposite");return p.setAttribute("in","SourceGraphic"),p.setAttribute("operator","arithmetic"),p.setAttribute("in2",c),p.setAttribute("k1",0),p.setAttribute("k2",1),p.setAttribute("k3",0),p.setAttribute("k4",0),this.feCompositeLayers_=p,[e,i,r,l,d,p]},s.prototype.update=function(e){this.feCompositeLayers_&&this.feCompositeLayers_.setAttribute("k3",this.curve_(e))}},3516:(e,t,i)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var i=r(t);if(i&&i.has(e))return i.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(n,s,l):n[s]=e[s]}n.default=e,i&&i.set(e,n);return n}(i(33)),a=i(137);function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(r=function(e){return e?i:t})(e)}var s=0,l=function(e){this.svg_=e,this.id_="image-filter-"+s++,this.applyCount_=0,this.intervalId_=null};e.exports=l,l.prototype.applyTo=function(e){this.checkBrowserSupport_()&&(0===this.applyCount_&&this.createInDom_(),e.setAttribute("filter",'url("#'+this.id_+'")'),this.applyCount_++)},l.prototype.removeFrom=function(e){new RegExp("url\\([\"']?#"+this.id_+"[\"']?\\)","i").test(e.getAttribute("filter"))&&(e.removeAttribute("filter"),this.applyCount_--),0===this.applyCount_&&this.removeFromDom_()},l.prototype.update=function(e){},l.prototype.createInDom_=function(){var e=document.getElementById(this.id_);e||((e=document.createElementNS(a.SVG_NS,"filter")).setAttribute("id",this.id_),this.createFilterSteps_().forEach((function(t){e.appendChild(t)})),this.getDefsNode_().appendChild(e),this.intervalId_||(this.intervalId_=window.setInterval(function(){this.update((new Date).getTime())}.bind(this),1e3/30)))},l.prototype.removeFromDom_=function(){this.intervalId_&&(window.clearInterval(this.intervalId_),this.intervalId_=null);var e=document.getElementById(this.id_);e&&e.parentNode.removeChild(e)},l.prototype.createFilterSteps_=function(){return[]},l.prototype.getDefsNode_=function(){var e=this.svg_.querySelector("defs");return e||(e=document.createElementNS(a.SVG_NS,"defs"),this.svg_.appendChild(e)),e},l.prototype.checkBrowserSupport_=function(){return(-1===navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("Chrome"))&&(void 0!==window.SVGFEColorMatrixElement&&2===SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE)},l.makeBellCurveOscillation=function(e,t,i,o){t=n.valueOr(t,2),i=n.valueOr(i,0);var a=((o=n.valueOr(o,1))-i)*Math.pow(2/e,t),r=e/2;return function(o){return i+a*Math.abs(Math.pow(o%e-r,t))}}},2235:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadStarWarsEvents=function(e){e.preloadAssets=!0,e.sortDrawOrder=!0,e.hideIconInClearPuzzle=!0,e.defaultBackground="endor",e.projectileFrames=10,e.itemFrames=10,e.instructions2ImageSubstitutions={pufferpig:e.assetUrl("instructions_pufferpig.png"),mynock:e.assetUrl("instructions_mynock.png"),rebelpilot:e.assetUrl("instructions_rebelpilot.png"),stormtrooper:e.assetUrl("instructions_stormtrooper.png"),mousedroid:e.assetUrl("instructions_mousedroid.png"),tauntaun:e.assetUrl("instructions_tauntaun.png"),probot:e.assetUrl("instructions_probot.png")},e.ProjectileClassNames=[],e.ItemClassNames=["pufferpig","stormtrooper","tauntaun","mynock","probot","mousedroid","rebelpilot"],e.AutohandlerTouchItems={whenTouchPufferPig:"pufferpig",whenTouchStormtrooper:"stormtrooper",whenTouchTauntaun:"tauntaun",whenTouchMynock:"mynock",whenTouchProbot:"probot",whenTouchMouseDroid:"mousedroid",whenTouchRebelPilot:"rebelpilot",whenGetPufferPig:"pufferpig",whenGetStormtrooper:"stormtrooper",whenGetTauntaun:"tauntaun",whenGetMynock:"mynock",whenGetProbot:"probot",whenGetMouseDroid:"mousedroid",whenGetRebelPilot:"rebelpilot"},e.AutohandlerGetAllItems={whenGetAllPufferPigs:"pufferpig",whenGetAllStormtroopers:"stormtrooper",whenGetAllTauntauns:"tauntaun",whenGetAllMynocks:"mynock",whenGetAllProbots:"probot",whenGetAllMouseDroids:"mousedroid",whenGetAllRebelPilots:"rebelpilot"},e.specialItemProperties={pufferpig:{frames:12,width:100,height:100,scale:1,renderOffset:{x:0,y:-15},activity:"roam",speed:n.SpriteSpeed.VERY_SLOW,spritesCounterclockwise:!0},stormtrooper:{frames:12,width:100,height:100,scale:1.1,renderOffset:{x:0,y:-15},activity:"chase",speed:n.SpriteSpeed.VERY_SLOW,spritesCounterclockwise:!0},tauntaun:{frames:15,width:100,height:100,scale:1.6,renderOffset:{x:0,y:20},activity:"roam",speed:n.SpriteSpeed.SLOW,spritesCounterclockwise:!0},mynock:{frames:8,width:100,height:100,scale:.9,renderOffset:{x:0,y:-20},activity:"roam",speed:n.SpriteSpeed.SLOW,spritesCounterclockwise:!0},probot:{frames:12,width:100,height:100,scale:1.2,renderOffset:{x:0,y:-10},activity:"chase",speed:n.SpriteSpeed.LITTLE_SLOW,spritesCounterclockwise:!0},mousedroid:{frames:1,width:100,height:100,scale:.5,renderOffset:{x:0,y:-20},activity:"flee",speed:n.SpriteSpeed.LITTLE_SLOW,spritesCounterclockwise:!0},rebelpilot:{frames:13,width:100,height:100,scale:1,renderOffset:{x:0,y:-20},activity:"flee",speed:n.SpriteSpeed.SLOW,spritesCounterclockwise:!0}},e.customObstacleZones={endor:{},hoth:{},starship:{}},e.customObstacleZones.endor.grid=e.customObstacleZones.hoth.grid=e.customObstacleZones.starship.grid=function(){for(var e=[],t=0;t<4;t++)for(var i=0;i<4;i++){var o={minX:50+100*i+5,maxX:50+100*i+49-5,minY:50+100*t+15,maxY:50+100*t+49-5};e.push(o)}return e}(),e.customObstacleZones.endor.blobs=[{minX:346,maxX:413,minY:261,maxY:344},{minX:318,maxX:404,minY:342,maxY:397},{minX:308,maxX:348,minY:72,maxY:110},{minX:264,maxX:348,minY:112,maxY:197},{minX:96,maxX:149,minY:289,maxY:349},{minX:96,maxX:199,minY:238,maxY:288},{minX:83,maxX:125,minY:125,maxY:147},{minX:58,maxX:99,minY:72,maxY:91},{minX:57,maxX:149,minY:92,maxY:123}],e.customObstacleZones.endor.horizontal=[{minX:51,maxX:299,minY:269,maxY:293},{minX:150,maxX:348,minY:168,maxY:189},{minX:53,maxX:97,minY:159,maxY:199},{minX:50,maxX:198,minY:71,maxY:94},{minX:255,maxX:345,minY:71,maxY:94}],e.customObstacleZones.endor.circle=[{minX:251,maxX:317,minY:332,maxY:348},{minX:83,maxX:198,minY:332,maxY:348},{minX:250,maxX:317,minY:77,maxY:93},{minX:313,maxX:337,minY:77,maxY:348},{minX:163,maxX:236,minY:202,maxY:244},{minX:83,maxX:200,minY:77,maxY:93},{minX:62,maxX:85,minY:77,maxY:348}],e.customObstacleZones.hoth.blobs=[{minX:100,maxX:142,minY:283,maxY:342},{minX:100,maxX:187,minY:226,maxY:281},{minX:356,maxX:394,minY:264,maxY:311},{minX:311,maxX:393,minY:313,maxY:388},{minX:310,maxX:344,minY:61,maxY:106},{minX:258,maxX:344,minY:108,maxY:192},{minX:117,maxX:146,minY:120,maxY:132},{minX:57,maxX:117,minY:70,maxY:132}],e.customObstacleZones.hoth.horizontal=[{minX:54,maxX:299,minY:268,maxY:294},{minX:150,maxX:350,minY:171,maxY:198},{minX:53,maxX:99,minY:171,maxY:198},{minX:252,maxX:350,minY:66,maxY:92},{minX:54,maxX:195,minY:66,maxY:92}],e.customObstacleZones.hoth.circle=[{minX:250,maxX:298,minY:312,maxY:342},{minX:300,maxX:346,minY:65,maxY:342},{minX:252,maxX:302,minY:65,maxY:100},{minX:99,maxX:192,minY:311,maxY:342},{minX:101,maxX:196,minY:65,maxY:91},{minX:50,maxX:100,minY:65,maxY:342},{minX:163,maxX:242,minY:188,maxY:238}],e.customObstacleZones.starship.blobs=[{minX:301,maxX:344,minY:58,maxY:120},{minX:353,maxX:405,minY:260,maxY:308},{minX:306,maxX:405,minY:310,maxY:393},{minX:101,maxX:144,minY:300,maxY:350},{minX:101,maxX:197,minY:208,maxY:299},{minX:261,maxX:344,minY:120,maxY:192},{minX:55,maxX:133,minY:77,maxY:141}],e.customObstacleZones.starship.horizontal=[{minX:52,maxX:298,minY:267,maxY:300},{minX:151,maxX:351,minY:167,maxY:198},{minX:49,maxX:99,minY:165,maxY:201},{minX:51,maxX:199,minY:66,maxY:102},{minX:251,maxX:351,minY:68,maxY:104}],e.customObstacleZones.starship.circle=[{minX:251,maxX:316,minY:315,maxY:351},{minX:153,maxX:242,minY:165,maxY:251},{minX:252,maxX:314,minY:66,maxY:100},{minX:310,maxX:339,minY:66,maxY:351},{minX:80,maxX:200,minY:316,maxY:351},{minX:82,maxX:200,minY:66,maxY:100},{minX:63,maxX:86,minY:66,maxY:351}],e.explosion=e.assetUrl("vanish.png"),e.explosionFrames=17,e.animatedGoal=e.assetUrl("goal_idle.png"),e.goalSpriteWidth=100,e.goalSpriteHeight=100,e.animatedGoalFrames=16,e.timePerGoalAnimationFrame=100,e.finishCollideDistanceScaling=.8,e.goalCollisionRectWidth=50,e.goalCollisionRectHeight=75,e.fadeOutGoal=!0,e.goalSuccess=null,e.goalRenderOffsetX=-25,e.goalRenderOffsetY=-45,e.projectileSpriteWidth=70,e.projectileSpriteHeight=70,e.itemCollisionRectWidth=50,e.itemCollisionRectHeight=50,e.spriteCollisionRectWidth=50,e.spriteCollisionRectHeight=50,e.wallCollisionRectOffsetX=0,e.wallCollisionRectOffsetY=24,e.wallCollisionRectWidth=30,e.wallCollisionRectHeight=20,e.gridSpriteRenderOffsetX=-30,e.gridSpriteRenderOffsetY=-40,e.avatarList=["r2-d2","c-3po"],e.avatarList.forEach((function(t){e[t]={sprite:e.assetUrl("avatar_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:"r2-d2"===t?14:16,turns:8,emotions:0,walk:"r2-d2"===t?14:8},animations:{turns:8},animationFrameDuration:3}})),e["r2-d2"].movementAudio=[{begin:"r2-d2_move1_start",loop:"r2-d2_move1_loop",end:"r2-d2_move1_end",volume:2.2},{begin:"r2-d2_move2_start",loop:"r2-d2_move2_loop",end:"r2-d2_move2_end",volume:2.2},{begin:"r2-d2_move3_start",loop:"r2-d2_move3_loop",end:"r2-d2_move3_end",volume:2.2}],e["c-3po"].movementAudio=[{loop:"c-3po_move_loop",end:"c-3po_move_end",volume:.6}],e.preventProjectileLoop=function(e){return""===e},e.preventItemLoop=function(e){return""===e},e.winAvatar=null,e.failureAvatar=null,e.pufferpig=e.assetUrl("walk_pufferpig.png"),e.stormtrooper=e.assetUrl("walk_stormtrooper.png"),e.tauntaun=e.assetUrl("walk_tauntaun.png"),e.mynock=e.assetUrl("walk_mynock.png"),e.probot=e.assetUrl("walk_probot.png"),e.mousedroid=e.assetUrl("walk_mousedroid.png"),e.rebelpilot=e.assetUrl("walk_rebelpilot.png"),e.endor={background:e.assetUrl("background_endor.jpg"),tiles:e.assetUrl("tiles_endor.png"),jumboTiles:e.assetUrl("jumbotiles_endor.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4,clouds:[e.assetUrl("cloud_light.png"),e.assetUrl("cloud_light2.png")]},e.hoth={background:e.assetUrl("background_hoth.jpg"),tiles:e.assetUrl("tiles_hoth.png"),jumboTiles:e.assetUrl("jumbotiles_hoth.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4,clouds:[e.assetUrl("cloud_dark.png"),e.assetUrl("cloud_dark2.png")]},e.starship={background:e.assetUrl("background_starship.jpg"),tiles:e.assetUrl("tiles_starship.png"),jumboTiles:e.assetUrl("jumbotiles_starship.png"),jumboTilesAddOffset:-5,jumboTilesSize:60,jumboTilesRows:4,jumboTilesCols:4},e.enlargeWallTiles={minCol:0,maxCol:3,minRow:3,maxRow:5},e.getMap=function(e,t){return"hoth"!==e||"circle"!==t&&"horizontal"!==t?t:t+"_nonjumbo"},e.blank=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],e.circle_nonjumbo=[[0,0,0,0,0,0,0,0],[0,17,2,3,0,68,69,0],[0,4,0,0,0,0,3,0],[0,20,0,289,289,0,5,0],[0,2,0,289,289,0,21,0],[0,3,0,0,0,0,2,0],[0,36,37,2,0,52,53,0],[0,0,0,0,0,0,0,0]],e.circle=[[0,0,0,0,0,0,0,0],[0,512,531,531,0,531,513,0],[0,530,0,0,0,0,530,0],[0,530,0,289,289,0,530,0],[0,530,0,289,289,0,530,0],[0,530,0,0,0,0,530,0],[0,514,531,531,0,531,515,0],[0,0,0,0,0,0,0,0]],e.horizontal_nonjumbo=[[0,0,0,0,0,0,0,0],[0,2,3,32,0,36,37,0],[0,0,0,0,0,0,0,0],[0,16,0,52,53,32,35,0],[0,0,0,0,0,0,0,0],[0,3,2,34,32,33,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],e.horizontal=[[0,0,0,0,0,0,0,0],[0,531,531,531,0,531,531,0],[0,0,0,0,0,0,0,0],[0,48,0,531,531,531,531,0],[0,0,0,0,0,0,0,0],[0,531,531,531,531,531,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],e.grid=[[0,0,0,0,0,0,0,0],[0,33,0,16,0,32,0,3],[0,0,0,0,0,0,0,0],[0,2,0,17,0,33,0,2],[0,0,0,0,0,0,0,0],[0,3,0,32,0,34,0,17],[0,0,0,0,0,0,0,0],[0,16,0,33,0,35,0,16]],e.blobs=[[0,0,0,0,0,0,0,0],[0,259,259,0,0,0,34,0],[0,259,259,0,0,272,272,0],[0,0,0,0,0,272,272,0],[0,0,306,306,0,0,0,0],[0,0,306,306,0,0,0,35],[0,0,49,0,0,0,289,289],[0,0,0,0,0,0,289,289]],e.sounds=["R2-D2sound1","R2-D2sound2","R2-D2sound3","R2-D2sound4","R2-D2sound5","R2-D2sound6","R2-D2sound7","R2-D2sound8","R2-D2sound9","C-3POsound1","C-3POsound2","C-3POsound3","C-3POsound4","PufferPigSound1","PufferPigSound2","PufferPigSound3","PufferPigSound4","TauntaunSound1","TauntaunSound2","TauntaunSound3","TauntaunSound4","MynockSound1","MynockSound2","MynockSound3","ProbotSound1","ProbotSound2","ProbotSound3","MouseDroidSound1","MouseDroidSound2","MouseDroidSound3","alert1","alert2","alert3","alert4","applause"],e.soundGroups={"R2-D2sound":{randomValue:"R2-D2random",minSuffix:1,maxSuffix:9},"C-3POsound":{randomValue:"C-3POrandom",minSuffix:1,maxSuffix:4},PufferPigSound:{randomValue:"PufferPigRandom",minSuffix:1,maxSuffix:4},TauntaunSound:{randomValue:"TauntaunRandom",minSuffix:1,maxSuffix:4},MynockSound:{randomValue:"MynockRandom",minSuffix:1,maxSuffix:3},ProbotSound:{randomValue:"ProbotSoundRandom",minSuffix:1,maxSuffix:3},MouseDroidSound:{randomValue:"MouseDroidSoundRandom",minSuffix:1,maxSuffix:3}},e.soundChoices=[[a.default.playSoundRandom(),n.RANDOM_VALUE],[a.default.playSoundR2D2Random(),"R2-D2random"],[a.default.playSoundR2D2Sound1(),"R2-D2sound1"],[a.default.playSoundR2D2Sound2(),"R2-D2sound2"],[a.default.playSoundR2D2Sound3(),"R2-D2sound3"],[a.default.playSoundR2D2Sound4(),"R2-D2sound4"],[a.default.playSoundR2D2Sound5(),"R2-D2sound5"],[a.default.playSoundR2D2Sound6(),"R2-D2sound6"],[a.default.playSoundR2D2Sound7(),"R2-D2sound7"],[a.default.playSoundR2D2Sound8(),"R2-D2sound8"],[a.default.playSoundR2D2Sound9(),"R2-D2sound9"],[a.default.playSoundC3PORandom(),"C-3POrandom"],[a.default.playSoundC3POSound1(),"C-3POsound1"],[a.default.playSoundC3POSound2(),"C-3POsound2"],[a.default.playSoundC3POSound3(),"C-3POsound3"],[a.default.playSoundC3POSound4(),"C-3POsound4"],[a.default.playSoundPufferPigRandom(),"PufferPigRandom"],[a.default.playSoundPufferPigSound1(),"PufferPigSound1"],[a.default.playSoundPufferPigSound2(),"PufferPigSound2"],[a.default.playSoundPufferPigSound3(),"PufferPigSound3"],[a.default.playSoundPufferPigSound4(),"PufferPigSound4"],[a.default.playSoundTauntaunRandom(),"TauntaunRandom"],[a.default.playSoundTauntaunSound1(),"TauntaunSound1"],[a.default.playSoundTauntaunSound2(),"TauntaunSound2"],[a.default.playSoundTauntaunSound3(),"TauntaunSound3"],[a.default.playSoundTauntaunSound4(),"TauntaunSound4"],[a.default.playSoundMynockRandom(),"MynockRandom"],[a.default.playSoundMynockSound1(),"MynockSound1"],[a.default.playSoundMynockSound2(),"MynockSound2"],[a.default.playSoundMynockSound3(),"MynockSound3"],[a.default.playSoundProbotRandom(),"ProbotRandom"],[a.default.playSoundProbotSound1(),"ProbotSound1"],[a.default.playSoundProbotSound2(),"ProbotSound2"],[a.default.playSoundProbotSound3(),"ProbotSound3"],[a.default.playSoundMouseDroidRandom(),"MouseDroidRandom"],[a.default.playSoundMouseDroidSound1(),"MouseDroidSound1"],[a.default.playSoundMouseDroidSound2(),"MouseDroidSound2"],[a.default.playSoundMouseDroidSound3(),"MouseDroidSound3"],[a.default.playSoundAlert1(),"alert1"],[a.default.playSoundAlert2(),"alert2"],[a.default.playSoundAlert3(),"alert3"],[a.default.playSoundAlert4(),"alert4"],[a.default.playSoundApplause(),"applause"]],e.soundChoicesK1=[],e.soundMetadata=[{name:"start",volume:.2},{name:"win",volume:.2},{name:"failure",volume:.2},{name:"flag",volume:.2},{name:"R2-D2sound1",volume:.2},{name:"R2-D2sound2",volume:.2},{name:"R2-D2sound3",volume:.2},{name:"R2-D2sound4",volume:.2},{name:"R2-D2sound5",volume:.2},{name:"R2-D2sound6",volume:.2},{name:"R2-D2sound7",volume:.2},{name:"R2-D2sound8",volume:.2},{name:"R2-D2sound9",volume:.2},{name:"C-3POsound1",volume:.2},{name:"C-3POsound2",volume:.2},{name:"C-3POsound3",volume:.2},{name:"C-3POsound4",volume:.2},{name:"PufferPigSound1",volume:.2},{name:"PufferPigSound2",volume:.2},{name:"PufferPigSound3",volume:.2},{name:"PufferPigSound4",volume:.2},{name:"TauntaunSound1",volume:.2},{name:"TauntaunSound2",volume:.2},{name:"TauntaunSound3",volume:.2},{name:"TauntaunSound4",volume:.2},{name:"MynockSound1",volume:.2},{name:"MynockSound2",volume:.2},{name:"MynockSound3",volume:.2},{name:"ProbotSound1",volume:.2},{name:"ProbotSound2",volume:.2},{name:"ProbotSound3",volume:.2},{name:"MouseDroidSound1",volume:.2},{name:"MouseDroidSound2",volume:.2},{name:"MouseDroidSound3",volume:.2},{name:"alert1",volume:.2},{name:"alert2",volume:.2},{name:"alert3",volume:.2},{name:"alert4",volume:.2},{name:"applause",volume:.2}],e.musicMetadata=r,e.playFinalGoalSound=!0,e.mapChoices=[[a.default.setMapRandom(),n.RANDOM_VALUE],[a.default.setMapBlank(),"blank"],[a.default.setMapCircle(),"circle"],[a.default.setMapHorizontal(),"horizontal"],[a.default.setMapGrid(),"grid"],[a.default.setMapBlobs(),"blobs"]],e.backgroundChoices=[[a.default.setBackgroundRandom(),n.RANDOM_VALUE],[a.default.setBackgroundEndor(),'"endor"'],[a.default.setBackgroundHoth(),'"hoth"'],[a.default.setBackgroundStarship(),'"starship"']],e.backgroundChoicesK1=[[e.endor.background,'"endor"'],[e.hoth.background,'"hoth"'],[e.starship.background,'"starship"'],[e.randomPurpleIcon,n.RANDOM_VALUE]],e.spriteChoices=[[a.default.setDroidHidden(),n.HIDDEN_VALUE],[a.default.setDroidRandom(),n.RANDOM_VALUE],[a.default.setDroidR2D2(),'"r2-d2"'],[a.default.setDroidC3PO(),'"c-3po"']],e.setSpritePrefix=a.default.setDroid(),e.projectileChoices=[],e.itemChoices=[[a.default.itemStormtrooper(),'"stormtrooper"'],[a.default.itemRebelPilot(),'"rebelpilot"'],[a.default.itemPufferPig(),'"pufferpig"'],[a.default.itemMynock(),'"mynock"'],[a.default.itemMouseDroid(),'"mousedroid"'],[a.default.itemTauntaun(),'"tauntaun"'],[a.default.itemProbot(),'"probot"'],[a.default.itemRandom(),n.RANDOM_VALUE]],e.msgOverrides={ifSprite:a.default.ifDroid,ifSpriteN:a.default.ifDroidN,moveSprite:a.default.moveDroid,moveSpriteN:a.default.moveDroidN,setSpriteN:a.default.setDroidN,stopSprite:a.default.stopDroid,stopSpriteN:a.default.stopDroidN,whenSpriteClicked:a.default.whenDroidClicked,whenSpriteClickedN:a.default.whenDroidClickedN}},t.loadStarWarsGrid=function(e){e.preloadAssets=!0,e.sortDrawOrder=!0,e.gridAlignedMovement=!0,e.gridAlignedExtraPauseSteps=1,e.slowExecutionFactor=10,e.hideIconInClearPuzzle=!0,e.defaultBackground="main",e.showGrid=!0,e.projectileFrames=10,e.itemFrames=10,e.instructions2ImageSubstitutions={bb8:e.assetUrl("instructions_bb8.png"),hazard:e.assetUrl("instructions_hazard.png"),scrapmetal1:e.assetUrl("goal1.png"),scrapmetal2:e.assetUrl("goal2.png")},e.blankAvatar=e.assetUrl("blank.png"),e.avatarAllowedScripts=["starwars","starwarsblocks"],e.ProjectileClassNames=[],e.ItemClassNames=["hazard"],e.AutohandlerTouchItems={},e.AutohandlerGetAllItems={},e.specialItemProperties={hazard:{frames:13,animationFrameDuration:6,width:100,height:100,scale:1.3,renderOffset:{x:0,y:-25},activity:n.BEHAVIOR_WATCH_ACTOR,speed:n.SpriteSpeed.VERY_SLOW,isHazard:!0}},e.goal1=e.assetUrl("goal1.png"),e.goal2=e.assetUrl("goal2.png"),e.goalSpriteWidth=50,e.goalSpriteHeight=50,e.animatedGoalFrames=1,e.disableClipRectOnGoals=!0,e.goalEffect="glow",e.timePerGoalAnimationFrame=100,e.goalCollisionRectWidth=50,e.goalCollisionRectHeight=50,e.fadeOutGoal=!0,e.goalSuccess=null,e.goalRenderOffsetX=0,e.goalRenderOffsetY=0,e.projectileSpriteWidth=70,e.projectileSpriteHeight=70,e.itemCollisionRectWidth=50,e.itemCollisionRectHeight=50,e.spriteCollisionRectWidth=50,e.spriteCollisionRectHeight=50,e.wallCollisionRectOffsetX=0,e.wallCollisionRectOffsetY=24,e.wallCollisionRectWidth=30,e.wallCollisionRectHeight=20,e.gridSpriteRenderOffsetX=-20,e.gridSpriteRenderOffsetY=-40,e.avatarList=["bb-8"],e.avatarList.forEach((function(t){e[t]={sprite:e.assetUrl("avatar_"+t+".png"),walk:e.assetUrl("walk_"+t+".png"),dropdownThumbnail:e.assetUrl("avatar_"+t+"_thumb.png"),frameCounts:{normal:21,turns:8,emotions:0,walk:19},drawScale:2,animations:{turns:8},animationFrameDuration:3}})),e["bb-8"].movementAudio=[{begin:"move1",volume:.3},{begin:"move2",volume:.3},{begin:"move3",volume:.3},{begin:"move4",volume:.3}],e.preventProjectileLoop=function(e){return""===e},e.preventItemLoop=function(e){return""===e},e.winAvatar=null,e.hazard=e.assetUrl("hazard_idle.png"),e.main={background:e.assetUrl("background_background1.jpg"),tiles:e.assetUrl("tiles_background1.png"),clouds:[e.assetUrl("cloud_light.png"),e.assetUrl("cloud_light2.png")]},e.enlargeWallTiles={minCol:0,maxCol:3,minRow:3,maxRow:5},e.sounds=["move1","move2","move3","move4"],e.soundChoices=[],e.soundChoicesK1=[],e.musicMetadata=r,e.playFinalGoalSound=!0,e.mapChoices=[],e.backgroundChoices=[],e.backgroundChoicesK1=[],e.spriteChoices=[[a.default.setDroidHidden(),n.HIDDEN_VALUE],[a.default.setDroidRandom(),n.RANDOM_VALUE],[a.default.setDroidBB8(),'"bb-8"']],e.setSpritePrefix=a.default.setDroid(),e.projectileChoices=[],e.itemChoices=[]};var o,n=i(1211),a=(o=i(1490))&&o.__esModule?o:{default:o};var r=[{name:"song1",volume:.5},{name:"song2",volume:.5},{name:"song3",volume:.5},{name:"song4",volume:.4},{name:"song5",volume:.4},{name:"song6",volume:.5},{name:"song7",volume:.4},{name:"song8",volume:.4},{name:"song9",volume:.4},{name:"song10",volume:.5},{name:"song11",volume:.45},{name:"song12",volume:.4},{name:"song13",volume:.4},{name:"song14",volume:.5},{name:"song15",volume:.55}]},2859:(e,t,i)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var n=ie(i(32)),a=te(i(1211)),r=te(i(33)),s=ie(i(53)),l=ie(i(1502)),u=ie(i(3513)),d=ie(i(3008)),c=ie(i(3362)),p=ie(i(3515)),m=ie(i(2938)),h=ie(i(2657)),S=ie(i(885)),f=ie(i(1916)),g=ie(i(1696)),_=ie(i(3009)),y=ie(i(3010)),b=ie(i(1)),v=ie(i(36)),k=ie(i(3518)),T=ie(i(3519)),E=ie(i(3011)),A=ie(i(3520)),w=ie(i(3521)),I=ie(i(3012)),C=ie(i(3514)),x=ie(i(2104)),R=ie(i(972)),D=ie(i(13)),O=ie(i(422)),P=ie(i(3714)),N=ie(i(1677)),U=ie(i(2543)),B=ie(i(1490)),F=i(3517),M=i(27),L=i(678),H=i(966),V=ie(i(2045)),G=i(963),j=i(136),W=ie(i(687)),q=i(1601),Y=ie(i(451)),X=i(677),z=i(474),Z=i(2264),Q=i(1501),K=i(896);i(730);var J=i(137),$=i(469);function ee(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(ee=function(e){return e?i:t})(e)}function te(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var i=ee(t);if(i&&i.has(e))return i.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var s=a?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r]}return n.default=e,i&&i.set(e,n),n}function ie(e){return e&&e.__esModule?e:{default:e}}function oe(e,t,i){return oe=ne()?Reflect.construct.bind():function(e,t,i){var o=[null];o.push.apply(o,t);var n=new(Function.bind.apply(e,o));return i&&ae(n,i.prototype),n},oe.apply(null,arguments)}function ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}function re(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=le(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function se(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"==typeof e)return ue(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var de=a.Direction,ce=a.CardinalDirections,pe=a.NextTurn,me=a.SquareType,he=a.Emotions,Se=a.turnRight90,fe=a.turnLeft90,ge=!1,_e=e.exports;_e.keyState={},_e.gesturesObserved={},_e.btnState={};var ye=0,be=1,ve={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"};_e.GameStates={WAITING:0,ACTIVE:1,OVER:2};var ke,Te,Ee=["top","left","bottom","right"],Ae=["gumball","studio","iceage","infinity","hoc2015"];(0,L.singleton)().setCheckForEmptyBlocks(!0);var we={whenRun:"whenGameStarts",whenDown:"when-down",whenUp:"when-up",whenLeft:"when-left",whenRight:"when-right",whenGetCharacter:"whenSpriteCollided-"+(_e.protagonistSpriteIndex||0)+"-any_item",whenTouchCharacter:"whenSpriteCollided-"+(_e.protagonistSpriteIndex||0)+"-any_item",whenTouchObstacle:"whenSpriteCollided-"+(_e.protagonistSpriteIndex||0)+"-wall",whenGetAllCharacters:"whenGetAllItems",whenTouchGoal:"whenTouchGoal",whenTouchAllGoals:"whenTouchAllGoals",whenScore1000:"whenScore1000"};_e.scale={snapRadius:1,stepSpeed:33};var Ie=360,Ce={text:B.default.shareStudioTwitterDonor({donor:(0,Z.getRandomDonorTwitter)()}),hashtag:"StudioCode"},xe=null,Re=[{defaultValues:{map:[[16,0,0,16,0,0,16,0],[0,0,0,0,0,0,0,0],[16,0,0,16,0,0,16,0],[0,0,0,0,0,0,0,0],[16,0,0,16,0,0,16,0],[0,0,0,0,0,0,0,0],[16,0,0,16,0,0,16,0],[0,0,0,0,0,0,0,0]],firstSpriteIndex:1,spritesHiddenToStart:!0},generateBlocks:function(e){for(var t=[],i=1,o=0;o<_e.ROWS;o++)for(var n=0;n<_e.COLS;n++){var r=_e.map[o][n].serialize();if(r.tileType&a.SquareType.SPRITESTART){var s={x:(i-1)%3*3,y:2*parseInt((i-1)/3)};1===ke.firstSpriteIndex&&!r.sprite||ke.spritesHiddenToStart||t.push((0,X.blockAsXmlNode)("studio_setSpriteParams",{titles:{VALUE:'"'.concat(_e.startAvatars[r.sprite?r.sprite:i+(ke.firstSpriteIndex||0)],'"')},values:{SPRITE:{type:"math_number",titleName:"NUM",titleValue:i}}})),n===s.x&&o===s.y||t.push((0,X.blockAsXmlNode)("studio_setSpriteXY",{values:{SPRITE:{type:"math_number",titleName:"NUM",titleValue:i},XPOS:{type:"math_number",titleName:"NUM",titleValue:n*_e.SQUARE_SIZE+_e.sprite[i-1].width/2},YPOS:{type:"math_number",titleName:"NUM",titleValue:o*_e.SQUARE_SIZE+_e.sprite[i-1].height/2}}})),void 0!==r.speed&&r.speed!==a.DEFAULT_SPRITE_SPEED&&t.push((0,X.blockAsXmlNode)("studio_setSpriteSpeedParams",{values:{SPRITE:{type:"math_number",titleName:"NUM",titleValue:i},VALUE:{type:"math_number",titleName:"NUM",titleValue:r.speed}}})),void 0!==r.size&&r.size!==a.DEFAULT_SPRITE_SIZE&&t.push((0,X.blockAsXmlNode)("studio_setSpriteSizeParams",{values:{SPRITE:{type:"math_number",titleName:"NUM",titleValue:i},VALUE:{type:"math_number",titleName:"NUM",titleValue:r.size}}})),r.emotion&&r.emotion!==he.NORMAL&&t.push((0,X.blockAsXmlNode)("studio_setSpriteEmotion",{titles:{SPRITE:i,VALUE:r.emotion}})),i++}r.tileType&a.SquareType.SPRITEFINISH&&t.push((0,X.blockAsXmlNode)("sudio_addGoalXY",{values:{XPOS:{type:"math_number",titleName:"NUM",titleValue:n*_e.SQUARE_SIZE},YPOS:{type:"math_number",titleName:"NUM",titleValue:o*_e.SQUARE_SIZE}}}))}return t}},{defaultValues:{allowSpritesOutsidePlayspace:!1},generateBlocks:function(e){return[(0,X.blockAsXmlNode)("studio_allowSpritesOutsidePlayspace",{titles:{VALUE:"true"}})]}}];_e.loadLevel=function(){switch(_e.map=ke.map.map((function(e){return e.map((function(e){var t=isNaN(parseInt(e))?U.default.deserialize(e):new U.default(e);return t.tileType_&a.WallCoordsMask&&(_e.wallMapCollisions=!0),t}))})),_e.wallMap=null,_e.wallMapRequested=null,_e.allowSpritesOutsidePlayspace=ke.allowSpritesOutsidePlayspace,_e.timeoutFailureTick=ke.timeoutFailureTick||1/0,_e.slowExecutionFactor=Te.slowExecutionFactor||1,_e.gridAlignedExtraPauseSteps=Te.gridAlignedExtraPauseSteps||0,_e.ticksBeforeFaceSouth=_e.slowExecutionFactor+r.valueOr(ke.ticksBeforeFaceSouth,a.IDLE_TICKS_BEFORE_FACE_SOUTH),_e.minWorkspaceHeight=ke.minWorkspaceHeight,_e.softButtons_=ke.softButtons||{},_e.protagonistSpriteIndex=r.valueOr(ke.protagonistSpriteIndex,ke.protaganistSpriteIndex),ke.customGameType){case"Big Game":_e.customLogic=new u.default(_e);break;case"Rocket Height":_e.customLogic=new k.default(_e);break;case"Sam the Bat":_e.customLogic=new T.default(_e);break;case"Ninja Cat":_e.customLogic=new u.default(_e,{staticPlayer:!0})}var e,t;for(var i in x.default.registerCustomGameLogic(_e.customLogic),_e.legacyRuntime=!!_e.customLogic,ke.avatarList?_e.startAvatars=ke.avatarList.slice():_e.startAvatars=(e=Te.avatarList,t=(t=ke.firstSpriteIndex)||0,s.default.flattenDeep([e.slice(t),e.slice(0,t)])),ke.scale)_e.scale[i]=ke.scale[i];_e.ROWS=_e.map.length,_e.COLS=_e.map[0].length,_e.SQUARE_SIZE=50,_e.HALF_SQUARE=_e.SQUARE_SIZE/2,_e.MARKER_HEIGHT=ke.markerHeight||100,_e.MARKER_WIDTH=ke.markerWidth||100,_e.MAZE_WIDTH=_e.SQUARE_SIZE*_e.COLS,_e.MAZE_HEIGHT=_e.SQUARE_SIZE*_e.ROWS,(0,L.singleton)().MAZE_WIDTH=_e.MAZE_WIDTH,(0,L.singleton)().MAZE_HEIGHT=_e.MAZE_HEIGHT,_e.walls=Te.customObstacleZones?new _.default(ke,Te,_e.drawDebugRect):Te.wallMaps?new d.default(ke,Te,_e.drawDebugRect,_e.drawDebugOverlay,_e.MAZE_WIDTH,_e.MAZE_HEIGHT):new I.default(ke,Te,_e.drawDebugRect,_e.SQUARE_SIZE,_e.ROWS,_e.COLS,_e.getWallValue)};function De(e,t,i,o,n,a){return Math.abs(e-t)<=i&&Math.abs(o-n)<=a}_e.allGoals_=function(){return _e.spriteGoals_.concat(_e.dynamicSpriteGoals_)},_e.createGoalElements=function(e,t){var i=document.getElementById("svgStudio"),o=document.getElementById("backgroundLayer"),n=r.valueOr(ke.goalOverride,{}),a=1;n.goalAnimation&&Te.animatedGoalFrames&&(a=Te.animatedGoalFrames);var s=Te.goalSpriteWidth?Te.goalSpriteWidth*a:r.valueOr(n.imageWidth,_e.MARKER_WIDTH),l=Te.goalSpriteHeight?Te.goalSpriteHeight:r.valueOr(n.imageHeight,_e.MARKER_HEIGHT),u=r.valueOr(Te.goalSpriteWidth,_e.MARKER_WIDTH),d=r.valueOr(Te.goalSpriteHeight,_e.MARKER_HEIGHT),c=r.valueOr(n.goalRenderOffsetX,r.valueOr(Te.goalRenderOffsetX,0)),p=r.valueOr(n.goalRenderOffsetY,r.valueOr(Te.goalRenderOffsetY,0));t.clipPath=document.createElementNS(J.SVG_NS,"clipPath"),t.clipPath.setAttribute("id","finishClipPath"+e),t.clipRect=document.createElementNS(J.SVG_NS,"rect"),t.clipRect.setAttribute("id","finishClipRect"+e),t.clipRect.setAttribute("width",u),t.clipRect.setAttribute("height",d),t.clipPath.appendChild(t.clipRect),o.appendChild(t.clipPath),t.marker=document.createElementNS(J.SVG_NS,"image"),t.marker.setAttribute("id","spriteFinish"+e),t.marker.setAttribute("width",s),t.marker.setAttribute("height",l),Te.disableClipRectOnGoals||t.marker.setAttribute("clip-path","url(#"+t.clipPath.id+")"),t.marker.setAttribute("x",t.x+c),t.marker.setAttribute("y",t.y+p),t.marker.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_e.getGoalAssetFromSkin()),t.marker.setAttribute("opacity",1),t.clipRect.setAttribute("x",t.x+c),t.clipRect.setAttribute("y",t.y+p),i.appendChild(t.marker)};var Oe=null;_e.applyGoalEffect=function(){if(!Oe){var e=document.getElementById("svgStudio");Oe=new p.default(e)}Oe&&_e.allGoals_().forEach((function(e){Oe.applyTo(e.marker)}))},_e.removeGoalEffect=function(){Oe&&_e.allGoals_().forEach((function(e){Oe.removeFrom(e.marker)}))};var Pe=function(e,t,i){return function(){var o=Array.prototype.slice.apply(arguments).concat(i);t.apply(e,o)}},Ne=function(e,t){_e.eventHandlers.forEach((function(i){var o=i.cmdQueue[0];if(o&&"moveDistance"===o.name&&o.opts.spriteIndex===e){var n=o.opts.dir;(!t||n!==de.NORTH&&n!==de.SOUTH)&&(t||n!==de.EAST&&n!==de.WEST)&&ce.includes(n)||(o.opts.queuedDistance=0)}}))},Ue=function(e,t){var i=function(e,t){var i={x:0,y:0};return _e.eventHandlers.forEach((function(o){var n=o.cmdQueue[0];if(n&&"moveDistance"===n.name&&n.opts.spriteIndex===e){var a=Math.min(n.opts.queuedDistance||1/0,_e.sprite[n.opts.spriteIndex].speed),s=r.normalize(de.getUnitVector(n.opts.dir));i.x+=a*s.x,i.y+=a*s.y,!t||0===s.x&&0===s.y||(n.opts.queuedDistance-=a,"0.00"===Math.abs(n.opts.queuedDistance).toFixed(2)&&o.cmdQueue.shift())}})),i}(e,t);return 0===i.x&&0===i.y?_e.sprite[e].getNextPosition():{x:_e.sprite[e].x+i.x,y:_e.sprite[e].y+i.y}},Be=function(e){var t,i,o=_e.sprite[e],n=o.x,a=o.y,r=Ue(e,!0);if(_e.allowSpritesOutsidePlayspace)t=r.x,i=r.y;else{var s=_e.getPlayspaceBoundaries(o);t=Math.min(s.right,Math.max(s.left,r.x)),r.x!==t&&Ne(e,!1),i=Math.min(s.bottom,Math.max(s.top,r.y)),r.y!==i&&Ne(e,!0)}!_e.wallMapCollisions||t===n&&i===a||_e.willSpriteTouchWall(o,t,i)&&(_e.willSpriteTouchWall(o,t,a)?_e.willSpriteTouchWall(o,n,i)?(t=n,i=a,Ne(e,!1),Ne(e,!0)):(t=n,Ne(e,!1)):(i=a,Ne(e,!0))),o.x=t,o.y=i,n===o.x&&a===o.y||(o.lastMove=_e.tickCount)},Fe=_e.setSvgText=function(e){for(var t=e.width,i=e.text.toString().split(" "),o=!1;t<=e.maxWidth;){for(;e.svgText.firstChild;)e.svgText.removeChild(e.svgText.firstChild);for(var n=0,a=1;a<=e.maxLines;a++){var r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttribute("x",t/2),r.setAttribute("dy",e.lineHeight+(1===a?e.topMargin:0));var s,l=document.createTextNode(i[n]);if(n++,r.appendChild(l),e.svgText.appendChild(r),r.getComputedTextLength&&r.getComputedTextLength()>t-2*e.sideMargin&&t<e.maxWidth){t=Math.min(r.getComputedTextLength()+2*e.sideMargin,e.maxWidth),o=!0;break}do{if(n===i.length)return{height:e.fullHeight-(e.maxLines-a)*e.lineHeight,width:t};s=r.firstChild.data.length,r.firstChild.data+=" "+i[n],n++}while(r.getComputedTextLength&&r.getComputedTextLength()<=t-2*e.sideMargin);r.firstChild.data=r.firstChild.data.slice(0,s),n--}if(o)o=!1;else{if(!(t<e.maxWidth))return{height:e.fullHeight,width:t};t=Math.min(t*i.length/n,e.maxWidth)}}};function Me(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(["when-up","when-down","when-left","when-right"].includes(e)){var o=(0,j.getStore)();o.getState().arrowDisplay.swipeOverlayHasBeenDismissed||o.dispatch((0,K.dismissSwipeOverlay)("buttonKeyPress"))}if(ke.autoArrowSteer){var n;switch(e){case"when-up":n=de.NORTH;break;case"when-down":n=de.SOUTH;break;case"when-left":n=de.WEST;break;case"when-right":n=de.EAST}n&&_e.queueCmd(null,"move",{spriteIndex:_e.protagonistSpriteIndex||0,dir:n})}_e.eventHandlers.forEach((function(o){if((0,L.singleton)().isUsingBlockly()){if(o&&o.name===e&&(t||0===o.cmdQueue.length)){_e.currentCmdQueue=o.cmdQueue;try{_e.legacyRuntime?o.func.apply(o,[C.default,_e.Globals].concat(se(i))):o.func.apply(o,se(i))}catch(n){console.error(n)}_e.currentCmdQueue=null}}else o&&o.name===e&&o.func.apply(null,i)}))}function Le(e){for(var t=e.length-1;t>=0;t--)e[t].moveToNextPosition(),e[t].outOfBounds()&&(e[t].removeElement(),e.splice(t,1))}function He(e){for(var t=e.length-1;t>=0;t--)e[t].display()}function Ve(){if(Te.sortDrawOrder){for(var e,t=document.getElementById("spriteLayer"),i=[],o=0;o<_e.items.length;o++)e={element:_e.items[o].getElement(),y:_e.items[o].y+_e.items[o].height/2+_e.items[o].renderOffset.y},i.push(e),_e.drawDebugRect("itemLocation",_e.items[o].x,_e.items[o].y,4,4),_e.drawDebugRect("itemBottom",_e.items[o].x,e.y,4,4);for(o=0;o<_e.sprite.length;o++){var n=_e.sprite[o],a=n.displayY+n.height;(e={element:document.getElementById("explosion"+o),y:a}).element&&i.push(e),(e={element:n.getElement(),y:a}).element&&i.push(e),(e={element:n.getLegacyElement(),y:a}).element&&i.push(e),_e.drawDebugRect("spriteBottom",_e.sprite[o].x,n.y,4,4)}for(o=0;o<_e.tiles.length;o++)i.push({element:document.getElementById("tile_"+o),y:_e.tiles[o].bottomY});var r,l=Te.goalCollisionRectHeight||_e.MARKER_HEIGHT;for(_e.allGoals_().forEach((function(e){i.push({element:e.marker,y:e.y+l})})),o=(i=s.default.sortBy(i,"y")).length-1;o>=0;o--)r?t.insertBefore(i[o].element,r):t.appendChild(i[o].element),r=i[o].element}}function Ge(e,t,i){var o=Te.spriteCollisionRectWidth||_e.sprite[e].width,n=Te.spriteCollisionRectHeight||_e.sprite[e].height,r=Te.spriteCollisionRectWidth||_e.sprite[t].width,s=Te.spriteCollisionRectHeight||_e.sprite[t].height,l=i?n:o,u=i?s:r;return a.SPRITE_COLLIDE_DISTANCE_SCALING*(l+u)/2}function je(e,t,i){var o=Te.spriteCollisionRectWidth||_e.sprite[e].width,n=Te.spriteCollisionRectHeight||_e.sprite[e].height,r=Te.itemCollisionRectWidth||t.width,s=Te.itemCollisionRectHeight||t.height,l=i?n:o,u=i?s:r;return a.SPRITE_COLLIDE_DISTANCE_SCALING*(l+u)/2}function We(e,t,i){return((i?e.height:e.width)+("left"===t||"right"===t?i?_e.MAZE_HEIGHT:0:i?0:_e.MAZE_WIDTH))/2}function qe(e,t,i,o,n){for(var r,s,l,u=a.SPRITE_COLLIDE_DISTANCE_SCALING,d=o.filter((function(e){return!(e.isFading&&e.isFading())})),c=d.length-1;c>=0;c--)s=(r=d[c]).getNextPosition(),_e.drawDebugRect("itemCollision",s.x,s.y,u*(Te.itemCollisionRectWidth||r.width),u*(Te.itemCollisionRectHeight||r.height)),_e.drawDebugRect("spriteCollision",t,i,u*(Te.spriteCollisionRectWidth||_e.sprite[e].width),u*(Te.spriteCollisionRectHeight||_e.sprite[e].height)),De(t,s.x,je(e,r,!1),i,s.y,je(e,r,!0))?r.startCollision(e)&&(_e.currentEventParams={eventObject:r},kt(e,r.className,!0),_e.currentEventParams=null,n&&(o===_e.items&&(1===d.length&&(Me("whenGetAllItems"),_e.trackedBehavior.gotAllItems=!0),l=r.className,1===d.reduce((function(e,t){return e+(l===t.className?1:0)}),0)&&Me("whenGetAll-"+l)),r.beginRemoveElement?r.beginRemoveElement():(r.removeElement(),o.splice(o.indexOf(r),1)),d.splice(c,1))):r.endCollision(e)}function Ye(e,t,i,o){for(var n=0;n<Ee.length&&!_e.allowSpritesOutsidePlayspace;n++){var a,r,s=Ee[n];switch(s){case"top":a=_e.MAZE_WIDTH/2,r=0;break;case"left":a=0,r=_e.MAZE_HEIGHT/2;break;case"bottom":a=_e.MAZE_WIDTH/2,r=_e.MAZE_HEIGHT;break;case"right":a=_e.MAZE_WIDTH,r=_e.MAZE_HEIGHT/2}De(t,a,We(e,s,!1),i,r,We(e,s,!0))?e.startCollision(s)&&o(s):e.endCollision(s)}}function Xe(e){return function(t){kt(e,t)}}function ze(e){return function(t){_e.currentEventParams={eventObject:e},Tt(e.className,t,!0),_e.currentEventParams=null}}_e.initAutoHandlers=function(e){for(var t in e){var i=_e.JSInterpreter.findGlobalFunction(t),o=R.default.createNativeFunctionFromInterpreterFunction(i);i&&it(_e.eventHandlers,e[t],o)}},_e.callApiCode=function(e,t){it(_e.eventHandlers,e,t),Me(e),_e.executeQueue(e)},_e.onTick=function(){var e;_e.tickCount++,_e.clearDebugElements(),_e.tickCount===a.CAPTURE_TICK_COUNT&&(0,q.captureThumbnailFromSvg)(document.getElementById("svgStudio"));var t=_e.pauseInterpreter||0!=(_e.tickCount-1)%_e.slowExecutionFactor;if(!t&&_e.yieldExecutionTicks>0&&_e.yieldExecutionTicks--,_e.customLogic&&_e.customLogic.onTick(),1===_e.tickCount&&Me("whenGameStarts"),!t){for(_e.executeQueue("whenGameStarts"),Me("repeatForever"),_e.executeQueue("repeatForever"),e=0;e<_e.spriteCount;e++)_e.executeQueue("whenSpriteClicked-"+e);for(var i in J.KeyCodes)if(_e.keyState[J.KeyCodes[i]]&&"keydown"===_e.keyState[J.KeyCodes[i]])switch(J.KeyCodes[i]){case J.KeyCodes.LEFT:Me("when-left");break;case J.KeyCodes.UP:Me("when-up");break;case J.KeyCodes.RIGHT:Me("when-right");break;case J.KeyCodes.DOWN:Me("when-down")}for(var o in ve)if(_e.btnState[ve[o]]&&_e.btnState[ve[o]]===be)switch(ve[o]){case ve.LEFT:Me("when-left");break;case ve.UP:Me("when-up");break;case ve.RIGHT:Me("when-right");break;case ve.DOWN:Me("when-down")}for(var n in _e.gesturesObserved){switch(n){case"left":Me("when-left");break;case"up":Me("when-up");break;case"right":Me("when-right");break;case"down":Me("when-down")}0==_e.gesturesObserved[n]--&&delete _e.gesturesObserved[n]}_e.executeQueue("when-left"),_e.executeQueue("when-up"),_e.executeQueue("when-right"),_e.executeQueue("when-down");for(var r=0;r<_e.callbackQueueIndex;r++)_e.executeQueue("callbackQueue".concat(r));!function(){for(var e=_e.items.length-1;e>=0;e--){var t=_e.items[e];t.update(),t.hasCompletedFade()&&(t.removeElement(),_e.items.splice(e,1))}_e.sprite.forEach((function(e){e.update()}))}(),function(){!function(){for(var e=0;e<_e.items.length;e++){var t=_e.items[e],i=t.getNextPosition();if(!t.isFading||!t.isFading()){_e.wallMapCollisions&&(_e.walls.willCollidableTouchWall(t,i.x,i.y)?(_e.currentEventParams={eventObject:t},_e.collideItemWith(t,"wall",!0),_e.currentEventParams=null):t.endCollision("wall")),_e.allowSpritesOutsidePlayspace||Ye(t,i.x,i.y,ze(t)),Et(t.className,"wall");for(var o=0;o<Ee.length;o++)Et(t.className,Ee[o])}}}();for(var e=0;e<_e.spriteCount;e++){for(var t=_e.sprite[e],i=t.width/2,o=t.height/2,n=Ue(e,!1),a=n.x+i,r=n.y+o,s=0;s<_e.spriteCount;s++)if(e!==s&&t.visible&&_e.sprite[s].visible){var l=Ue(s,!1),u=l.x+_e.sprite[s].width/2,d=l.y+_e.sprite[s].height/2;De(a,u,Ge(e,s,!1),r,d,Ge(e,s,!0))?_e.collideSpriteWith(e,s):t.endCollision(s),At(e,s)}else At(e,s);for(t.visible&&(qe(e,a,r,_e.projectiles),qe(e,a,r,_e.items,ke.removeItemsWhenActorCollides),Ye(t,a,r,Xe(e)),_e.wallMapCollisions&&(_e.willSpriteTouchWall(t,n.x,n.y)?(Ne(e,!1),Ne(e,!0),_e.throttledCollideSpriteWithWallFunctions[e]()):t.endCollision("wall"))),At(e,"wall"),s=0;s<Ee.length;s++)At(e,Ee[s]);for(s=0;s<Te.ProjectileClassNames.length;s++)At(e,Te.ProjectileClassNames[s]);for(s=0;s<Te.ItemClassNames.length;s++)At(e,Te.ItemClassNames[s]),ke.removeItemsWhenActorCollides&&_e.executeQueue("whenGetAll-"+Te.ItemClassNames[s]);ke.removeItemsWhenActorCollides&&_e.executeQueue("whenGetAllItems")}}()}_e.JSInterpreter&&!t&&0===_e.yieldExecutionTicks&&_e.JSInterpreter.executeInterpreter(1===_e.tickCount);var s=!1;for(e=0;e<_e.spriteCount;e++){t||Be(e);var l=_e.sprite[e];l.shouldFaceSouthOnIdle()&&_e.tickCount-l.lastMove>_e.ticksBeforeFaceSouth&&(l.setDirection(de.NONE),_e.movementAudioOff()),_e.displaySprite(e),l.hasActions()&&(s=!0),_e.drawDebugRect("spriteCenter",_e.sprite[e].x,_e.sprite[e].y,5,5)}_e.animateGoals(),_e.animateClouds(),t||(Le(_e.projectiles),Le(_e.items)),He(_e.sprite),He(_e.projectiles),He(_e.items),_e.updateFloatingScore(),_e.drawTimeoutRect(),Ve();var u=(new Date).getTime();!_e.succeededTime&&Ct()&&(_e.succeededTime=u),t||_e.executeQueue("whenTouchGoal"),_e.succeededTime&&!s&&(!ke.delayCompletion||u>_e.succeededTime+ke.delayCompletion)&&_e.onPuzzleComplete(),_e.allGoalsVisited()&&(_e.trackedBehavior.allGoalsVisited=!0),_e.timedOut()&&(_e.trackedBehavior.timedOut=!0)},_e.willSpriteTouchWall=function(e,t,i){var o=t+e.width/2,n=i+e.height/2;return _e.walls.willCollidableTouchWall(e,o,n)},_e.willSpriteLeavePlayspace=function(e,t,i){var o=_e.getPlayspaceBoundaries(e);return t<o.left||t>o.right||i<o.top||i>o.bottom},_e.getWallValue=function(e,t){return e<0||e>=_e.ROWS||t<0||t>=_e.COLS?0:_e.wallMap?Te[_e.wallMap]?Te[_e.wallMap][e][t]<<a.WallCoordsShift:0:_e.map[e][t].getTileType()&a.WallAnyMask},_e.onSvgDrag=function(e){_e.tickCount>0&&(_e.gesturesObserved[e.gesture.direction]=Math.round(e.gesture.distance/25),e.gesture.preventDefault())},_e.onKey=function(e){_e.keyState[e.keyCode]=e.type,_e.tickCount>0&&e.keyCode>=J.KeyCodes.LEFT&&e.keyCode<=J.KeyCodes.DOWN&&e.preventDefault()},_e.onArrowButtonDown=function(e,t){_e.btnState[t]=be,e.preventDefault()},_e.onSpriteClicked=function(e,t){_e.tickCount>0&&Me("whenSpriteClicked-"+t),e.preventDefault()},_e.onSvgClicked=function(e){ke.tapSvgToRunAndReset&&_e.gameState===_e.GameStates.WAITING?_e.runButtonClick():ke.tapSvgToRunAndReset&&_e.gameState===_e.GameStates.OVER?(0,L.singleton)().resetButtonClick():_e.tickCount>0&&_e.eventHandlers.forEach((function(e){var t=e.cmdQueue[0];t&&t.opts.waitForClick&&!t.opts.complete&&(t.opts.waitCallback&&t.opts.waitCallback(),t.opts.complete=!0)})),e.preventDefault()},_e.onArrowButtonUp=function(e,t){_e.btnState[t]=ye},_e.onMouseUp=function(e){_e.btnState={}},_e.initSprites=function(){_e.spriteCount=0,_e.sprite=[],_e.startTime=null,_e.spriteGoals_=[];for(var e={},t=0;t<_e.ROWS;t++)for(var i=0;i<_e.COLS;i++)if(_e.map[t][i].getTileType()&me.SPRITEFINISH)_e.spriteGoals_.push({x:i*_e.SQUARE_SIZE,y:t*_e.SQUARE_SIZE,finished:!1});else if(_e.map[t][i].getTileType()&me.SPRITESTART){var o=_e.map[t][i].serialize();if(0===_e.spriteCount&&(_e.spriteStart_=[]),void 0!==o.sprite){var n=o.sprite-(ke.firstSpriteIndex||0);n<0&&(n+=_e.startAvatars.length),e[_e.spriteCount]=_e.startAvatars[n]}_e.spriteStart_[_e.spriteCount]=Object.assign({},o,{x:i*_e.SQUARE_SIZE,y:t*_e.SQUARE_SIZE}),_e.spriteCount++}Object.assign(_e.startAvatars,e),(0,L.singleton)().isUsingBlockly()&&(x.default.setSpriteCount(Blockly,_e.spriteCount),x.default.setStartAvatars(_e.startAvatars),ke.projectileCollisions&&x.default.enableProjectileCollisions(Blockly))},_e.initReadonly=function(e){Te=e.skin,ke=e.level,N.default.initWithSkinAndLevel(Te,ke),_e.loadLevel(),e.appMsg=B.default,_e.initSprites(),(0,L.singleton)().initReadonly(e)},_e.init=function(e){for(var t in(0,L.singleton)().reset=this.reset.bind(this),(0,L.singleton)().runButtonClick=this.runButtonClick.bind(this),(0,n.default)(window).on("run_button_pressed",(function(){document.getElementById("runButton").focus()})),_e.projectiles=[],_e.items=[],_e.itemSpeed={},_e.itemActivity={},_e.eventHandlers=[],_e.perExecutionTimeouts=[],_e.tickIntervalId=null,_e.tiles=[],_e.tilesDrawn=!1,_e.spriteGoals_=[],_e.dynamicSpriteGoals_=[],_e.cloudStep=0,_e.clearEventHandlersKillTickLoop(),Te=e.skin,ke=e.level,xe=new f.default(window.console),(0,H.injectErrorHandler)(new V.default((function(){return _e.JSInterpreter}),xe)),ke.msgStringOverrides)B.default[t]=B.default[ke.msgStringOverrides[t]];N.default.initWithSkinAndLevel(Te,ke);var i=!!ke.useContractEditor;e.grayOutUndeletableBlocks=i,_e.loadLevel(),_e.background=et(),_e.customLogic&&(Te.staticAvatar=null,Te.smallStaticAvatar=null,Te.failureAvatar=null,Te.winAvatar=null),window.addEventListener("keydown",_e.onKey,!1),window.addEventListener("keyup",_e.onKey,!1);var o=[];for(t in ke.music&&Te.musicMetadata&&(o=Te.musicMetadata.filter((function(e){return-1!==ke.music.indexOf(e.name)}))),_e.makeThrottledPlaySound(),_e.musicController=new g.default(W.default.getSingleton(),Te.assetUrl,o,void 0,(0,Q.muteCookieWithLevel)(e.level)),e.muteBackgroundMusic=function(){_e.musicController.setMuteMusic(!0)},e.unmuteBackgroundMusic=function(){_e.musicController.setMuteMusic(!1)},_e.movementAudioEffects={},e.loadAudio=function(){var e=[];e.push.apply(e,Te.builtinSounds),e.push.apply(e,Te.sounds),e.push.apply(e,_e.getMovementSoundFileNames(Te)),e=s.default.uniq(e),Te.soundFiles={},e.forEach((function(e){e=e.toLowerCase(),Te.soundFiles[e]=[Te.assetUrl(e+".mp3"),Te.assetUrl(e+".ogg")],(0,L.singleton)().loadAudio(Te.soundFiles[e],e)})),_e.musicController.preload()},e.level.afterVideoBeforeInstructionsFn=function(e){W.default.getSingleton().whenAudioUnlocked((function(){return _e.musicController.play()})),e()},e.level.levelTracks=o,e.afterInject=function(){for(var e in ve)O.default.addMouseUpTouchEvent(document.getElementById(ve[e]),Pe(this,_e.onArrowButtonUp,ve[e])),O.default.addMouseDownTouchEvent(document.getElementById(ve[e]),Pe(this,_e.onArrowButtonDown,ve[e]));document.addEventListener("mouseup",_e.onMouseUp,!1),(0,L.singleton)().isUsingBlockly()&&(Blockly.HSV_SATURATION=.6,Blockly.SNAP_RADIUS*=_e.scale.snapRadius,Blockly.contractEditor&&Blockly.contractEditor.registerTestHandler(_e.getStudioExampleFailure)),function(){var e,t=document.getElementById("svgStudio");t.setAttribute("width",_e.MAZE_WIDTH),t.setAttribute("height",_e.MAZE_HEIGHT);var i=new c.default(t);i.on("tap",_e.onSvgClicked),i.on("drag",_e.onSvgDrag),document.getElementById("visualizationColumn").style.width=_e.MAZE_WIDTH+"px";var o=document.createElementNS(J.SVG_NS,"g");if(o.setAttribute("id","backgroundLayer"),t.appendChild(o),_e.background&&Te[_e.background].background){var n=document.createElementNS(J.SVG_NS,"image");n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Te[_e.background].background),n.setAttribute("id","background"),n.setAttribute("height",_e.MAZE_HEIGHT),n.setAttribute("width",_e.MAZE_WIDTH),n.setAttribute("x",0),n.setAttribute("y",0),o.appendChild(n)}if(Te.showGrid){var r=document.createElementNS(J.SVG_NS,"image");r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",(0,L.singleton)().assetUrl("media/skins/studio/grid.svg")),r.setAttribute("height",_e.MAZE_HEIGHT),r.setAttribute("width",_e.MAZE_WIDTH),r.setAttribute("x",0),r.setAttribute("y",0),o.appendChild(r)}ke.coordinateGridBackground&&(0,L.singleton)().createCoordinateGridBackground({svg:"backgroundLayer",origin:0,firstLabel:100,lastLabel:300,increment:100});var s=document.createElementNS(J.SVG_NS,"g");if(s.setAttribute("id","spriteLayer"),t.appendChild(s),_e.wallMapCollisions&&_e.drawMapTiles(),_e.spriteStart_)for(e=0;e<_e.spriteCount;e++){var l=document.createElementNS(J.SVG_NS,"g");l.setAttribute("id","speechBubble"+e),l.setAttribute("visibility","hidden");var u=document.createElementNS(J.SVG_NS,"path");u.setAttribute("id","speechBubblePath"+e),u.setAttribute("class","studio-speech-bubble-path");var d=document.createElementNS(J.SVG_NS,"text");d.setAttribute("id","speechBubbleText"+e),d.setAttribute("class","studio-speech-bubble"),l.appendChild(u),l.appendChild(d),t.appendChild(l)}if(_e.spriteGoals_)for(e=0;e<_e.spriteGoals_.length;e++)_e.createGoalElements(e,_e.spriteGoals_[e]);_e.applyGoalEffect();var p=document.createElementNS(J.SVG_NS,"g");for(p.setAttribute("id","cloudLayer"),e=0;e<a.MAX_NUM_CLOUDS;e++){var m=document.createElementNS(J.SVG_NS,"image");m.setAttribute("id","cloud"+e),p.appendChild(m)}t.appendChild(p);var h=document.createElementNS(J.SVG_NS,"g");h.setAttribute("id","gameTextGroup"),t.appendChild(h);var S=document.createElementNS(J.SVG_NS,"g");S.setAttribute("id","overlayGroup"),t.appendChild(S);var f=document.createElementNS(J.SVG_NS,"text");f.setAttribute("id","score"),f.setAttribute("class","studio-score"),f.setAttribute("x",_e.MAZE_WIDTH/2),f.setAttribute("y",30),f.appendChild(document.createTextNode("")),f.setAttribute("visibility","hidden"),h.appendChild(f);var g=document.createElementNS(J.SVG_NS,"text");if(g.setAttribute("id","victoryText"),g.setAttribute("class","studio-victory-text"),g.setAttribute("x",_e.MAZE_WIDTH/2),g.setAttribute("y",130),g.appendChild(document.createTextNode("")),g.setAttribute("visibility","hidden"),h.appendChild(g),O.default.isMobile()||O.default.isWindowsTouch()){var _=document.createElementNS(J.SVG_NS,"rect");_.setAttribute("width",_e.MAZE_WIDTH),_.setAttribute("height",_e.MAZE_HEIGHT),_.setAttribute("fill","black"),_.setAttribute("opacity",.3),S.appendChild(_);var y=document.createElementNS(J.SVG_NS,"text");y.setAttribute("id","resetTextA"),y.setAttribute("class","studio-reset-text"),y.setAttribute("x",_e.MAZE_WIDTH/2),y.setAttribute("y",350),y.appendChild(document.createTextNode(B.default.tapToPlay())),y.setAttribute("visibility","visible"),S.appendChild(y);var b=document.createElementNS(J.SVG_NS,"text");b.setAttribute("id","resetTextB"),b.setAttribute("class","studio-reset-text"),b.setAttribute("x",_e.MAZE_WIDTH/2),b.setAttribute("y",380),b.appendChild(document.createTextNode(B.default.swipeToMove())),b.setAttribute("visibility","visible"),S.appendChild(b);var v=document.createElementNS(J.SVG_NS,"image");v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",(0,L.singleton)().assetUrl("media/common_images/touch-drag.png"));var k=300;v.setAttribute("width",k),v.setAttribute("height",k),v.setAttribute("x",(_e.MAZE_WIDTH-k)/2),v.setAttribute("y",(_e.MAZE_HEIGHT-k)/2-25),S.appendChild(v)}else{var T=document.createElementNS(J.SVG_NS,"text");T.setAttribute("id","resetText"),T.setAttribute("class","studio-reset-text"),T.setAttribute("x",_e.MAZE_WIDTH/2),T.setAttribute("y",380),T.appendChild(document.createTextNode(B.default.tapOrClickToReset())),T.setAttribute("visibility","visible"),S.appendChild(T)}if(ke.floatingScore){var E=document.createElementNS(J.SVG_NS,"text");E.setAttribute("id","floatingScore"),E.setAttribute("class","studio-floating-score"),E.setAttribute("x",_e.MAZE_WIDTH/2),E.setAttribute("y",30),E.appendChild(document.createTextNode("")),E.setAttribute("visibility","hidden"),t.appendChild(E)}var A=document.createElementNS(J.SVG_NS,"text");A.setAttribute("id","titleScreenTitle"),A.setAttribute("class","studio-ts-title"),A.setAttribute("x",_e.MAZE_WIDTH/2),A.setAttribute("y",60),A.appendChild(document.createTextNode("")),A.setAttribute("visibility","hidden"),t.appendChild(A);var w=document.createElementNS(J.SVG_NS,"g"),I=(_e.MAZE_WIDTH-Ie)/2;w.setAttribute("id","titleScreenTextGroup"),w.setAttribute("x",I),w.setAttribute("y",100),w.setAttribute("transform","translate("+I+",100)"),w.setAttribute("visibility","hidden");var C=document.createElementNS(J.SVG_NS,"rect");C.setAttribute("id","titleScreenTextRect"),C.setAttribute("x",0),C.setAttribute("y",0),C.setAttribute("width",Ie),C.setAttribute("class","studio-ts-text-rect");var x=document.createElementNS(J.SVG_NS,"text");x.setAttribute("id","titleScreenText"),x.setAttribute("class","studio-ts-text"),x.setAttribute("x",180),x.setAttribute("y",0),x.appendChild(document.createTextNode("")),w.appendChild(C),w.appendChild(x),t.appendChild(w)}()},e.afterClearPuzzle=function(){(0,L.singleton)().resetButtonClick()},e.polishCodeHook=function(e){if((0,L.singleton)().isUsingBlockly()){e=(e=(e=(e=e.replace(/Studio.move\('\S*', 0, 1\);/g,"moveUp();")).replace(/Studio.move\('\S*', 0, 2\);/g,"moveRight();")).replace(/Studio.move\('\S*', 0, 4\);/g,"moveDown();")).replace(/Studio.move\('\S*', 0, 8\);/g,"moveLeft();")}return e},"playlab"===Y.default.getStandaloneApp()&&(e.prepareForRemix=_e.prepareForRemix),e.twitter=Te.twitterOptions||Ce,e.makeYourOwn=e.share,e.makeString=B.default.makeYourOwn(),e.makeUrl="http://code.org/studio",e.makeImage=(0,L.singleton)().assetUrl("media/promo.png"),e.enableShowCode=!!(0,L.singleton)().editCode||r.valueOr(ke.enableShowCode,!1),e.varsInGlobals=!0,e.dropletConfig=P.default,e.dropIntoAceAtLineStart=!0,e.showDropdownInPalette=!0,e.unusedConfig=[],Te.AutohandlerTouchItems)we[t]="whenSpriteCollided-"+(_e.protagonistSpriteIndex||0)+"-"+Te.AutohandlerTouchItems[t];for(t in Te.AutohandlerGetAllItems)we[t]="whenGetAll-"+Te.AutohandlerGetAllItems[t];for(t in ke.autohandlerOverrides)we[t]=ke.autohandlerOverrides[t];for(var u in we)e.unusedConfig.push(u);e.appMsg=B.default,_e.initSprites(),_e.makeThrottledSpriteWallCollisionHelpers();var d={hideCoordinateOverlay:!ke.toolbox||!ke.toolbox.match(/studio_setSpriteXY/)};e.skin.avatarAllowedScripts&&!e.skin.avatarAllowedScripts.includes(e.scriptName)&&(d.smallStaticAvatar=e.skin.blankAvatar,d.failureAvatar=e.skin.blankAvatar),(0,L.singleton)().setPageConstants(e,d);var p=(0,j.getStore)().getState().isRtl,m=b.default.createElement(A.default,{isRtl:p,finishButton:!ke.isProjectLevel});v.default.render(b.default.createElement(M.Provider,{store:(0,j.getStore)()},b.default.createElement(l.default,{visualizationColumn:m,onMount:function(){(0,L.singleton)().init(e);var t=document.getElementById("finishButton");t&&O.default.addClickTouchEvent(t,_e.onPuzzleComplete),e.skin.preloadAssets&&(Je(),Ke(),Qe())}})),document.getElementById(e.containerId))},_e.prepareForRemix=function(){if(!ke.initializationBlocks&&Re.every((function(e){return Object.keys(e.defaultValues).every((function(t){return void 0===ke[t]||ke[t]===e.defaultValues[t]}))})))return Promise.resolve();var e=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace),t=e.ownerDocument,i=e.querySelector('block[type="when_run"]');i||((i=t.createElement("block")).setAttribute("type","when_run"),e.appendChild(i));var o=i.querySelector("next");o&&i.removeChild(o);var n,a=function(e){o&&e.appendChild(o),(o=t.createElement("next")).appendChild(e)},r=re(Re);try{for(r.s();!(n=r.n()).done;){var s=n.value,l=!1,u={};for(var d in s.defaultValues){var c=ke[d];void 0!==c&&c!==s.defaultValues[d]?(l=!0,u[d]=c):u[d]=s.defaultValues[d]}if(l)for(var p=s.generateBlocks(u),m=p.length-1;m>=0;m--)a(p[m])}}catch(I){r.e(I)}finally{r.f()}if(ke.initializationBlocks)for(var h=(0,z.parseElement)(ke.initializationBlocks),S=h.childNodes,f=S.length-1;f>=0;f--){var g=S[f];if(g.getAttribute&&"when_run"===g.getAttribute("type")){for(var _=g,y=null,b=!0;b;){b=!1;var v,k=re(_.childNodes);try{for(k.s();!(v=k.n()).done;){var T=v.value;if(T.tagName&&"next"===T.tagName.toLowerCase()){for(var E=0;E<T.childNodes.length;E++){var A=T.childNodes[E];if(A.tagName&&"block"===A.tagName.toLowerCase()){_=A;break}}b=!0,null===y&&(y=_);break}}}catch(I){k.e(I)}finally{k.f()}}if(_===g)continue;_.appendChild(o);var w=t.createElement("next");w.appendChild(y),o=w}else h.removeChild(g),e.appendChild(g)}return i.appendChild(o),(0,X.cleanBlocks)(e),Blockly.mainBlockSpace.clear(),Blockly.Xml.domToBlockSpace(Blockly.mainBlockSpace,e),Promise.resolve()},_e.getMovementSoundFileNames=function(e){return(e.avatarList||[]).map((function(t){return(e[t].movementAudio||[]).reduce((function(e,t){return e.concat([t.begin,t.loop,t.end])}),[])})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return void 0!==e}))};var Ze=function(e){e&&((new Image).src=e)},Qe=function(){for(var e=Te.backgroundChoicesK1,t=0;t<e.length;t++)Ze(e[t][0])},Ke=function(){for(var e=0;e<Te.ProjectileClassNames.length;e++)Ze(Te[Te.ProjectileClassNames[e]]);for(e=0;e<Te.ItemClassNames.length;e++)Ze(Te[Te.ItemClassNames[e]])},Je=function(){for(var e=0;e<Te.avatarList.length;e++)Ze(Te[Te.avatarList[e]].sprite),Ze(Te[Te.avatarList[e]].walk)};function $e(e){for(var t=0;t<e.length;t++)e[t].removeElement();e.length=0}function et(){return ke.coordinateGridBackground?"grid":ke.background||Te.defaultBackground}function tt(){return _e.wallMapCollisions?ke.wallMap:void 0}_e.clearEventHandlersKillTickLoop=function(){_e.eventHandlers.forEach((function(e){var t=e.cmdQueue[0];t&&t.opts&&t.opts.waitTimeout&&!t.opts.complete&&window.clearTimeout(t.opts.waitTimeout)})),_e.eventHandlers=[],_e.perExecutionTimeouts.forEach((function(e){clearTimeout(e)})),_e.pauseExecution(),_e.perExecutionTimeouts=[],_e.tickCount=0,_e.callbackQueueIndex=0;for(var e=0;e<_e.spriteCount;e++)_e.sprite[e]&&_e.sprite[e].bubbleTimeout&&window.clearTimeout(_e.sprite[e].bubbleTimeout)},_e.reset=function(e){var t;_e.clearEventHandlersKillTickLoop(),_e.hideInputPrompt(),_e.gameState=_e.GameStates.WAITING,$e(_e.projectiles),$e(_e.items);var i=document.getElementById("svgStudio");_e.customLogic&&_e.customLogic.reset();var o=0;for(t=0;t<_e.softButtons_.length;t++)document.getElementById(_e.softButtons_[t]).style.display="inline",o++;if(o&&((0,j.getStore)().dispatch((0,K.showArrowButtons)()),(0,n.default)("#soft-buttons").addClass("soft-buttons-"+o)),_e.preExecutionFailure=!1,_e.message=null,_e.pauseInterpreter=!1,_e.progressConditionTestResult=!1,_e.playerScore=0,_e.scoreText=null,_e.victoryText="",document.getElementById("score").setAttribute("visibility","hidden"),document.getElementById("victoryText").setAttribute("visibility","hidden"),O.default.isMobile()||O.default.isWindowsTouch()){var r=document.getElementById("resetTextA"),s=document.getElementById("resetTextB");ke.tapSvgToRunAndReset?(r.textContent=B.default.tapToPlay(),s.textContent=B.default.swipeToMove(),r.setAttribute("visibility","visible"),s.setAttribute("visibility","visible"),(0,n.default)("#overlayGroup *").attr("visibility","visible")):(r.setAttribute("visibility","hidden"),s.setAttribute("visibility","hidden"),(0,n.default)("#overlayGroup *").attr("visibility","hidden"))}else{var l=document.getElementById("resetText");ke.tapSvgToRunAndReset?(l.textContent=B.default.tapOrClickToPlay(),l.setAttribute("visibility","visible")):l.setAttribute("visibility","hidden")}ke.floatingScore&&document.getElementById("floatingScore").setAttribute("visibility","hidden"),document.getElementById("titleScreenTitle").setAttribute("visibility","hidden"),document.getElementById("titleScreenTextGroup").setAttribute("visibility","hidden"),_e.background=null,_e.wallMap=null,_e.wallMapRequested=null,_e.walls.setWallMapRequested(null),_e.setBackground({value:et()});var u=document.getElementById("wallOverlay");u&&u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",""),_e.gesturesObserved={},_e.currentCmdQueue=null,_e.sayComplete=0,_e.playSoundCount=0,_e.trackedBehavior={removedItemCount:0,touchedHazardCount:0,setActivityRecord:null,hasSetSprite:!1,hasSetDroidSpeed:!1,hasSetBackground:!1,hasSetMap:!1,hasAddedItem:!1,hasWonGame:!1,hasLostGame:!1,allGoalsVisited:!1,timedOut:!1,gotAllItems:!1,removedItems:{},createdItems:{},hasSetEmotion:!1,hasThrownProjectile:!1},ke.goal&&(ke.goal.successState={}),_e.Globals={},xe&&xe.detach(),_e.yieldExecutionTicks=0,(0,L.singleton)().editCode&&(_e.executionError=null,_e.JSInterpreter&&(_e.JSInterpreter.deinitialize(),_e.JSInterpreter=null));var d={x:0,y:0};for(Te.gridAlignedMovement&&(d.x=Te.gridSpriteRenderOffsetX||0,d.y=Te.gridSpriteRenderOffsetY||0),t=0;t<_e.spriteCount;t++){_e.sprite[t]&&_e.sprite[t].removeElement();var c=_e.spriteStart_[t];_e.sprite[t]=new E.default({x:c.x,y:c.y,displayX:c.x,displayY:c.y,loop:!0,speed:c.speed||a.DEFAULT_SPRITE_SPEED,size:c.size||a.DEFAULT_SPRITE_SIZE,dir:c.direction||de.NONE,displayDir:c.direction||de.NONE,emotion:c.emotion||ke.defaultEmotion||he.NORMAL,renderOffset:d,lastMove:1/0,visible:!ke.spritesHiddenToStart}),_e.lastMoveSingleDir=c.direction;var p=t%_e.startAvatars.length,m={spriteIndex:t,value:_e.startAvatars[p],forceHidden:ke.spritesHiddenToStart};_e.setSprite(m),_e.displaySprite(t),document.getElementById("speechBubble"+t).setAttribute("visibility","hidden"),_e.sprite[t].setOpacity(1);var h=document.getElementById("explosion"+t);h&&h.setAttribute("visibility","hidden")}for(var S in _e.itemSpeed={},Te.specialItemProperties)_e.itemSpeed[S]=Te.specialItemProperties[S].speed;for(S in _e.itemActivity={},Te.specialItemProperties)_e.itemActivity[S]=Te.specialItemProperties[S].activity;for(_e.createLevelItems(i),tt()&&_e.setMap({value:tt()}),t=0;t<_e.spriteCount;t++)_e.displaySprite(t);this.resetGoalSprites(),Ve(),_e.levelRestarted=!0,_e.succeededTime=null,_e.movementAudioOff()},_e.resetGoalSprites=function(){_e.touchAllGoalsEventFired=!1;var e,t,i=r.valueOr(ke.goalOverride,{}),o=r.valueOr(i.goalRenderOffsetX,r.valueOr(Te.goalRenderOffsetX,0)),n=r.valueOr(i.goalRenderOffsetY,r.valueOr(Te.goalRenderOffsetY,0));for(t=0;t<_e.spriteGoals_.length;t++)(e=_e.spriteGoals_[t]).finished=!1,e.startFadeTime=null,e.marker.setAttribute("x",e.x+o),e.marker.setAttribute("y",e.y+n),e.marker.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_e.getGoalAssetFromSkin()),e.marker.setAttribute("opacity",1),e.clipRect.setAttribute("x",e.x+o),e.clipRect.setAttribute("y",e.y+n);for(t=0;t<_e.dynamicSpriteGoals_.length;t++)(e=_e.dynamicSpriteGoals_[t]).marker.parentNode.removeChild(e.marker),e.clipPath.parentNode.removeChild(e.clipPath);_e.dynamicSpriteGoals_=[]},_e.getGoalAssetFromSkin=function(){var e=Te.goal;return ke.goalOverride&&(ke.goalOverride.goalAnimation?e=Te[ke.goalOverride.goalAnimation]:ke.goalOverride.goalImage&&(e=Te[ke.goalOverride.goalImage])),e},_e.getStudioExampleFailure=function(e){try{var t=e.getInputTargetBlock("ACTUAL"),i=e.getInputTargetBlock("EXPECTED");(0,L.singleton)().feedback_.throwOnInvalidExampleBlocks(t,i);var o=Blockly.Generator.blockSpaceToCode("JavaScript",["functional_definition"]),n=Blockly.Generator.blocksToCode("JavaScript",[e]);return n?R.default.evalWith(o+"; return"+n,{Studio:C.default,Globals:_e.Globals},{legacy:!0})?null:"Does not match definition.":"No example code."}catch(a){return"Execution error: "+a.message}},_e.runButtonClick=function(){ke.edit_blocks&&_e.onPuzzleComplete();var e=document.getElementById("runButton"),t=document.getElementById("resetButton");if(t.style.minWidth||(t.style.minWidth=e.offsetWidth+"px"),(0,L.singleton)().toggleRunReset("reset"),(0,L.singleton)().isUsingBlockly()&&Blockly.mainBlockSpace.traceOn(!0),_e.musicController.fadeOut(),_e.removeGoalEffect(),(0,L.singleton)().reset(!1),(0,L.singleton)().attempts++,_e.startTime=new Date,_e.execute(),_e.gameState=_e.GameStates.ACTIVE,ke.freePlay&&!ke.isProjectLevel&&(!(0,L.singleton)().hideSource||ke.showFinish)){var i=document.getElementById("share-cell");if("share-cell-enabled"!==i.className){i.className="share-cell-enabled",(0,L.singleton)().onResize();var o=document.createEvent("Event");o.initEvent("finishButtonShown",!0,!0),document.dispatchEvent(o)}}ke.showZeroScore&&_e.displayScore()},_e.displayFeedback=function(){var e;e=!(ke.freePlay||_e.testResults>=J.TestResults.MINIMUM_OPTIMAL_RESULT)||_e.customLogic instanceof u.default?D.default.tryAgain():D.default.keepPlaying();var t=Object.assign({continueText:ke.freePlay?D.default.nextPuzzle:function(){},reinfFeedbackMsg:B.default.reinfFeedbackMsg,sharingText:B.default.shareGame},ke.appStringsFunctions),i={continueText:t.continueText(),reinfFeedbackMsg:t.reinfFeedbackMsg({backButton:e}),sharingText:t.sharingText()};if(!_e.waitingForReport){var o=Ae.includes(Te.id),n=(0,j.getStore)().getState().currentUser.signInState===$.SignInState.SignedIn;(0,L.singleton)().displayFeedback({feedbackType:_e.testResults,executionError:_e.executionError,tryAgainText:e,continueText:i.continueText,response:_e.response,level:ke,showingSharing:!ke.disableSharing&&ke.freePlay&&!_e.preExecutionFailure&&!ke.projectTemplateLevelName,feedbackImage:_e.feedbackImage,twitter:Te.twitterOptions||Ce,saveToProjectGallery:o,disableSaveToGallery:!n,message:_e.message,appStrings:i,enablePrinting:ke.enablePrinting})}},_e.onReportComplete=function(e){_e.response=e,_e.waitingForReport=!1,(0,L.singleton)().onReportComplete(e),_e.displayFeedback()};var it=function(e,t,i){e.push({name:t,func:i,cmdQueue:[]})},ot=function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(_e.legacyRuntime)it(e,t,oe(Function,["Studio","Globals"].concat(se(o),[i])));else{var n=_e.interpretedHandlers[t];if(n){if(!s.default.isEqual(n.args,o))throw"Can't register two event handlers that take different arguments.";_e.interpretedHandlers[t].code.push(i)}else _e.interpretedHandlers[t]={code:[i],args:o}}},nt=function(e,t,i,o,n,a,s,l){for(var u=Blockly.mainBlockSpace.getTopBlocks(),d=0;u[d];d++){var c=u[d],p=c.getFieldValue(o)||"0",m=c.getFieldValue(a)||"0";if(!(c.type!==t||o&&n!==p||a&&s!==m)){var h=Blockly.Generator.blocksToCode("JavaScript",[c]);if(h){var S=i;o&&(S+="-"+r.stripQuotes(n)),a&&(S+="-"+r.stripQuotes(s)),ot(e,S,h,l)}}}},at=function(e,t,i,o,n){for(var a=0;a<n.length;a++)nt(e,t,i,o,n[a])},rt=function(e,t,i,o,n,r){for(var s=Te.spriteChoices.filter((function(e){return e[1]!==a.HIDDEN_VALUE&&e[1]!==a.RANDOM_VALUE})).map((function(e){return e[1]})),l=0;l<_e.spriteCount;l++)for(var u=0;u<s.length;u++)nt(e,t,i,o,String(l),n,s[u],r)},st=function(e){var t=Blockly.Generator.blockSpaceToCode("JavaScript",e);try{R.default.evalWith(t,{Studio:C.default,Globals:_e.Globals},{legacy:!0})}catch(i){}};function lt(e,t,i){(0,H.outputError)(i,t),_e.executionError={err:e,lineNumber:t},e instanceof SyntaxError?(_e.preExecutionFailure=!0,_e.testResults=J.TestResults.SYNTAX_ERROR_FAIL,_e.onPuzzleComplete()):ke.freePlay||_e.onPuzzleComplete()}function ut(e,t,i){return/.gif$/.test(Te[e])?1:t&&t[e]&&t[e].frames?t[e].frames:i}_e.checkForBlocklyPreExecutionFailure=function(){if((0,L.singleton)().hasUnfilledFunctionalBlock())return _e.result=!1,_e.testResults=J.TestResults.EMPTY_FUNCTIONAL_BLOCK,_e.message=(0,L.singleton)().getUnfilledFunctionalBlockError("functional_start_setValue"),_e.preExecutionFailure=!0,!0;if((0,L.singleton)().hasUnwantedExtraTopBlocks())return _e.result=!1,_e.testResults=J.TestResults.EXTRA_TOP_BLOCKS_FAIL,_e.preExecutionFailure=!0,!0;if((0,L.singleton)().hasEmptyFunctionOrVariableName())return _e.result=!1,_e.testResults=J.TestResults.EMPTY_FUNCTION_NAME,_e.message=D.default.unnamedFunction(),_e.preExecutionFailure=!0,!0;var e=_e.checkExamples_();return void 0!==e.result&&(Object.assign(_e,e),_e.preExecutionFailure=!0,!0)},_e.checkExamples_=function(){var e={};if(!ke.examplesRequired)return e;var t=(0,L.singleton)().getFunctionWithoutTwoExamples();if(t)return e.result=J.ResultType.FAILURE,e.testResults=J.TestResults.EXAMPLE_FAILED,e.message=D.default.emptyExampleBlockErrorMsg({functionName:t}),e;var i=(0,L.singleton)().getUnfilledFunctionalExample();if(i){e.result=J.ResultType.FAILURE,e.testResults=J.TestResults.EXAMPLE_FAILED;var o=i.getRootBlock().getInputTargetBlock("ACTUAL").getFieldValue("NAME");return e.message=D.default.emptyExampleBlockErrorMsg({functionName:o}),e}var n=(0,L.singleton)().checkForFailingExamples(_e.getStudioExampleFailure);return n&&(e.result=!1,e.testResults=J.TestResults.EXAMPLE_FAILED,e.message=D.default.exampleErrorMessage({functionName:n})),e},_e.checkForEditCodePreExecutionFailure=function(){var e=_e.hasUnexpectedFunction_();return e?(_e.result=!1,_e.testResults=J.TestResults.EXTRA_FUNCTION_FAIL,_e.message=B.default.extraFunction({funcName:e+"()"}),_e.preExecutionFailure=!0,!0):!!(e=_e.hasUnexpectedLocalFunction_())&&(_e.result=!1,_e.testResults=J.TestResults.LOCAL_FUNCTION_FAIL,_e.message=B.default.localFunction({funcName:e+"()"}),_e.preExecutionFailure=!0,!0)},_e.hasUnexpectedFunction_=function(){if((0,L.singleton)().editCode&&ke.preventUserDefinedFunctions&&_e.JSInterpreter){var e=_e.JSInterpreter.getGlobalFunctionNames();for(var t in we){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}if(e.length>0)return e[0]}},_e.hasUnexpectedLocalFunction_=function(){if((0,L.singleton)().editCode&&_e.JSInterpreter){var e=_e.JSInterpreter.getLocalFunctionNames();for(var t in we){if(-1!==e.indexOf(t))return t}}},_e.execute=function(){_e.result=(0,L.singleton)().UNSET,_e.testResults=J.TestResults.NO_TESTS_RUN,_e.waitingForReport=!1,_e.response=null;var e=[];if((0,L.singleton)().isUsingBlockly()){if(_e.checkForBlocklyPreExecutionFailure())return _e.onPuzzleComplete();_e.interpretedHandlers={},(0,L.singleton)().initializationBlocks&&(0,L.singleton)().initializationBlocks.forEach((function(t){var i="studio_repeatForever"===t.type?"repeatForever":"whenGameStarts",o=Blockly.Generator.blocksToCode("JavaScript",[t]);ot(e,i,o)})),nt(e,"when_run","whenGameStarts"),nt(e,"functional_start_setSpeeds","whenGameStarts"),nt(e,"functional_start_setBackgroundAndSpeeds","whenGameStarts"),nt(e,"functional_start_setFuncs","whenGameStarts"),nt(e,"functional_start_setValue","whenGameStarts"),nt(e,"studio_whenLeft","when-left"),nt(e,"studio_whenRight","when-right"),nt(e,"studio_whenUp","when-up"),nt(e,"studio_whenDown","when-down"),at(e,"studio_whenArrow","when","VALUE",["left","right","up","down"]),nt(e,"studio_repeatForever","repeatForever"),nt(e,"studio_whenTouchCharacter","whenSpriteCollided-"+(_e.protagonistSpriteIndex||0)+"-any_item"),nt(e,"studio_whenGetAllCharacters","whenGetAllItems"),at(e,"studio_whenGetAllCharacterClass","whenGetAll","VALUE",Te.ItemClassNames),at(e,"studio_whenGetCharacter","whenSpriteCollided-"+(_e.protagonistSpriteIndex||0),"VALUE",["any_item"].concat(Te.ItemClassNames)),nt(e,"studio_whenTouchGoal","whenTouchGoal"),_e.wallMapCollisions&&nt(e,"studio_whenTouchObstacle","whenSpriteCollided-"+(_e.protagonistSpriteIndex||0)+"-wall"),function(e,t,i,o){for(var n=0;n<_e.spriteCount;n++)nt(e,t,i,o,String(n))}(e,"studio_whenSpriteClicked","whenSpriteClicked","SPRITE"),function(e,t,i,o,n){var a,r=function(r){nt(e,t,i,o,String(a),n,r)};for(a=0;a<_e.spriteCount;a++){for(var s=0;s<_e.spriteCount;s++)a!==s&&nt(e,t,i,o,String(a),n,String(s));Te.ProjectileClassNames.forEach(r),Te.ItemClassNames.forEach(r),Ee.forEach(r),nt(e,t,i,o,String(a),n,"any_actor"),nt(e,t,i,o,String(a),n,"any_edge"),nt(e,t,i,o,String(a),n,"any_projectile"),nt(e,t,i,o,String(a),n,"anything"),nt(e,t,i,o,String(a),n,"goal"),nt(e,t,i,o,String(a),n,"wall")}}(e,"studio_whenSpriteCollided","whenSpriteCollided","SPRITE1","SPRITE2"),rt(e,"studio_whenSpriteAndGroupCollideSimple","whenSpriteCollided","SPRITE","SPRITENAME"),rt(e,"studio_whenSpriteAndGroupCollide","whenSpriteCollided","SPRITE","SPRITENAME",["touchedSpriteIndex"])}if(r.valueOr(ke.playStartSound,!0)&&_e.playSound({soundName:"start"}),(0,L.singleton)().reset(!1),(0,L.singleton)().clearAndAttachRuntimeAnnotations(),ke.editCode){var t=(0,L.singleton)().getCode();if(_e.JSInterpreter=new S.default({studioApp:(0,L.singleton)()}),_e.JSInterpreter.onExecutionError.register(lt),xe&&xe.attachTo(_e.JSInterpreter),_e.JSInterpreter.parse({code:t,blocks:P.default.blocks,blockFilter:ke.executePaletteApisOnly&&ke.codeFunctions,enableEvents:!0}),!_e.JSInterpreter.initialized())return;if(_e.checkForEditCodePreExecutionFailure())return _e.onPuzzleComplete();_e.initAutoHandlers(we)}else{if(_e.legacyRuntime)st("procedures_defreturn"),st("procedures_defnoreturn"),st("functional_definition");else{var i=Blockly.Generator.blockSpaceToCode.bind(Blockly.Generator,"JavaScript"),o=["procedures_defreturn","procedures_defnoreturn","functional_definition"].map(i).join(";");_e.interpretedHandlers.getGlobals={code:"return Globals;"};var a=R.default.evalWithEvents({Studio:C.default,Globals:_e.Globals},_e.interpretedHandlers,o),s=a.hooks,l=a.interpreter;_e.interpreter=l,s.forEach((function(t){"getGlobals"===t.name?Object.defineProperty(_e,"Globals",{get:function(){return t.func()||{}},set:function(){},configurable:!0}):it(e,t.name,t.func)}))}_e.eventHandlers=e}(0,n.default)("#resetText, #resetTextA, #resetTextB, #overlayGroup *").attr("visibility","hidden"),_e.perExecutionTimeouts=[],_e.resumeExecution()},_e.pauseExecution=function(){_e.paused=!0,window.clearInterval(_e.tickIntervalId)},_e.resumeExecution=function(){_e.paused=!1,_e.tickIntervalId=window.setInterval(_e.onTick,_e.scale.stepSpeed)},_e.feedbackImage="",_e.encodedFeedbackImage="",_e.onPuzzleComplete=function(){_e.executionError?_e.result=J.ResultType.ERROR:((0,L.singleton)().hasContainedLevels||ke.freePlay&&!_e.preExecutionFailure)&&(_e.result=J.ResultType.SUCCESS),_e.clearEventHandlersKillTickLoop(),_e.movementAudioOff(),Te.gridAlignedMovement&&_e.JSInterpreter&&_e.JSInterpreter.selectCurrentCode();var e,t=_e.result===J.ResultType.SUCCESS;if(_e.preExecutionFailure||_e.progressConditionTestResult||(_e.testResults=ke.freePlay?J.TestResults.FREE_PLAY:(0,L.singleton)().getTestResults(t,{executionError:_e.executionError})),_e.testResults>=J.TestResults.TOO_MANY_BLOCKS_FAIL?(0,L.singleton)().playAudioOnWin():(0,L.singleton)().playAudioOnFailure(),(0,L.singleton)().hasContainedLevels&&!ke.edit_blocks)return(0,G.postContainedLevelAttempt)((0,L.singleton)()),void(0,G.runAfterPostContainedLevel)((function(){_e.message=(0,G.getContainedLevelResultInfo)().feedback,_e.onReportComplete()}));if(ke.editCode)e=(0,L.singleton)().getCode();else{var i=Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace);e=Blockly.Xml.domToText(i)}_e.waitingForReport=!0;var o=function(){(0,L.singleton)().report({app:"studio",level:ke.id,result:_e.result===J.ResultType.SUCCESS,testResult:_e.testResults,program:encodeURIComponent(e),image:_e.encodedFeedbackImage,onComplete:_e.onReportComplete})};void 0===document.getElementById("svgStudio").toDataURL?o():document.getElementById("svgStudio").toDataURL("image/jpeg",{callback:function(e){_e.feedbackImage=e,_e.encodedFeedbackImage=encodeURIComponent(_e.feedbackImage.split(",")[1]),o()}})},_e.drawDebugRect=function(e,t,i,o,n){if(ge){var a=document.getElementById("svgStudio"),r=document.createElementNS(J.SVG_NS,"g");r.setAttribute("class",e+" debugRect");var s=document.createElementNS(J.SVG_NS,"rect");s.setAttribute("width",o),s.setAttribute("height",n),s.setAttribute("x",t-o/2),s.setAttribute("y",i-n/2),s.setAttribute("fill","rgba(255, 255, 255, 0.5)"),s.setAttribute("stroke","#000000"),s.setAttribute("stroke-width",1),r.appendChild(s),a.appendChild(r)}},_e.drawDebugLine=function(e,t,i,o,n,a){if(ge){a=r.valueOr(a,"#000000");var s=document.getElementById("svgStudio"),l=document.createElementNS(J.SVG_NS,"g");l.setAttribute("class",e+" debugLine");var u=document.createElementNS(J.SVG_NS,"line");u.setAttribute("x1",t),u.setAttribute("y1",i),u.setAttribute("x2",o),u.setAttribute("y2",n),u.setAttribute("stroke",a),u.setAttribute("stroke-width",2),l.appendChild(u),s.appendChild(l)}},_e.drawTimeoutRect=function(){if(ke.showTimeoutRect&&_e.timeoutFailureTick!==1/0){(0,n.default)(".timeoutRect").remove();var e=_e.timeoutFailureTick-_e.tickCount,t=e/_e.timeoutFailureTick;if(t<=.5){var i=t<.4?1:1-(t-.4)/(.5-.4),o=e*_e.MAZE_WIDTH/(.5*_e.timeoutFailureTick);if(o>0){var a=document.getElementById("svgStudio"),r=document.createElementNS(J.SVG_NS,"g");r.setAttribute("class","timeoutRect");var s=document.createElementNS(J.SVG_NS,"rect");s.setAttribute("opacity",i),s.setAttribute("width",o),s.setAttribute("height",6),s.setAttribute("x",0),s.setAttribute("y",_e.MAZE_HEIGHT-6),s.setAttribute("fill",ke.showTimeoutRect),r.appendChild(s),a.appendChild(r)}}}},_e.drawDebugOverlay=function(e){if(ge&&0===(0,n.default)(".debugImage").length){var t=document.getElementById("svgStudio"),i=document.createElementNS(J.SVG_NS,"g");i.setAttribute("class","walls debugImage");var o=document.createElementNS(J.SVG_NS,"image");o.setAttribute("width",_e.MAZE_WIDTH),o.setAttribute("height",_e.MAZE_HEIGHT),o.setAttribute("x",0),o.setAttribute("y",0),o.setAttribute("opacity","0.5"),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),i.appendChild(o),t.appendChild(i)}},_e.clearDebugElements=function(){(0,n.default)(".debugRect").remove(),(0,n.default)(".debugLine").remove(),(0,n.default)(".debugImage").remove()},_e.drawWallTile=function(e,t,i,o){var n,r,s=Te.tiles,l=0,u=_e.SQUARE_SIZE,d=0,c=8,p=8,m=!1;t===me.WALL?r=(n=Math.floor(Math.random()*a.WallRandomCoordMax))?Math.floor(Math.random()*a.WallRandomCoordMax):1+Math.floor(Math.random()*(a.WallRandomCoordMax-1)):(n=(t&a.WallCoordRowMask)>>a.WallCoordRowShift,r=(t&a.WallCoordColMask)>>a.WallCoordColShift,(l=(t&a.WallTypeMask)>>a.WallTypeShift)===a.WallType.JUMBO_SIZE?(m=!0,u=Te[_e.background].jumboTilesSize,c=Te[_e.background].jumboTilesRows,p=Te[_e.background].jumboTilesCols):l===a.WallType.DOUBLE_SIZE&&(u=2*_e.SQUARE_SIZE)),_e.background&&!m&&Te[_e.background].tiles?s=Te[_e.background].tiles:_e.background&&m&&Te[_e.background].jumboTiles&&(s=Te[_e.background].jumboTiles,d=Te[_e.background].jumboTilesAddOffset);var h=document.createElementNS(J.SVG_NS,"clipPath"),S="tile_clippath_"+_e.tiles.length;h.setAttribute("id",S),h.setAttribute("class","tile");var f=document.createElementNS(J.SVG_NS,"rect");f.setAttribute("width",u),f.setAttribute("height",u),f.setAttribute("x",o*_e.SQUARE_SIZE+d),f.setAttribute("y",i*_e.SQUARE_SIZE+d),h.appendChild(f),e.appendChild(h);var g=document.createElementNS(J.SVG_NS,"image"),_="tile_"+_e.tiles.length;g.setAttribute("id",_),g.setAttribute("class","tileClip"),g.setAttribute("width",p*u),g.setAttribute("height",c*u),g.setAttribute("x",o*_e.SQUARE_SIZE-r*u+d),g.setAttribute("y",i*_e.SQUARE_SIZE-n*u+d),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),e.appendChild(g),g.setAttribute("clip-path","url(#"+S+")");var y={};y.bottomY=i*_e.SQUARE_SIZE+d+u,_e.tiles.push(y)},_e.createLevelItems=function(e){for(var t=0;t<_e.ROWS;t++)for(var i=0;i<_e.COLS;i++)for(var o=_e.map[t][i].getTileType(),n=0;n<Te.ItemClassNames.length;n++)if(a.squareHasItemClass(n,o)){var r=_e.getItemOptionsForItemClass(Te.ItemClassNames[n]),s=Object.assign({},r,{x:_e.HALF_SQUARE+_e.SQUARE_SIZE*i,y:_e.HALF_SQUARE+_e.SQUARE_SIZE*t}),l=new h.default(s);l.createElement(e),l.display(),_e.items.push(l)}},_e.drawMapTiles=function(e){if(_e.wallMap||!_e.tilesDrawn){var t,i;_e.tilesDrawn=!0;var o=[];for(t=0;t<_e.ROWS;t++)for(o[t]=[],i=0;i<_e.COLS;i++)o[t][i]=!1;var n=document.getElementById("backgroundLayer"),r=_e.walls.getWallOverlayURI();if(r){var s=document.getElementById("wallOverlay");s||((s=document.createElementNS(J.SVG_NS,"image")).setAttribute("id","wallOverlay"),s.setAttribute("height",_e.MAZE_HEIGHT),s.setAttribute("width",_e.MAZE_WIDTH),s.setAttribute("x",0),s.setAttribute("y",0),n.appendChild(s)),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r)}for(t=0;t<_e.ROWS;t++)for(i=0;i<_e.COLS;i++){var l=_e.getWallValue(t,i);if(l){if(o[t][i])continue;(l&a.WallTypeMask)>>a.WallTypeShift===a.WallType.DOUBLE_SIZE&&(o[t][i]=!0,o[t][i+1]=!0,o[t+1][i]=!0,o[t+1][i+1]=!0),_e.drawWallTile(n,l,t,i)}}}};var dt=function(e){var t=+e.getAttribute("height"),i=+e.getAttribute("width"),o="true"===e.getAttribute("onTop"),n="true"===e.getAttribute("onRight"),a=+e.getAttribute("tipOffset");e.setAttribute("d",ht(0,0,i,t,20,o,n,a))};_e.displaySprite=function(e){var t=_e.sprite[e];if("hidden"!==t.value){if(t.hasActions())t.updateActions();else{var i=de.NONE,o=t.lastDrawPosition;t.displayX=t.x,t.displayY=t.y;var n=t.getCurrentDrawPosition();n.x===o.x&&n.y===o.y||(n.x<o.x?i|=de.WEST:n.x>o.x&&(i|=de.EAST),n.y<o.y?i|=de.NORTH:n.y>o.y&&(i|=de.SOUTH)),i===de.NONE&&t.lastMove!==1/0||t.setDirection(i)}t.dir!==t.displayDir&&_e.tickCount&&0==_e.tickCount%2&&(t.displayDir=pe[t.displayDir][t.dir]),t.display(),t.bubbleVisible&&_e.renderSpeechBubble(e)}},_e.renderSpeechBubble=function(e){var t=_e.sprite[e],i=document.getElementById("speechBubble"+e),o=document.getElementById("speechBubblePath"+e),n=+o.getAttribute("tipOffset"),a="true"===o.getAttribute("onTop"),r="true"===o.getAttribute("onRight"),s=+o.getAttribute("height"),l=+o.getAttribute("width"),u=_e.calculateBubblePosition(t,s,l,_e.MAZE_WIDTH);o.setAttribute("onTop",u.onTop),o.setAttribute("onRight",u.onRight),o.setAttribute("tipOffset",u.tipOffset),a===u.onTop&&r===u.onRight&&n===u.tipOffset||dt(o),i.setAttribute("transform","translate(".concat(u.xSpeech,", ").concat(u.ySpeech,")"))},_e.calculateBubblePosition=function(e,t,i,o){var n,a,r=!0,s=e.y-(t+5);s<5&&(s=e.y+e.height+5,r=!1);var l=0;if(e.x>(o-e.width)/2)n=!1,(a=e.x+e.width-(i+50))<10&&(l=10-a,a=10);else{n=!0;var u=o-i-10;(a=e.x+50)>u&&(l=a-u,a=u)}return{onTop:r,onRight:n,tipOffset:l,xSpeech:a,ySpeech:s}},_e.displayScore=function(){var e=document.getElementById("score");_e.scoreText?e.textContent=_e.scoreText:e.textContent=B.default.scoreText({playerScore:_e.playerScore}),e.setAttribute("visibility","visible")},_e.displayVictoryText=function(){var e=document.getElementById("victoryText");if(e.textContent=_e.victoryText,e.setAttribute("visibility","visible"),ke.tapSvgToRunAndReset)if(O.default.isMobile()||O.default.isWindowsTouch()){var t=document.getElementById("resetTextA"),i=document.getElementById("resetTextB");i.textContent=B.default.tapToReset(),t.setAttribute("visibility","hidden"),i.setAttribute("visibility","visible"),(0,n.default)("#overlayGroup image, #overlayGroup rect").attr("visibility","hidden")}else{var o=document.getElementById("resetText");o.textContent=B.default.tapOrClickToReset(),o.setAttribute("visibility","visible")}},_e.animateGoals=function(){var e,t,i,o,n=new Date,r=ke.goalOverride&&ke.goalOverride.goalAnimation,s=Te.fadeOutGoal;r&&(e=n-_e.startTime,t=Te.animatedGoalFrames,i=Te.timePerGoalAnimationFrame,o=Te.goalSpriteWidth);_e.allGoals_().forEach((function(l,u){if(!l.finished||l.startFadeTime){if(r){var d=parseInt(l.clipRect.getAttribute("x"),10),c=(7*u+Math.floor(e/i))%t;l.marker.setAttribute("x",d-c*o)}if(s){var p=a.GOAL_FADE_TIME;if(l.startFadeTime){var m=1-(n-l.startFadeTime)/p;m<0&&(m=0,l.startFadeTime=null),l.marker.setAttribute("opacity",m)}}}}))},_e.loadClouds=function(){var e,t;if(_e.background&&Te[_e.background].clouds)for(t=0;t<Te[_e.background].clouds.length;t++){(e=document.getElementById("cloud"+t)).setAttribute("width",a.CLOUD_SIZE),e.setAttribute("height",a.CLOUD_SIZE),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Te[_e.background].clouds[t]),e.setAttribute("opacity",a.CLOUD_OPACITY);var i=_e.getCloudLocation(t);e.setAttribute("x",i.x),e.setAttribute("y",i.y)}else for(t=0;t<a.MAX_NUM_CLOUDS;t++)(e=document.getElementById("cloud"+t)).setAttribute("x",-a.CLOUD_SIZE),e.setAttribute("y",-a.CLOUD_SIZE)},_e.animateClouds=function(){if(_e.background&&Te[_e.background].clouds){_e.cloudStep++;for(var e=0;e<Te[_e.background].clouds.length;e++){var t=_e.getCloudLocation(e),i=document.getElementById("cloud"+e);i.setAttribute("x",Math.round(t.x)),i.setAttribute("y",Math.round(t.y))}}},_e.getCloudLocation=function(e){var t,i,o=_e.MAZE_WIDTH+a.CLOUD_SIZE,n=30*_e.cloudStep/[50,60][e]%o;return i=0===e?(t=n-_e.MAZE_WIDTH/4)-_e.MAZE_HEIGHT/2:(t=_e.MAZE_WIDTH-n)+_e.MAZE_HEIGHT/2,{x:t,y:i}},_e.displayFloatingScore=function(e){if(ke.floatingScore){var t=_e.sprite[0],i=document.getElementById("floatingScore");i.textContent=e>0?"+"+e:e,i.setAttribute("x",t.x+t.width/2),i.setAttribute("y",t.y+t.height/2),i.setAttribute("opacity",1),i.setAttribute("visibility","visible")}},_e.updateFloatingScore=function(){if(ke.floatingScore){var e=document.getElementById("floatingScore"),t=parseInt(e.getAttribute("y")),i=parseFloat(e.getAttribute("opacity"));i>0&&(i+=a.floatingScoreChangeOpacity,e.setAttribute("opacity",i),t+=a.floatingScoreChangeY,e.setAttribute("y",t))}},_e.showCoordinates=function(){var e=_e.sprite[_e.protagonistSpriteIndex||0];if(e){var t=e.x+50,i=350-e.y;_e.setScoreText({text:"x: "+t+" y: "+i})}},_e.queueCmd=function(e,t,i){var o={id:e,name:t,opts:i};if((0,L.singleton)().isUsingBlockly()&&_e.currentCmdQueue){if(_e.currentEventParams)for(var n in _e.currentEventParams)o.opts[n]=_e.currentEventParams[n];_e.currentCmdQueue.push(o)}else _e.callCmd(o)},_e.executeQueue=function(e,t){_e.eventHandlers.forEach((function(t){if(!(_e.paused||_e.yieldExecutionTicks>0)&&t&&t.name===e&&t.cmdQueue.length)for(var i=t.cmdQueue[0];i&&_e.callCmd(i)&&(t.cmdQueue.shift(),!(_e.paused||_e.yieldExecutionTicks>0));i=t.cmdQueue[0]);}))},_e.callCmd=function(e){switch(e.name){case"endGame":(0,L.singleton)().highlight(e.id),_e.endGame(e.opts);break;case"setBackground":(0,L.singleton)().highlight(e.id),_e.setBackground(e.opts),_e.trackedBehavior.hasSetBackground=!0;break;case"setMap":case"setMapAndColor":(0,L.singleton)().highlight(e.id),_e.setMap(e.opts),_e.trackedBehavior.hasSetMap=!0;break;case"setAllowSpritesOutsidePlayspace":(0,L.singleton)().highlight(e.id),_e.allowSpritesOutsidePlayspace=e.opts.value;break;case"setSprite":(0,L.singleton)().highlight(e.id),_e.setSprite(e.opts),_e.trackedBehavior.hasSetSprite=!0;break;case"getSpriteValue":(0,L.singleton)().highlight(e.id),_e.getSpriteValue(e.opts);break;case"getSpriteVisibility":(0,L.singleton)().highlight(e.id),_e.getSpriteVisibility(e.opts);break;case"saySprite":return e.opts.started||(0,L.singleton)().highlight(e.id),_e.saySprite(e.opts);case"setSpriteEmotion":(0,L.singleton)().highlight(e.id),_e.setSpriteEmotion(e.opts),_e.trackedBehavior.hasSetEmotion=!0;break;case"getSpriteEmotion":(0,L.singleton)().highlight(e.id),_e.getSpriteEmotion(e.opts);break;case"setSpriteSpeed":(0,L.singleton)().highlight(e.id),_e.setSpriteSpeed(e.opts);break;case"setDroidSpeed":(0,L.singleton)().highlight(e.id),_e.setDroidSpeed(e.opts),_e.trackedBehavior.hasSetDroidSpeed=!0;break;case"setSpriteSize":(0,L.singleton)().highlight(e.id),_e.setSpriteSize(e.opts);break;case"setSpritePosition":(0,L.singleton)().highlight(e.id),_e.setSpritePosition(e.opts);break;case"setSpriteXY":(0,L.singleton)().highlight(e.id),_e.setSpriteXY(e.opts);break;case"getSpriteXY":(0,L.singleton)().highlight(e.id),_e.getSpriteXY(e.opts);break;case"setSpriteBehavior":(0,L.singleton)().highlight(e.id),_e.setSpriteBehavior(e.opts);break;case"setSpritesWander":(0,L.singleton)().highlight(e.id),_e.setSpritesWander(e.opts);break;case"setSpritesStop":(0,L.singleton)().highlight(e.id),_e.setSpritesStop(e.opts);break;case"setSpritesChase":(0,L.singleton)().highlight(e.id),_e.setSpritesChase(e.opts);break;case"setSpritesFlee":(0,L.singleton)().highlight(e.id),_e.setSpritesFlee(e.opts);break;case"setSpritesSpeed":(0,L.singleton)().highlight(e.id),_e.setSpritesSpeed(e.opts);break;case"addGoal":(0,L.singleton)().highlight(e.id),_e.addGoal(e.opts);break;case"playSound":(0,L.singleton)().highlight(e.id),_e.playSound(e.opts);break;case"showTitleScreen":return e.opts.started||(0,L.singleton)().highlight(e.id),_e.showTitleScreen(e.opts);case"move":(0,L.singleton)().highlight(e.id),_e.moveSingle(e.opts);break;case"moveRight":(0,L.singleton)().highlight(e.id),_e.moveSingle({spriteIndex:_e.protagonistSpriteIndex||0,dir:de.EAST});break;case"moveLeft":(0,L.singleton)().highlight(e.id),_e.moveSingle({spriteIndex:_e.protagonistSpriteIndex||0,dir:de.WEST});break;case"moveUp":(0,L.singleton)().highlight(e.id),_e.moveSingle({spriteIndex:_e.protagonistSpriteIndex||0,dir:de.NORTH});break;case"moveDown":(0,L.singleton)().highlight(e.id),_e.moveSingle({spriteIndex:_e.protagonistSpriteIndex||0,dir:de.SOUTH});break;case"moveForward":(0,L.singleton)().highlight(e.id),_e.moveSingle({spriteIndex:_e.protagonistSpriteIndex||0,dir:_e.lastMoveSingleDir});break;case"moveBackward":(0,L.singleton)().highlight(e.id),_e.moveSingle({spriteIndex:_e.protagonistSpriteIndex||0,dir:_e.lastMoveSingleDir,backward:!0});break;case"turnRight":(0,L.singleton)().highlight(e.id),_e.turnSingle({spriteIndex:_e.protagonistSpriteIndex||0,dir:Se(_e.lastMoveSingleDir)});break;case"turnLeft":(0,L.singleton)().highlight(e.id),_e.turnSingle({spriteIndex:_e.protagonistSpriteIndex||0,dir:fe(_e.lastMoveSingleDir)});break;case"moveDistance":return e.opts.started||(0,L.singleton)().highlight(e.id),_e.moveDistance(e.opts);case"stop":(0,L.singleton)().highlight(e.id),_e.stop(e.opts);break;case"throwProjectile":return e.opts.started||(0,L.singleton)().highlight(e.id),_e.trackedBehavior.hasThrownProjectile=!0,_e.throwProjectile(e.opts);case"makeProjectile":(0,L.singleton)().highlight(e.id),_e.makeProjectile(e.opts);break;case"changeScore":(0,L.singleton)().highlight(e.id),_e.changeScore(e.opts);break;case"reduceScore":(0,L.singleton)().highlight(e.id),_e.reduceScore(e.opts);break;case"displayScore":(0,L.singleton)().highlight(e.id),_e.displayScore(e.opts);break;case"setScoreText":(0,L.singleton)().highlight(e.id),_e.setScoreText(e.opts);break;case"showCoordinates":(0,L.singleton)().highlight(e.id),_e.showCoordinates();break;case"wait":return e.opts.started||(0,L.singleton)().highlight(e.id),_e.wait(e.opts);case"vanish":(0,L.singleton)().highlight(e.id),_e.vanishActor(e.opts);break;case"addItem":(0,L.singleton)().highlight(e.id),_e.addItem(e.opts),_e.trackedBehavior.hasAddedItem=!0;break;case"setItemActivity":(0,L.singleton)().highlight(e.id),_e.setItemActivity(e.opts);break;case"setItemSpeed":(0,L.singleton)().highlight(e.id),_e.setItemSpeed(e.opts);break;case"showDebugInfo":(0,L.singleton)().highlight(e.id),_e.showDebugInfo(e.opts);break;case"onEvent":(0,L.singleton)().highlight(e.id),_e.onEvent(e.opts);break;case"askForInput":if((0,L.singleton)().highlight(e.id),_e.paused)return!1;_e.askForInput(e.opts.question,e.opts.callback)}return!0},_e.makeThrottledPlaySound=function(){_e.throttledPlaySound=s.default.throttle((0,L.singleton)().playAudio.bind((0,L.singleton)()),a.SOUND_THROTTLE_TIME)},_e.makeThrottledSpriteWallCollisionHelpers=function(){_e.throttledCollideSpriteWithWallFunctions=[];for(var e=function(e){return function(){_e.collideSpriteWith(e,"wall"),_e.sprite[e].endCollision("wall")}},t=0;t<_e.spriteCount;t++)_e.throttledCollideSpriteWithWallFunctions[t]=s.default.throttle(e(t),a.TOUCH_OBSTACLE_THROTTLE_TIME)},_e.playSound=function(e){if("string"!=typeof e.soundName)throw new TypeError("Incorrect parameter: "+e.soundName);var t=e.soundName.toLowerCase().trim(),i=N.default.getPlaySoundValues(!1);if(t===a.RANDOM_VALUE)t=i[Math.floor(Math.random()*i.length)].toLowerCase();else{var o=function(e){return-1!==i.indexOf(e)};for(var n in Te.soundGroups){var l=Te.soundGroups[n];if(t===l.randomValue.toLowerCase()){for(var u=[],d=l.minSuffix;d<=l.maxSuffix;d++)u.push(n+d);u.filter(o),t=u[Math.floor(Math.random()*u.length)].toLowerCase();break}}}if(!Te.soundFiles[t])throw new RangeError("Incorrect parameter: "+e.soundName);var c=r.valueOr(Te.soundMetadata,[]),p=Object.assign({volume:1},s.default.find(c,(function(e){return e.name.toLowerCase().trim()===t})));_e.throttledPlaySound(t,p),_e.playSoundCount++},_e.getItemOptionsForItemClass=function(e){var t=r.valueOr(Te.specialItemProperties[e],{});return{className:e,image:Te[e],frames:ut(e,Te.specialItemProperties,Te.itemFrames),loop:!0,width:t.width,height:t.height,dir:de.NONE,speed:_e.itemSpeed[e],normalSpeed:t.speed,activity:r.valueOr(_e.itemActivity[e],a.BEHAVIOR_WANDER),isHazard:t.isHazard,spritesCounterclockwise:t.spritesCounterclockwise,renderOffset:r.valueOr(t.renderOffset,{x:0,y:0}),renderScale:r.valueOr(t.scale,1),animationFrameDuration:t.animationFrameDuration}},_e.addItem=function(e){if("string"!=typeof e.className)throw new TypeError("Incorrect parameter: "+e.className);var t=e.className.toLowerCase().trim();if(t===a.RANDOM_VALUE&&(t=Te.ItemClassNames[Math.floor(Math.random()*Te.ItemClassNames.length)]),!Te[t])throw new RangeError("Incorrect parameter: "+e.className);var i=[de.NORTH,de.EAST,de.SOUTH,de.WEST,de.NORTHEAST,de.SOUTHEAST,de.SOUTHWEST,de.NORTHWEST],o=function(){var e={};return ke.itemGridAlignedMovement?(e.x=_e.HALF_SQUARE+_e.SQUARE_SIZE*Math.floor(Math.random()*_e.COLS),e.y=_e.HALF_SQUARE+_e.SQUARE_SIZE*Math.floor(Math.random()*_e.ROWS)):(e.x=_e.HALF_SQUARE+Math.floor(Math.random()*(_e.MAZE_WIDTH-_e.SQUARE_SIZE)),e.y=_e.HALF_SQUARE+Math.floor(Math.random()*(_e.MAZE_HEIGHT-_e.SQUARE_SIZE))),e},n=o(),r=ke.itemGridAlignedMovement?de.NONE:i[Math.floor(Math.random()*i.length)],s=Object.assign({},_e.getItemOptionsForItemClass(t),{x:n.x,y:n.y,dir:r}),l=new h.default(s);if(_e.wallMapCollisions)for(var u=0;_e.walls.willCollidableTouchWall(l,l.x,l.y)||_e.getDistance(_e.sprite[0].x+_e.sprite[0].width/2,_e.sprite[0].y+_e.sprite[0].height/2,l.x,l.y)<100;){var d=o();if(l.x=d.x,l.y=d.y,++u>100)break}l.createElement(document.getElementById("spriteLayer")),_e.items.push(l)},_e.getDistance=function(e,t,i,o){return Math.sqrt(Math.pow(i-e,2)+Math.pow(o-t,2))},_e.setItemActivity=function(e){if("string"!=typeof e.className)throw new TypeError("Incorrect parameter: "+e.className);var t=e.className.toLowerCase().trim();if(t===a.RANDOM_VALUE&&(t=Te.ItemClassNames[Math.floor(Math.random()*Te.ItemClassNames.length)]),!Te[t])throw new RangeError("Incorrect parameter: "+e.className);e.type!==a.BEHAVIOR_WANDER&&e.type!==a.BEHAVIOR_CHASE&&e.type!==a.BEHAVIOR_FLEE&&e.type!==a.BEHAVIOR_STOP||(_e.itemActivity[t]=e.type,_e.items.forEach((function(i){i.className===t&&(i.setActivity(e.type,0),_e.trackedBehavior.setActivityRecord||(_e.trackedBehavior.setActivityRecord=[]),_e.trackedBehavior.setActivityRecord[t]||(_e.trackedBehavior.setActivityRecord[t]=[]),_e.trackedBehavior.setActivityRecord[t][e.type]=!0)})))},_e.setItemSpeed=function(e){if("string"!=typeof e.className)throw new TypeError("Incorrect parameter: "+e.className);var t=e.className.toLowerCase().trim();if(t===a.RANDOM_VALUE&&(t=Te.ItemClassNames[Math.floor(Math.random()*Te.ItemClassNames.length)]),!Te[t])throw new RangeError("Incorrect parameter: "+e.className);var i=r.valueOr(Te.specialItemProperties[t].speed,a.DEFAULT_ITEM_SPEED);"fast"===e.speed.toLowerCase()?i=Math.floor(2*i):"slow"===e.speed.toLowerCase()&&(i=Math.floor(i/2)),_e.itemSpeed[t]=i,_e.items.forEach((function(e){e.className===t&&e.setSpeed(i)}))},_e.showDebugInfo=function(e){ge=e.value},_e.vanishActor=function(e){var t=document.getElementById("spriteLayer"),i=e.spriteIndex;if(!(i<0||i>=_e.spriteCount)){var o=_e.sprite[i];if(o.visible||o.isFading()){var n,a=document.getElementById("explosion"+i);if(!a){var r=document.createElementNS(J.SVG_NS,"clipPath");r.setAttribute("id","explosionClipPath"+i),(n=document.createElementNS(J.SVG_NS,"rect")).setAttribute("id","explosionClipRect"+i),n.setAttribute("width",o.height),n.setAttribute("height",o.width),r.appendChild(n),t.appendChild(r),(a=document.createElementNS(J.SVG_NS,"image")).setAttribute("id","explosion"+i),a.setAttribute("visibility","hidden"),a.setAttribute("clip-path","url(#explosionClipPath"+i+")"),t.insertBefore(a,o.getElement()||o.getLegacyElement())}var l=o.width,u=Te.explosionFrames,d=o.getCurrentDrawPosition(),c={x:d.x-o.width/2,y:d.y-o.height/2};a.setAttribute("height",o.height),a.setAttribute("width",u*l),a.setAttribute("x",c.x),a.setAttribute("y",c.y),a.setAttribute("visibility","visible"),(n=document.getElementById("explosionClipRect"+i)).setAttribute("x",c.x),n.setAttribute("y",c.y),Te.fadeExplosion?o.startFade(Te.explosionFrames*Te.timePerExplosionFrame):_e.setSprite({spriteIndex:i,value:"hidden"}),s.default.range(0,u).forEach((function(e){_e.perExecutionTimeouts.push(setTimeout((function(){a.setAttribute("x",c.x-e*l)}),e*Te.timePerExplosionFrame))})),_e.perExecutionTimeouts.push(setTimeout((function(){a.setAttribute("visibility","hidden"),Te.fadeExplosion&&(_e.setSprite({spriteIndex:i,value:"hidden"}),o.setOpacity(1))}),Te.timePerExplosionFrame*(u+1))),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Te.explosion+"?spriteIndex="+i)}}},_e.setSpriteEmotion=function(e){var t=_e.sprite[e.spriteIndex];void 0!==t&&(t.emotion=e.value)},_e.getSpriteEmotion=function(e){var t=_e.sprite[e.spriteIndex];if(void 0!==t){var i=t.emotion;_e.queueCallback(e.callback,[i])}},_e.setSpriteSpeed=function(e){var t=Math.min(Math.max(e.value,a.SpriteSpeed.SLOW),a.SpriteSpeed.VERY_FAST),i=_e.sprite[e.spriteIndex];void 0!==i&&i.setSpeed(t)};var ct={slow:a.SpriteSpeed.SLOW,normal:a.SpriteSpeed.NORMAL,fast:a.SpriteSpeed.VERY_FAST};_e.setDroidSpeed=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();t===a.RANDOM_VALUE&&(t=r.randomKey(ct));var i=ct[t];if(void 0===i)throw new RangeError("Incorrect parameter: "+e.value);e.value=i,e.spriteIndex=_e.protaganistSpriteIndex||0,_e.setSpriteSpeed(e)},_e.setSpriteSize=function(e){var t=_e.sprite[e.spriteIndex];if(void 0!==t&&t.size!==e.value){t.size=e.value;var i=t.value;"hidden"!==i&&(t.image=void 0,t.legacyImage=void 0,_e.setSprite({spriteIndex:e.spriteIndex,value:i}),t.bubbleVisible&&ft(e.spriteIndex,t.bubbleText))}},_e.changeScore=function(e){_e.adjustScore(_e.paramAsNumber(e.value))},_e.reduceScore=function(e){_e.adjustScore(-1*_e.paramAsNumber(e.value))},_e.setScore=function(e){_e.adjustScore(_e.paramAsNumber(e)-_e.playerScore)},_e.paramAsNumber=function(e){if("number"!=typeof e&&("string"!=typeof e||isNaN(e)))throw new TypeError("Incorrect parameter: "+e);return Number(e)},_e.adjustScore=function(e){_e.playerScore+=e,_e.displayFloatingScore(e),_e.playerScore-e<1e3&&_e.playerScore>=1e3&&Me("whenScore1000")},_e.setScoreText=function(e){_e.scoreText=e.text,_e.displayScore()},_e.setVictoryText=function(e){_e.victoryText=e.text,_e.displayVictoryText()},_e.endGame=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();if("win"===t)_e.trackedBehavior.hasWonGame=!0,_e.setVictoryText({text:B.default.winMessage()});else{if("lose"!==t)throw new RangeError("Incorrect parameter: "+e.value);_e.trackedBehavior.hasLostGame=!0,_e.setVictoryText({text:B.default.loseMessage()})}_e.gameState=_e.GameStates.OVER},_e.setBackground=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();t===a.RANDOM_VALUE&&(t=Te.backgroundChoicesK1[Math.floor(Math.random()*(Te.backgroundChoicesK1.length-1))][1].replace(/^"(.*)"$/,"$1"));var i=Te[t];if(!i)throw new RangeError("Incorrect parameter: "+e.value);t!==_e.background&&(_e.background=t,_e.walls.setBackground(t),document.getElementById("background").setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i.background),_e.wallMapCollisions&&_e.wallMapRequested&&_e.setMap({value:_e.wallMapRequested,forceRedraw:!0}),_e.loadClouds())},_e.setMap=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t,i=e.value.toLowerCase().trim();i===a.RANDOM_VALUE&&(i=Te.mapChoices[Math.floor(1+Math.random()*(Te.mapChoices.length-1))][1].replace(/^"(.*)"$/,"$1"));if(!(null===(t="default"===i?null:Te.getMap?Te.getMap(_e.background,i):i)||Te[t]||Te.wallMaps&&Te.wallMaps[t]))throw new RangeError("Incorrect parameter: "+e.value);(e.forceRedraw||t!==_e.wallMap||e.color&&e.color!==_e.wallColor)&&(_e.wallMap=t,_e.wallMapCollisions=!0,_e.walls.setWallMapRequested(i),_e.wallMapRequested=e.value,e.color&&_e.wallColor!==e.color&&(_e.wallColor=e.color,_e.walls.setColor(e.color)),(0,n.default)(".tileClip").remove(),(0,n.default)(".tile").remove(),_e.tiles=[],_e.drawMapTiles(),_e.fixSpriteLocation(),Ve())},_e.fixSpriteLocation=function(){if(_e.wallMapCollisions)for(var e=0;e<_e.sprite.length;e++){var t=_e.sprite[e],i=Ue(e,!1);if(_e.willSpriteTouchWall(t,i.x,i.y)){var o=i.x+t.width/2,n=i.y+t.height/2;o+=Te.wallCollisionRectOffsetX+Te.wallCollisionRectWidth/2,n+=Te.wallCollisionRectOffsetY+Te.wallCollisionRectHeight/2;for(var a=Math.floor(o/_e.SQUARE_SIZE),r=Math.floor(n/_e.SQUARE_SIZE),s=Math.max(r-1,0),l=Math.min(r+1,_e.ROWS-1),u=Math.max(a-1,0),d=Math.min(a+1,_e.COLS-1),c=s;c<=l;c++)for(var p=u;p<=d;p++){var m=_e.HALF_SQUARE+_e.SQUARE_SIZE*p-t.width/2-Te.wallCollisionRectOffsetX,h=_e.HALF_SQUARE+_e.SQUARE_SIZE*c-t.height/2-Te.wallCollisionRectOffsetY;if(!_e.willSpriteTouchWall(t,m,h))return t.x=m,t.y=h,void t.setDirection(de.NONE)}}}},_e.setSprite=function(e){if("string"!=typeof e.value)throw new TypeError("Incorrect parameter: "+e.value);var t=e.value.toLowerCase().trim();t===a.RANDOM_VALUE&&(t=Te.avatarList[Math.floor(Math.random()*Te.avatarList.length)]);var i=Te[t];if(!i&&"hidden"!==t&&"visible"!==t)throw new RangeError("Incorrect parameter: "+e.value);var o=e.spriteIndex;if(!(o<0||o>=_e.spriteCount)){var n=_e.sprite[o];if(n&&(n.visible="hidden"!==t&&!e.forceHidden,n.value=e.forceHidden?"hidden":t,"hidden"!==t&&"visible"!==t)){n.imageName=t,n.frameCounts=i.frameCounts,n.setNormalFrameDuration(i.animationFrameDuration),n.drawScale=r.valueOr(i.drawScale,1),Te.gridAlignedMovement?(n.height=n.width=_e.SQUARE_SIZE,n.size=n.width/Te.spriteWidth,n.drawHeight=n.drawScale*n.size*Te.spriteHeight,n.drawWidth=n.drawScale*n.size*Te.spriteWidth):(n.drawHeight=n.height=n.drawScale*n.size*Te.spriteHeight,n.drawWidth=n.width=n.drawScale*n.size*Te.spriteWidth),Te.projectileSpriteHeight&&(n.projectileSpriteHeight=n.size*Te.projectileSpriteHeight),Te.projectileSpriteWidth&&(n.projectileSpriteWidth=n.size*Te.projectileSpriteWidth),n.setImage(i.walk,n.frameCounts),n.setLegacyImage(i.sprite,n.frameCounts),n.createElement(document.getElementById("spriteLayer"));var s=n.getLegacyElement();if(s&&O.default.addMouseDownTouchEvent(n.getLegacyElement(),Pe(this,_e.onSpriteClicked,o)),(s=n.getElement())&&O.default.addMouseDownTouchEvent(n.getElement(),Pe(this,_e.onSpriteClicked,o)),_e.movementAudioOff(),!_e.movementAudioEffects[t]&&Te.avatarList){var l=(Te[t]||{}).movementAudio||[];_e.movementAudioEffects[t]=[],_e.movementAudioEffects[t]=l.map((function(e){return new w.default(W.default.getSingleton(),e)}))}_e.currentSpriteMovementAudioEffects=_e.movementAudioEffects[t],_e.displaySprite(o)}}},_e.getSpriteVisibility=function(e){var t=_e.sprite[e.spriteIndex];void 0!==t&&_e.queueCallback(e.callback,[t.visible])},_e.getSpriteValue=function(e){var t=_e.sprite[e.spriteIndex];void 0!==t&&_e.queueCallback(e.callback,[t.value])};var pt=!1;_e.isMovementAudioOn=function(){return pt},_e.movementAudioOn=function(){_e.movementAudioOff(),_e.currentMovementAudio=_e.currentSpriteMovementAudioEffects[Math.floor(Math.random()*_e.currentSpriteMovementAudioEffects.length)],_e.currentMovementAudio&&_e.currentMovementAudio.on(),pt=!0},_e.movementAudioOff=function(){_e.currentMovementAudio&&_e.currentMovementAudio.off(),pt=!1};var mt=function(e,t){return e+" "+t+" "},ht=function(e,t,i,o,n,a,r,s){var l="M"+mt(e+n,t);return a||(r?(l+="L"+mt(e+n+s,t),l+="L"+mt(e+n-10+s,t-15)+"L"+mt(e+n+25+s,t)):(l+="L"+mt(e+i-n-25-s,t)+"L"+mt(e+i-10-s,t-15),l+="L"+mt(e+i-n-s,t))),l+="L"+mt(e+i-n,t),l+="Q"+mt(e+i,t)+mt(e+i,t+n),l+="L"+mt(e+i,t+o-n)+"Q"+mt(e+i,t+o)+mt(e+i-n,t+o),a&&(r?(l+="L"+mt(e+n+25+s,t+o)+"L"+mt(e+n-10+s,t+o+15),l+="L"+mt(e+n+s,t+o)):(l+="L"+mt(e+i-n-s,t+o),l+="L"+mt(e+i-10-s,t+o+15)+"L"+mt(e+i-n-25-s,t+o))),l+="L"+mt(e+n,t+o),l+="Q"+mt(e,t+o)+mt(e,t+o-n),l+="L"+mt(e,t+n)+"Q"+mt(e,t)+mt(e+n,t),l+="Z"},St=function(e){e.complete||(e.waitCallback&&e.waitCallback(),e.complete=!0)};_e.wait=function(e){return e.started||(e.started=!0,"click"===e.value?e.waitForClick=!0:e.waitTimeout=window.setTimeout(Pe(this,St,e),e.value)),e.complete},_e.hideTitleScreen=function(e){var t=document.getElementById("titleScreenTitle"),i=document.getElementById("titleScreenTextGroup");t.setAttribute("visibility","hidden"),i.setAttribute("visibility","hidden"),e.complete=!0},_e.showTitleScreen=function(e){if(!e.started){e.started=!0;var t=document.getElementById("titleScreenTitle"),i=document.getElementById("titleScreenTextGroup"),o=document.getElementById("titleScreenText"),n=document.getElementById("titleScreenTextRect");t.textContent=e.title;var a={svgText:o,text:e.text,width:Ie,maxWidth:Ie,lineHeight:24,topMargin:5,sideMargin:20,maxLines:7,fullHeight:188},r=Fe(a).height;n.setAttribute("height",r),t.setAttribute("visibility","visible"),i.setAttribute("visibility","visible"),e.waitForClick=!0,e.waitCallback=Pe(this,_e.hideTitleScreen,e),e.waitTimeout=window.setTimeout(Pe(this,St,e),5e3)}return e.complete},_e.isCmdCurrentInQueue=function(e,t){var i=!1;return _e.eventHandlers.forEach((function(o){if(o&&o.name===t){var n=o.cmdQueue[0];n&&n.name===e&&(i=!0)}})),i},_e.queueCallback=function(e,t){var i="callbackQueue".concat(_e.callbackQueueIndex);_e.callbackQueueIndex++;var o=(t=t||[""]).map((function(e){return _e.interpreter.createPrimitive(e)})),n={node:{type:"CallExpression",arguments:o,end:1},doneCallee_:!0,func_:e,arguments_:o,n_:o.length};it(_e.eventHandlers,i,(function(){n.arguments_.length>0&&(n.value=n.arguments_.pop());var e=_e.interpreter.pushStackFrame(n);for(_e.interpreter.paused_=!1;_e.interpreter.getStackDepth()>=e;)_e.interpreter.step();_e.interpreter.paused_=!0})),Me(i)},_e.askForInput=function(e,t){_e.pauseExecution();var i=document.getElementById("visualization"),o=document.createElement("div");Object.assign(o.style,{position:"absolute",top:0,left:0,width:"400px",height:"400px"}),i.appendChild(o),(0,L.singleton)().resizeVisualization(),_e.inputPromptElement=o,v.default.render(b.default.createElement(m.default,{question:e,onInputReceived:function(e){_e.resumeExecution(),_e.hideInputPrompt(),_e.queueCallback(t,[e])}}),o)},_e.hideInputPrompt=function(){var e=_e.inputPromptElement;e&&(v.default.unmountComponentAtNode(e),e.parentNode.removeChild(e),_e.inputPromptElement=null)},_e.hideSpeechBubble=function(e){var t=_e.sprite[e.spriteIndex];if(void 0!==t){var i=document.getElementById("speechBubble"+e.spriteIndex);i.setAttribute("visibility","hidden"),i.removeAttribute("onTop"),i.removeAttribute("onRight"),i.removeAttribute("height"),e.complete=!0,t.bubbleVisible=!1,delete t.bubbleTimeoutFunc,_e.sayComplete++}},_e.saySprite=function(e){if(e.started)return e.complete;var t=e.spriteIndex,i=_e.sprite[t];return i?(e.started=!0,i.bubbleTimeoutFunc&&i.bubbleTimeoutFunc(),window.clearTimeout(i.bubbleTimeout),i.visible?(ft(t,e.text),_e.displaySprite(e.spriteIndex),document.getElementById("speechBubble"+t).setAttribute("visibility","visible"),i.bubbleVisible=!0,i.bubbleText=e.text,i.bubbleTimeoutFunc=Pe(this,_e.hideSpeechBubble,e),i.bubbleTimeout=window.setTimeout(i.bubbleTimeoutFunc,1e3*e.seconds),e.complete):(e.complete=!0,e.complete)):void 0};var ft=function(e,t){var i=document.getElementById("speechBubbleText"+e),o=_e.sprite[e],n=(_e.MAZE_HEIGHT-o.height)/2,a=Math.floor((n-10-10)/20),r=Fe({svgText:i,text:t,width:180,maxWidth:380,lineHeight:20,topMargin:5,sideMargin:10,maxLines:a,fullHeight:20*a+10+10}),s=document.getElementById("speechBubblePath"+e);s.setAttribute("height",r.height),s.setAttribute("width",r.width),dt(s)};_e.stop=function(e){var t=_e.sprite[e.spriteIndex];if(void 0!==t&&(Ne(e.spriteIndex,!0),Ne(e.spriteIndex,!1),t.setActivity(a.BEHAVIOR_STOP),!e.dontResetCollisions)){t.clearCollisions();for(var i=0;i<_e.spriteCount;i++)i!==e.spriteIndex&&_e.sprite[i].endCollision(e.spriteIndex)}},_e.throwProjectile=function(e){if(e.started)return e.complete;e.started=!0,e.complete=!1,window.setTimeout((function(){e.complete=!0}),500);var t=_e.sprite[e.spriteIndex];if(t.visible){var i=Te.preventProjectileLoop&&Te.preventProjectileLoop(e.className),o={frames:ut(e.className,Te.specialProjectileProperties,Te.projectileFrames),className:e.className,dir:e.dir,image:Te[e.className],loop:!i,spriteX:t.x,spriteY:t.y,spriteHeight:t.projectileSpriteHeight||t.height,spriteWidth:t.projectileSpriteWidth||t.width},n=new y.default(o);n.createElement(document.getElementById("svgStudio")),_e.projectiles.push(n)}};var gt=function(e,t){if("bounce"===t)e.bounce();else{if("disappear"!==t)throw"unknown action in doMakeProjectile";e.removeElement();var i=_e.projectiles.indexOf(e);if(-1!==i)return _e.projectiles.splice(i,1),!0}return!1};function _t(e){return/^\d*$/.test(e)}function yt(e){return-1!==Ee.indexOf(e)}function bt(e){return-1!==Te.ProjectileClassNames.indexOf(e)}function vt(e){return-1!==Te.ItemClassNames.indexOf(e)}function kt(e,t,i){var o="whenSpriteCollided-"+e+"-";Me(o+t,i),Me(o+"anything",i),_t(t)?(Me(o+"any_actor",i),Me(o+_e.sprite[t].imageName,!1,[t])):yt(t)?Me(o+"any_edge",i):bt(t)?Me(o+"any_projectile",i):vt(t)&&Me(o+"any_item",i)}function Tt(e,t,i){var o="whenItemCollided-"+e+"-";Me(o+t,i),yt(t)&&Me(o+"any_edge",i)}function Et(e,t){var i="whenItemCollided-"+e+"-";_e.executeQueue(i+t),yt(t)&&_e.executeQueue(i+"any_edge")}function At(e,t){var i="whenSpriteCollided-"+e+"-";_e.executeQueue(i+t),_t(t)&&_e.executeQueue(i+_e.sprite[t].imageName),_e.executeQueue(i+"any_actor"),_e.executeQueue(i+"anything"),_e.executeQueue(i+"goal"),yt(t)?_e.executeQueue(i+"any_edge"):bt(t)?_e.executeQueue(i+"any_projectile"):vt(t)&&_e.executeQueue(i+"any_item")}function wt(e){return _e.sprite.filter((function(t){return t.imageName===e&&t.visible}))}function It(e,t){var i=r.valueOr(Te.goalSpriteWidth,_e.MARKER_WIDTH),o=r.valueOr(Te.goalSpriteHeight,_e.MARKER_HEIGHT),n=Te.goalCollisionRectWidth||_e.MARKER_WIDTH,s=Te.goalCollisionRectHeight||_e.MARKER_HEIGHT,l=Te.itemCollisionRectWidth||e.width,u=Te.itemCollisionRectHeight||e.height,d=e.x+e.width/2,c=e.y+e.height/2,p=t.x+i/2+r.valueOr(Te.goalRenderOffsetX,0),m=t.y+o/2+r.valueOr(Te.goalRenderOffsetY,0),h=r.valueOr(Te.finishCollideDistanceScaling,a.FINISH_COLLIDE_DISTANCE_SCALING);_e.drawDebugRect("goalCollisionSprite",d,c,h*l,h*u),_e.drawDebugRect("goalCollisionGoal",p,m,h*n,h*s);var S=function(e){return h*((e?u:l)+(e?s:n))/2};return De(d,p,S(!1),c,m,S(!0))}_e.makeProjectile=function(e){if(e.eventObject)gt(e.eventObject,e.action);else for(var t=0;t<_e.projectiles.length;t++)_e.projectiles[t].className===e.className&&gt(_e.projectiles[t],e.action)&&t--},_e.collideItemWith=function(e,t,i){e.startCollision(t)&&Tt(e.className,t,i)},_e.collideSpriteWith=function(e,t,i){_e.sprite[e].startCollision(t)&&kt(e,t,i)},_e.setSpritePosition=function(e){var t=_e.sprite[e.spriteIndex];if(void 0!==t){e.value&&(e.x=r.xFromPosition(e.value,_e.MAZE_WIDTH,t.width),e.y=r.yFromPosition(e.value,_e.MAZE_HEIGHT,t.height));var i=t.x===e.x&&t.y===e.y;_e.stop({spriteIndex:e.spriteIndex,dontResetCollisions:i}),t.displayX=t.x=e.x,t.displayY=t.y=e.y,t.setDirection(de.NONE)}},_e.setSpriteXY=function(e){var t=_e.sprite[e.spriteIndex];if(void 0!==t){var i=e.x-t.width/2,o=e.y-t.height/2,n=t.x===i&&t.y===o;_e.stop({spriteIndex:e.spriteIndex,dontResetCollisions:n}),t.displayX=t.x=i,t.displayY=t.y=o,t.setDirection(de.NONE)}},_e.getSpriteXY=function(e){var t=_e.sprite[e.spriteIndex];void 0!==t&&_e.queueCallback(e.callback,[t.x,t.y])},_e.setSpriteBehavior=function(e){var t=_e.sprite[e.spriteIndex];t&&t.setActivity(e.behavior,e.targetSpriteIndex)},_e.setSpritesWander=function(e){wt(e.spriteName).forEach((function(e){return e.setActivity(a.BEHAVIOR_WANDER)}))},_e.setSpritesStop=function(e){wt(e.spriteName).forEach((function(e){return e.setActivity(a.BEHAVIOR_STOP)}))},_e.setSpritesChase=function(e){_e.sprite[e.targetSpriteIndex]&&wt(e.spriteName).forEach((function(t){return t.setActivity(a.BEHAVIOR_CHASE,e.targetSpriteIndex)}))},_e.setSpritesFlee=function(e){_e.sprite[e.targetSpriteIndex]&&wt(e.spriteName).forEach((function(t){return t.setActivity(a.BEHAVIOR_FLEE,e.targetSpriteIndex)}))},_e.setSpritesSpeed=function(e){wt(e.spriteName).forEach((function(t){return t.speed=e.speed}))},_e.addGoal=function(e){if(e.value){var t={width:r.valueOr(Te.goalSpriteWidth,_e.MARKER_WIDTH),height:r.valueOr(Te.goalSpriteHeight,_e.MARKER_HEIGHT)};e.x=r.xFromPosition(e.value,_e.MAZE_WIDTH,t.width),e.y=r.yFromPosition(e.value,_e.MAZE_HEIGHT,t.height)}var i={finished:!1,x:e.x,y:e.y};_e.createGoalElements(_e.allGoals_().length,i),_e.dynamicSpriteGoals_.push(i),Ve()},_e.getPlayspaceBoundaries=function(e){return Te.wallCollisionRectWidth&&Te.wallCollisionRectHeight&&!Te.gridAlignedMovement?{top:0-(e.height-Te.wallCollisionRectHeight)/2-Te.wallCollisionRectOffsetY,right:_e.MAZE_WIDTH-Te.wallCollisionRectWidth-(e.width-Te.wallCollisionRectWidth)/2-Te.wallCollisionRectOffsetX,bottom:_e.MAZE_HEIGHT-Te.wallCollisionRectHeight-(e.height-Te.wallCollisionRectHeight)/2-Te.wallCollisionRectOffsetY,left:0-(e.width-Te.wallCollisionRectWidth)/2-Te.wallCollisionRectOffsetX}:{top:0,right:_e.MAZE_WIDTH-e.width,bottom:_e.MAZE_HEIGHT-e.height,left:0}},_e.getSkin=function(){return Te},_e.yieldGridAlignedTicks=function(){_e.yieldExecutionTicks+=1+_e.gridAlignedExtraPauseSteps,_e.JSInterpreter&&(_e.JSInterpreter.yield(),_e.JSInterpreter.selectCurrentCode()),_e.movementAudioOn()},_e.turnSingle=function(e){if(!Te.gridAlignedMovement)throw new TypeError("Studio.turnSingle is only valid in grid-aligned mode");var t=_e.sprite[e.spriteIndex];void 0!==t&&(t.lastMove=_e.tickCount,t.setActivity(a.BEHAVIOR_GRID_ALIGNED),t.addAction(new F.GridTurn(e.dir,Te.slowExecutionFactor)),_e.yieldGridAlignedTicks(),_e.lastMoveSingleDir=e.dir)},_e.moveSingle=function(e){var t=_e.sprite[e.spriteIndex];if(void 0!==t){t.lastMove=_e.tickCount;var i=Te.gridAlignedMovement?_e.SQUARE_SIZE:t.speed,o=!1,n=!1,r=0,s=0;switch(e.dir){case de.NORTH:s=-i;break;case de.EAST:r=i;break;case de.SOUTH:s=i;break;case de.WEST:r=-i}e.backward&&(r*=-1,s*=-1);var l=t.x+r,u=t.y+s;if(_e.wallMapCollisions&&_e.willSpriteTouchWall(t,l,u)&&(o=!0,_e.throttledCollideSpriteWithWallFunctions[e.spriteIndex]()),!_e.allowSpritesOutsidePlayspace&&_e.willSpriteLeavePlayspace(t,l,u)&&(n=!0),Te.gridAlignedMovement)t.setActivity(a.BEHAVIOR_GRID_ALIGNED),o||n?t.addAction(new F.GridMoveAndCancel(r,s,Te.slowExecutionFactor,e.backward)):t.addAction(new F.GridMove(r,s,Te.slowExecutionFactor,e.backward)),_e.yieldGridAlignedTicks();else{if(!o){if(n){var d=_e.getPlayspaceBoundaries(t);l=Math.max(d.left,Math.min(d.right,l)),u=Math.max(d.top,Math.min(d.bottom,u))}t.x=l,t.y=u}_e.isMovementAudioOn()||_e.movementAudioOn()}_e.lastMoveSingleDir=e.dir}},_e.moveDistance=function(e){return e.started||(e.started=!0,Te.gridAlignedMovement&&(e.distance=Math.ceil(e.distance/_e.SQUARE_SIZE)*_e.SQUARE_SIZE),e.queuedDistance=e.distance),0===e.queuedDistance},_e.onEvent=function(e){it(_e.eventHandlers,e.eventName,e.func)},_e.allWhenRunBlocksComplete=function(){for(var e=0;e<_e.eventHandlers.length;e++)if(_e.eventHandlers[e]&&"whenGameStarts"===_e.eventHandlers[e].name&&0!==_e.eventHandlers[e].cmdQueue.length)return!1;return!0},_e.timedOut=function(){if(ke.timeoutAfterWhenRun){if(ke.editCode)return _e.JSInterpreter&&_e.JSInterpreter.startedHandlingEvents;if(0===_e.eventHandlers.length||1===_e.eventHandlers.length&&_e.eventHandlers[0]&&"whenGameStarts"===_e.eventHandlers[0].name&&_e.allWhenRunBlocksComplete())return!0}return _e.tickCount>_e.timeoutFailureTick},_e.allGoalsVisited=function(){var e,t=_e.sprite[_e.protagonistSpriteIndex],i=0;if(0===_e.allGoals_().length)return!1;if(_e.protagonistSpriteIndex&&!t)return!1;_e.allGoals_().forEach((function(o){if(!o.finished){if(t){var n=o.finished;if(o.finished=It(t,o),!n&&o.finished){var a="whenSpriteCollided-"+_e.protagonistSpriteIndex+"-";Me(a+"anything",false),Me(a+"goal",false)}}else{o.finished=!1;for(var r=0;r<_e.sprite.length;r++)if(_e.sprite[r].visible&&It(_e.sprite[r],o)){o.finished=!0,Te.fadeOutGoal&&(o.startFadeTime=(new Date).getTime()),Me("whenTouchGoal"),Me("whenSpriteCollided-"+r+"-goal");break}}e=o.finished}if(o.finished&&(i++,e&&(i!==_e.spriteGoals_.length||Te.playFinalGoalSound)&&_e.playSound({soundName:"flag"}),Te.goalSuccess)){var s=Te.goalSuccess;ke.goalOverride&&ke.goalOverride.successImage&&(s=Te[ke.goalOverride.successImage]),o.marker.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s)}}));var o=i===_e.allGoals_().length;return o&&!_e.touchAllGoalsEventFired&&(_e.touchAllGoalsEventFired=!0,Me("whenTouchAllGoals")),o},_e.conditionSatisfied=function(e){for(var t=_e.trackedBehavior,i=Object.keys(e),o=0;o<i.length;o++){var n=i[o],a=e[n];if("timedOut"===n&&t.timedOut!==a)return!1;if("collectedItemsAtOrAbove"===n&&t.removedItemCount<a)return!1;if("collectedItemsBelow"===n&&t.removedItemCount>=a)return!1;if("collectedSpecificItemsAtOrAbove"===n&&(void 0===t.removedItems[a.className]||t.removedItems[a.className]<a.count))return!1;if("collectedSpecificItemsBelow"===n&&void 0!==t.removedItems[a.className]&&t.removedItems[a.className]>=a.count)return!1;if("createdSpecificItemsAtOrAbove"===n&&(void 0===t.createdItems[a.className]||t.createdItems[a.className]<a.count))return!1;if("createdSpecificItemsBelow"===n&&void 0!==t.createdItems[a.className]&&t.createdItems[a.className]>=a.count)return!1;if("gotAllItems"===n&&t.gotAllItems!==a)return!1;if("touchedHazardsAtOrAbove"===n&&t.touchedHazardCount<a)return!1;if("currentPointsAtOrAbove"===n&&_e.playerScore<a)return!1;if("currentPointsBelow"===n&&_e.playerScore>=a)return!1;if("allGoalsVisited"===n&&t.allGoalsVisited!==a)return!1;if("setMap"===n&&t.hasSetMap!==a)return!1;if("setSprite"===n&&t.hasSetSprite!==a)return!1;if("setDroidSpeed"===n&&t.hasSetDroidSpeed!==a)return!1;if("throwProjectile"===n&&t.hasThrownProjectile!==a)return!1;if("setEmotion"===n&&t.hasSetEmotion!==a)return!1}return!0},_e.checkProgressConditions=function(){if(!ke.progressConditions)return null;for(var e=0;e<ke.progressConditions.length;e++){var t=ke.progressConditions[e];if(_e.conditionSatisfied(t.required))return t.result}return null};var Ct=function(){var e=0!==_e.allGoals_().length,t=_e.allGoalsVisited(),i=_e.checkProgressConditions(),o=!(!ke.goal||!ke.goal.successCondition),n=!o||r.valueOr(ke.goal.successCondition(B.default),!0),a=o&&r.valueOr(ke.goal.successCondition(B.default),!1);if(i){_e.result=i.success?J.ResultType.SUCCESS:J.ResultType.FAILURE,!i.success&&i.canPass&&(_e.testResults=J.TestResults.APP_SPECIFIC_ACCEPTABLE_FAIL,_e.progressConditionTestResult=!0);var s=i.message;return(0,L.singleton)().isUsingBlockly()&&(s=i.blocklyMessage||s),_e.message=r.valueOr(s,null),_e.pauseInterpreter=r.valueOr(i.pauseInterpreter,!1),!0}return e&&t&&n||e&&ke.completeOnSuccessConditionNotGoals&&a||!e&&a?(_e.result=J.ResultType.SUCCESS,!0):(ke.goal&&ke.goal.failureCondition&&ke.goal.failureCondition()||!(ke.progressConditions||!_e.timedOut()))&&(_e.result=J.ResultType.FAILURE,!0)}},3012:(e,t,i)=>{"use strict";var o;function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){var t,i;function o(t,i,o,n,a,r,s){var l;return(l=e.call(this,t,i,o)||this).squareSize=n,l.rows=a,l.columns=r,l.getWallValue=s,l}return i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,n(t,i),o.prototype.willRectTouchWall=function(e,t,i,o){for(var n=Math.floor(e)+1,a=Math.floor(t)+1,r=Math.floor(e/this.squareSize),s=Math.floor(t/this.squareSize),l=Math.max(0,r-n);l<Math.min(this.columns,r+n);l++)for(var u=Math.max(0,s-a);u<Math.min(this.rows,s+a);u++)if(this.getWallValue(u,l)&&(this.drawDebugRect("avatarCollision",(l+.5)*this.squareSize,(u+.5)*this.squareSize,this.squareSize,this.squareSize),this.overlappingTest(e,(l+.5)*this.squareSize,this.squareSize/2+i/2,t,(u+.5)*this.squareSize,this.squareSize/2+o/2)))return!0;return!1},o}(((o=i(2586))&&o.__esModule?o:{default:o}).default);t.default=a,e.exports=t.default},2586:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t,i){this.gridAlignedMovement=t.gridAlignedMovement,this.wallCollisionRectOffsetX=t.wallCollisionRectOffsetX,this.wallCollisionRectOffsetY=t.wallCollisionRectOffsetY,this.wallCollisionRectWidth=t.wallCollisionRectWidth,this.wallCollisionRectHeight=t.wallCollisionRectHeight,this.drawDebugRect=i}var t=e.prototype;return t.setBackground=function(e){this.background=e},t.setWallMapRequested=function(e){this.wallMapRequested=e},t.willCollidableTouchWall=function(e,t,i){var o=e.width,n=e.height;return this.gridAlignedMovement||(t+=this.wallCollisionRectOffsetX,i+=this.wallCollisionRectOffsetY,o=this.wallCollisionRectWidth||o,n=this.wallCollisionRectHeight||n),this.drawDebugRect("avatarCollision",t,i,o,n),this.willRectTouchWall(t,i,o,n)},t.willRectTouchWall=function(e,t,i,o){return!1},t.overlappingTest=function(e,t,i,o,n,a){return Math.abs(e-t)<i&&Math.abs(o-n)<a},t.getWallOverlayURI=function(){return null},t.setColor=function(e){},e}();t.default=i,e.exports=t.default},2938:(e,t,i)=>{"use strict";function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=i(2))&&n.__esModule?n:{default:n},r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=a?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,i&&i.set(e,n);return n}(i(1));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c=function(e){var t,i;function o(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return d(l(t=e.call.apply(e,[this].concat(o))||this),"state",{value:t.props.currentValue}),d(l(t),"handleSubmit",(function(e){e.preventDefault(),t.props.onInputReceived(t.refs.answer.value)})),t}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,u(t,i);var n=o.prototype;return n.componentDidMount=function(){this.refs.answer.focus()},n.render=function(){var e=this;return r.default.createElement("form",{style:p.form,onSubmit:this.handleSubmit},r.default.createElement("div",{style:p.wrapper},r.default.createElement("label",{style:p.question},this.props.question),r.default.createElement("input",{ref:"answer",value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})},type:"text",style:p.input}),r.default.createElement("input",{type:"submit",className:"btn",style:p.submit})))},o}(r.Component);t.default=c,d(c,"propTypes",{question:a.default.string.isRequired,onInputReceived:a.default.func.isRequired,currentValue:a.default.string});var p={form:{background:"#fff"},wrapper:{margin:20},question:{fontSize:18},input:{fontSize:18,width:"100%",height:"2em",boxSizing:"border-box"},submit:{fontSize:18}};e.exports=t.default},32:e=>{"use strict";e.exports=$}},e=>{var t=t=>e(e.s=t);e.O(0,[1,2,3],(()=>(t(366),t(132),t(3713))));e.O()}]);
//# sourceMappingURL=studiowpe8a60f8881e1f66bfde4.min.js.map
;
